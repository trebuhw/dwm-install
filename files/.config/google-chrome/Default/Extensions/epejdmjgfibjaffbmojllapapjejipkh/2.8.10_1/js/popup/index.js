const headerBookmark=document.getElementById("headerButton-Bookmark"),headerTabsync=document.getElementById("headerButton-TabSync"),headerSetting=document.getElementById("headerButton-setting"),headerBack=document.getElementById("headerButton-back"),passwordsHeaderBtn=document.getElementById("username-password-side-header"),contentBookmark=document.getElementById("content-bookmark"),contentTabsync=document.getElementById("content-tabsync"),contentSettings=document.getElementById("content-settings"),syncWrapper=document.getElementById("syncWrapper"),settingWrapper=document.getElementById("settingWrapper"),settingLogout=document.getElementById("settingLogout"),headerTitle=document.getElementById("headerText-main"),syncSettingsBack=document.getElementById("sync-settings-back"),headerSettingMore=document.getElementById("header-setting-more"),moreInformationBack=document.getElementById("more-info-back"),userPassSettingsBack=document.getElementById("pass-settings-back");function stringifyLastImportTime(time){return`${LAST_SYNCED_TEXT} ${new Date(parseInt(time)).toLocaleDateString(void 0,{hour12:!1,minute:"2-digit",hour:"2-digit",year:"2-digit",month:"2-digit",day:"numeric"})}`}function stringifySyncedItems(){return getTextForCount("DREAM_CLOUD_SBODY_PD_ITEMS",syncedBookmarkItems+syncedTabItems)}function handleSyncPageClick(e){const className=e.target.className||"";className.indexOf("moreMenuEditMode")<0&&className.indexOf("moreMenuEditSearch")<0&&className.indexOf("fancytree-node")<0&&className.indexOf("fancytree-title")<0&&className.indexOf("fancytree-icon")<0&&className.indexOf("fancytree-expander")<0&&clearSelectStatus()}function handleBookmarkClick(){contentTabsync.style.display="none",headerTabsync.getElementsByTagName("img")[0].src="/assets/img/ic_oppentab.png",contentSettings.style.display="none",headerSetting.getElementsByTagName("img")[0].src="/assets/img/ic_setting.png",contentBookmark.style.display="block",headerBookmark.getElementsByTagName("img")[0].src="/assets/img/ic_bookmark_sel.png",syncWrapper.style.display="block",settingWrapper.classList.remove("slide-in"),settingWrapper.classList.add("slide-out"),setTimeout((()=>{settingWrapper.style.display="none"}),250)}function handleTabsyncClick(){contentSettings.style.display="none",headerSetting.getElementsByTagName("img")[0].src="/assets/img/ic_setting.png",contentBookmark.style.display="none",headerBookmark.getElementsByTagName("img")[0].src="/assets/img/ic_bookmark.png",contentTabsync.style.display="block";var tab_entries=document.getElementById("tabsyncData").parentElement.querySelectorAll(".noItemText"),tab_syncing=document.getElementById("tabsyncData").parentElement.querySelectorAll(".noItemText.syncing");tab_entries.length>0&&0===tab_syncing.length&&renderTabs(),headerTabsync.getElementsByTagName("img")[0].src="/assets/img/ic_oppentab_sel.png",syncWrapper.style.display="block",settingWrapper.classList.remove("slide-in"),settingWrapper.classList.add("slide-out"),setTimeout((()=>{settingWrapper.style.display="none"}),250)}function handleUsernamePasswordClick(){storageLocalApi.setItem("PASSWORD_SYNC_BADGE_SHOWED_1ST",!0),MenuContentView.onToggleUsernamePassword(!0),MenuContentView.toggleEditBar(!1),MenuContentView.isSearchEnabled&&MenuContentView.closeSearching(),contentBookmark.style.display="none",contentTabsync.style.display="none",ContentSettings.close(),settingWrapper.style.display="none",window.CredentialHome&&window.CredentialHome.open()}function handleSettingsClick(){MenuContentView.onToggleSetting(!0),MenuContentView.toggleEditBar(!1),MenuContentView.isSearchEnabled&&MenuContentView.closeSearching(),contentBookmark.style.display="none",contentTabsync.style.display="none",window.CredentialHome&&window.CredentialHome.close(),ContentSettings.open(),settingWrapper.style.display="block",settingWrapper.classList.remove("slide-out"),settingWrapper.classList.add("slide-in")}function handleSettingsBack(){MenuContentView.onToggleSetting(!1),contentTabsync.style.display="none",ContentSettings.close(),contentBookmark.style.display="none",syncWrapper.style.display="block",settingWrapper.classList.remove("slide-in"),settingWrapper.classList.add("slide-out"),setTimeout((()=>{settingWrapper.style.display="none"}),250)}function handleSyncSettingsBack(){ContentSettings.closeSyncSettings()}function handleHeaderMoreSettings(){ContentSettings.toggleMoreOptions()}function handleMoreInformationBack(){ContentSettings.closeMoreInformation()}function handleUserPassSettingBack(){ContentSettings.closeUserPassSettings()}function goUpAFolder(){isVisible(syncPage)&&!document.body.classList.contains("modal-visible")&&bookmarkReferenceContainer.children.length>1&&[...bookmarkReferenceContainer.children].slice(-2,-1)[0].firstChild.click()}function onLogoutClick(e){document.dispatchEvent(new CustomEvent("analytics",{detail:{action:"MORE_MENU-LOGOUT",event:e}})),chrome.tabs.query({url:BOOKMARK_MANAGER},(function(tabs){tabs.length>0&&chrome.tabs.remove(tabs[0].id)})),chrome.runtime.sendMessage({BUTTON:"LOGOUT"}),clearLocalStorage(),clearDatabase(),window.close(),chrome.action.setPopup({popup:""}),chrome.runtime.sendMessage({STATUS:"LOGGED_OUT"})}function onLoad(){isLoggedIn()&&(syncPage.style.display="block",addToBreadcrumb({id:0,clean:!0}))}async function onSyncNowClick(e){document.dispatchEvent(new CustomEvent("analytics",{detail:{action:"SYNC_BUTTON",event:e}})),storageLocalApi.setItem("IS_SYNC_NOW",!0);const bkmData=bookmarkDataContainer,tabsData=tabsyncDataContainer;bkmData&&bkmData.children[1]&&bkmData.children[1].innerHTML==NO_BOOKMARKS&&syncingBookmarkText(),tabsData&&tabsData.children[1]&&tabsData.children[1].innerHTML==NO_TABS&&syncingTabText(),isBookmarkSyncOn()&&(await storageLocalApi.removeItems([BOOKMARK_SERVER_TIME]),DB.clear("BOOKMARKS"),chrome.runtime.sendMessage({BUTTON:"BOOKMARK_SYNC"})),isOpenTabsSyncOn()&&(DB.clear("TABS"),chrome.runtime.sendMessage({BUTTON:"TAB_SYNC"}))}document.addEventListener("touchmove",(e=>e.preventDefault()),!1),storageLocalApi.getItem(LAST_SYNCED)&&(document.getElementById("syncTime").innerText=stringifyLastImportTime(storageLocalApi.getItem(LAST_SYNCED))),syncPage.onclick=handleSyncPageClick,headerSetting.onclick=handleSettingsClick,headerSetting.onkeyup=enterPressed(handleSettingsClick),passwordsHeaderBtn&&(passwordsHeaderBtn.onclick=handleUsernamePasswordClick),headerBack.onclick=handleSettingsBack,headerBack.onkeyup=enterPressed(handleSettingsBack),syncSettingsBack.onclick=handleSyncSettingsBack,headerSettingMore.onclick=handleHeaderMoreSettings,moreInformationBack.onclick=handleMoreInformationBack,headerTitle.onclick=returnToMainPage,window.onkeyup=function(e=window.event){if((e.keyCode||e.which)===KEYS.BACK)"false"==storageLocalApi.getItem(IS_MODAL_OPENED)&&goUpAFolder()},window.onkeydown=function(e=window.event){if((e.keyCode||e.which)===KEYS.ESC)e.stopPropagation(),e.preventDefault()},settingLogout.onclick=onLogoutClick,settingLogout.parentNode.onkeyup=enterPressed(onLogoutClick);const samsungAccount=document.getElementById("samsungAccount"),syncBookmarks=document.getElementById("menu2"),contactUs=document.getElementById("menu3"),help=document.getElementById("menu4"),bookmarkManager=document.getElementById("bookmark-manager");function syncNow(e){contentTabsync.style.display="none",contentSettings.style.display="none",ContentSettings.closeSettingsView(),contentBookmark.style.display="none",syncWrapper.style.display="block",settingWrapper.classList.remove("slide-in"),settingWrapper.classList.add("slide-out"),setTimeout((()=>{settingWrapper.style.display="none"}),250),MenuContentView.onToggleSetting(!1),onSyncNowClick(e)}function onClickContactUs(){window.close(),chrome.tabs.create({url:WEBSTORE_URL})}function onClickHelp(){window.close(),chrome.tabs.create({url:"guide-page.html"})}function onClickPrivacyNotice(){window.close(),chrome.tabs.create({url:"https://account.samsung.com/membership/terms/privacypolicy"})}syncBookmarks.onclick=e=>{syncNow(e)},syncBookmarks.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&(contentTabsync.style.display="none",headerTabsync.getElementsByTagName("img")[0].src="/assets/img/ic_oppentab.png",contentSettings.style.display="none",headerSetting.getElementsByTagName("img")[0].src="/assets/img/ic_setting.png",contentBookmark.style.display="block",headerBookmark.getElementsByTagName("img")[0].src="/assets/img/ic_bookmark_sel.png",syncWrapper.style.display="block",settingWrapper.classList.remove("slide-in"),settingWrapper.classList.add("slide-out"),setTimeout((()=>{settingWrapper.style.display="none"}),250),onSyncNowClick(e))})),contactUs.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&(window.close(),chrome.tabs.create({url:WEBSTORE_URL}))})),help.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&(window.close(),chrome.tabs.create({url:"guide-page.html"}))})),bookmarkManager.onclick=e=>{chrome.tabs.query({url:BOOKMARK_MANAGER},(async function(tabs){tabs.length>0?chrome.tabs.update(tabs[0].id,{active:!0}):chrome.tabs.create({url:"bookmark-manager.html"}),await storageLocalApi.setItem(SYNC_NEEDED,!0),window.close()}))},chrome.tabs.query({url:BOOKMARK_MANAGER},(async function(tabs){(tabs.length>0||1==storageLocalApi.getItem(SYNC_NEEDED))&&(setTimeout((()=>{onSyncNowClick("manager_sync")}),200),await storageLocalApi.setItem(SYNC_NEEDED,!1))}));