function StorageLocalApi(){this.storage=null,chrome.storage.local.get(null,(e=>{this.storage=e||{},chrome.storage.local.onChanged.addListener((e=>{Object.keys(e).forEach((t=>{e[t].newValue?this.storage[t]=e[t].newValue:delete this.storage[t]}))}))}))}StorageLocalApi.prototype={async waitForAvailable(){return new Promise((async(e,t)=>{const n=e=>new Promise((t=>setTimeout(t,e)));for(;!this.storage;)await n(100);e()}))},get(e){const t={};return Object.keys(e).forEach((e=>{t[e]=this.storage[e]})),t},getItem(e){return this.storage[e]},set:e=>new Promise(((t,n)=>{chrome.storage.local.set(e,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);t()}))})),setItem(e,t){return new Promise(((n,r)=>{const o={};o[e]=t,this.storage[e]=t,chrome.storage.local.set(o,(()=>{if(chrome.runtime.lastError)return r(chrome.runtime.lastError);n()}))}))},setItems(e){return new Promise(((t,n)=>{chrome.storage.local.set(e,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);Object.keys(e).forEach((t=>{this.storage[t]=e[t]})),t()}))}))},setArrayItems(e){return new Promise(((t,n)=>{const r={};e.forEach((e=>{r[e[0]]=e[1]})),chrome.storage.local.set(r,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);Object.keys(r).forEach((e=>{this.storage[e]=r[e]})),t()}))}))},removeItem:e=>new Promise(((t,n)=>{chrome.storage.local.remove(e,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);t()}))})),removeItems:e=>new Promise(((t,n)=>{chrome.storage.local.remove(e,(()=>{if(chrome.runtime.lastError)return n(chrome.runtime.lastError);t()}))}))};const storageLocalApi=new StorageLocalApi;!function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(s)return s(i,!0);var S=new Error("Cannot find module '"+i+"'");throw S.code="MODULE_NOT_FOUND",S}var u=n[i]={exports:{}};t[i][0].call(u.exports,(function(e){return o(t[i][1][e]||e)}),u,u.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(t){"use strict";function n(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(e(295),e(296),e(2),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var r="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&n(Array,e,Function.call.bind([][e]))}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,295:295,296:296}],2:[function(e,t,n){e(119),t.exports=e(23).RegExp.escape},{119:119,23:23}],3:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],4:[function(e,t,n){var r=e(18);t.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},{18:18}],5:[function(e,t,n){var r=e(117)("unscopables"),o=Array.prototype;null==o[r]&&e(40)(o,r,{}),t.exports=function(e){o[r][e]=!0}},{117:117,40:40}],6:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],7:[function(e,t,n){var r=e(49);t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{49:49}],8:[function(e,t,n){"use strict";var r=e(109),o=e(105),s=e(108);t.exports=[].copyWithin||function(e,t){var n=r(this),i=s(n.length),a=o(e,i),c=o(t,i),S=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===S?i:o(S,i))-c,i-a),l=1;for(c<a&&a<c+u&&(l=-1,c+=u-1,a+=u-1);u-- >0;)c in n?n[a]=n[c]:delete n[a],a+=l,c+=l;return n}},{105:105,108:108,109:109}],9:[function(e,t,n){"use strict";var r=e(109),o=e(105),s=e(108);t.exports=function(e){for(var t=r(this),n=s(t.length),i=arguments.length,a=o(i>1?arguments[1]:void 0,n),c=i>2?arguments[2]:void 0,S=void 0===c?n:o(c,n);S>a;)t[a++]=e;return t}},{105:105,108:108,109:109}],10:[function(e,t,n){var r=e(37);t.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},{37:37}],11:[function(e,t,n){var r=e(107),o=e(108),s=e(105);t.exports=function(e){return function(t,n,i){var a,c=r(t),S=o(c.length),u=s(i,S);if(e&&n!=n){for(;S>u;)if((a=c[u++])!=a)return!0}else for(;S>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},{105:105,107:107,108:108}],12:[function(e,t,n){var r=e(25),o=e(45),s=e(109),i=e(108),a=e(15);t.exports=function(e,t){var n=1==e,c=2==e,S=3==e,u=4==e,l=6==e,d=5==e||l,m=t||a;return function(t,a,g){for(var h,y,C=s(t),f=o(C),p=r(a,g,3),v=i(f.length),A=0,E=n?m(t,v):c?m(t,0):void 0;v>A;A++)if((d||A in f)&&(y=p(h=f[A],A,C),e))if(n)E[A]=y;else if(y)switch(e){case 3:return!0;case 5:return h;case 6:return A;case 2:E.push(h)}else if(u)return!1;return l?-1:S||u?u:E}}},{108:108,109:109,15:15,25:25,45:45}],13:[function(e,t,n){var r=e(3),o=e(109),s=e(45),i=e(108);t.exports=function(e,t,n,a,c){r(t);var S=o(e),u=s(S),l=i(S.length),d=c?l-1:0,m=c?-1:1;if(n<2)for(;;){if(d in u){a=u[d],d+=m;break}if(d+=m,c?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:l>d;d+=m)d in u&&(a=t(a,u[d],d,S));return a}},{108:108,109:109,3:3,45:45}],14:[function(e,t,n){var r=e(49),o=e(47),s=e(117)("species");t.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?Array:t}},{117:117,47:47,49:49}],15:[function(e,t,n){var r=e(14);t.exports=function(e,t){return new(r(e))(t)}},{14:14}],16:[function(e,t,n){"use strict";var r=e(3),o=e(49),s=e(44),i=[].slice,a={},c=function(e,t,n){if(!(t in a)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";a[t]=Function("F,a","return new F("+r.join(",")+")")}return a[t](e,n)};t.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?c(t,r.length,r):s(t,r,e)};return o(t.prototype)&&(a.prototype=t.prototype),a}},{3:3,44:44,49:49}],17:[function(e,t,n){var r=e(18),o=e(117)("toStringTag"),s="Arguments"==r(function(){return arguments}());t.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},{117:117,18:18}],18:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],19:[function(e,t,n){"use strict";var r=e(67).f,o=e(66),s=e(86),i=e(25),a=e(6),c=e(27),S=e(37),u=e(53),l=e(55),d=e(91),m=e(28),g=e(62).fastKey,h=m?"_s":"size",y=function(e,t){var n,r=g(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){a(e,l,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[h]=0,null!=r&&S(r,n,e[u],e)}));return s(l.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var t=this,n=y(t,e);if(n){var r=n.n,o=n.p;delete t._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),t._f==n&&(t._f=r),t._l==n&&(t._l=o),t[h]--}return!!n},forEach:function(e){a(this,l,"forEach");for(var t,n=i(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),m&&r(l.prototype,"size",{get:function(){return c(this[h])}}),l},def:function(e,t,n){var r,o,s=y(e,t);return s?s.v=n:(e._l=s={i:o=g(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=s),r&&(r.n=s),e[h]++,"F"!==o&&(e._i[o]=s)),e},getEntry:y,setStrong:function(e,t,n){u(e,t,(function(e,t){this._t=e,this._k=t,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?l(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(t)}}},{25:25,27:27,28:28,37:37,53:53,55:55,6:6,62:62,66:66,67:67,86:86,91:91}],20:[function(e,t,n){var r=e(17),o=e(10);t.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{10:10,17:17}],21:[function(e,t,n){"use strict";var r=e(86),o=e(62).getWeak,s=e(7),i=e(49),a=e(6),c=e(37),S=e(12),u=e(39),l=S(5),d=S(6),m=0,g=function(e){return e._l||(e._l=new h)},h=function(){this.a=[]},y=function(e,t){return l(e.a,(function(e){return e[0]===t}))};h.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,n,s){var S=e((function(e,r){a(e,S,t,"_i"),e._i=m++,e._l=void 0,null!=r&&c(r,n,e[s],e)}));return r(S.prototype,{delete:function(e){if(!i(e))return!1;var t=o(e);return!0===t?g(this).delete(e):t&&u(t,this._i)&&delete t[this._i]},has:function(e){if(!i(e))return!1;var t=o(e);return!0===t?g(this).has(e):t&&u(t,this._i)}}),S},def:function(e,t,n){var r=o(s(t),!0);return!0===r?g(e).set(t,n):r[e._i]=n,e},ufstore:g}},{12:12,37:37,39:39,49:49,6:6,62:62,7:7,86:86}],22:[function(e,t,n){"use strict";var r=e(38),o=e(32),s=e(87),i=e(86),a=e(62),c=e(37),S=e(6),u=e(49),l=e(34),d=e(54),m=e(92),g=e(43);t.exports=function(e,t,n,h,y,C){var f=r[e],p=f,v=y?"set":"add",A=p&&p.prototype,E={},T=function(e){var t=A[e];s(A,e,"delete"==e||"has"==e?function(e){return!(C&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return C&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof p&&(C||A.forEach&&!l((function(){(new p).entries().next()})))){var _=new p,I=_[v](C?{}:-0,1)!=_,b=l((function(){_.has(1)})),O=d((function(e){new p(e)})),R=!C&&l((function(){for(var e=new p,t=5;t--;)e[v](t,t);return!e.has(-0)}));O||(p=t((function(t,n){S(t,p,e);var r=g(new f,t,p);return null!=n&&c(n,y,r[v],r),r})),p.prototype=A,A.constructor=p),(b||R)&&(T("delete"),T("has"),y&&T("get")),(R||I)&&T(v),C&&A.clear&&delete A.clear}else p=h.getConstructor(t,e,y,v),i(p.prototype,n),a.NEED=!0;return m(p,e),E[e]=p,o(o.G+o.W+o.F*(p!=f),E),C||h.setStrong(p,e,y),p}},{32:32,34:34,37:37,38:38,43:43,49:49,54:54,6:6,62:62,86:86,87:87,92:92}],23:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],24:[function(e,t,n){"use strict";var r=e(67),o=e(85);t.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},{67:67,85:85}],25:[function(e,t,n){var r=e(3);t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{3:3}],26:[function(e,t,n){"use strict";var r=e(7),o=e(110),s="number";t.exports=function(e){if("string"!==e&&e!==s&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),e!=s)}},{110:110,7:7}],27:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],28:[function(e,t,n){t.exports=!e(34)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},{34:34}],29:[function(e,t,n){var r=e(49),o=e(38).document,s=r(o)&&r(o.createElement);t.exports=function(e){return s?o.createElement(e):{}}},{38:38,49:49}],30:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],31:[function(e,t,n){var r=e(76),o=e(73),s=e(77);t.exports=function(e){var t=r(e),n=o.f;if(n)for(var i,a=n(e),c=s.f,S=0;a.length>S;)c.call(e,i=a[S++])&&t.push(i);return t}},{73:73,76:76,77:77}],32:[function(e,t,n){var r=e(38),o=e(23),s=e(40),i=e(87),a=e(25),c="prototype",S=function(e,t,n){var u,l,d,m,g=e&S.F,h=e&S.G,y=e&S.S,C=e&S.P,f=e&S.B,p=h?r:y?r[t]||(r[t]={}):(r[t]||{})[c],v=h?o:o[t]||(o[t]={}),A=v[c]||(v[c]={});for(u in h&&(n=t),n)d=((l=!g&&p&&void 0!==p[u])?p:n)[u],m=f&&l?a(d,r):C&&"function"==typeof d?a(Function.call,d):d,p&&i(p,u,d,e&S.U),v[u]!=d&&s(v,u,m),C&&A[u]!=d&&(A[u]=d)};r.core=o,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},{23:23,25:25,38:38,40:40,87:87}],33:[function(e,t,n){var r=e(117)("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},{117:117}],34:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],35:[function(e,t,n){"use strict";var r=e(40),o=e(87),s=e(34),i=e(27),a=e(117);t.exports=function(e,t,n){var c=a(e),S=n(i,c,""[e]),u=S[0],l=S[1];s((function(){var t={};return t[c]=function(){return 7},7!=""[e](t)}))&&(o(String.prototype,e,u),r(RegExp.prototype,c,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}))}},{117:117,27:27,34:34,40:40,87:87}],36:[function(e,t,n){"use strict";var r=e(7);t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{7:7}],37:[function(e,t,n){var r=e(25),o=e(51),s=e(46),i=e(7),a=e(108),c=e(118),S={},u={};n=t.exports=function(e,t,n,l,d){var m,g,h,y,C=d?function(){return e}:c(e),f=r(n,l,t?2:1),p=0;if("function"!=typeof C)throw TypeError(e+" is not iterable!");if(s(C)){for(m=a(e.length);m>p;p++)if((y=t?f(i(g=e[p])[0],g[1]):f(e[p]))===S||y===u)return y}else for(h=C.call(e);!(g=h.next()).done;)if((y=o(h,f,g.value,t))===S||y===u)return y},n.BREAK=S,n.RETURN=u},{108:108,118:118,25:25,46:46,51:51,7:7}],38:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],39:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],40:[function(e,t,n){var r=e(67),o=e(85);t.exports=e(28)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{28:28,67:67,85:85}],41:[function(e,t,n){t.exports=e(38).document&&document.documentElement},{38:38}],42:[function(e,t,n){t.exports=!e(28)&&!e(34)((function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a}))},{28:28,29:29,34:34}],43:[function(e,t,n){var r=e(49),o=e(90).set;t.exports=function(e,t,n){var s,i=t.constructor;return i!==n&&"function"==typeof i&&(s=i.prototype)!==n.prototype&&r(s)&&o&&o(e,s),e}},{49:49,90:90}],44:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],45:[function(e,t,n){var r=e(18);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{18:18}],46:[function(e,t,n){var r=e(56),o=e(117)("iterator"),s=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||s[o]===e)}},{117:117,56:56}],47:[function(e,t,n){var r=e(18);t.exports=Array.isArray||function(e){return"Array"==r(e)}},{18:18}],48:[function(e,t,n){var r=e(49),o=Math.floor;t.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},{49:49}],49:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],50:[function(e,t,n){var r=e(49),o=e(18),s=e(117)("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==o(e))}},{117:117,18:18,49:49}],51:[function(e,t,n){var r=e(7);t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var s=e.return;throw void 0!==s&&r(s.call(e)),t}}},{7:7}],52:[function(e,t,n){"use strict";var r=e(66),o=e(85),s=e(92),i={};e(40)(i,e(117)("iterator"),(function(){return this})),t.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),s(e,t+" Iterator")}},{117:117,40:40,66:66,85:85,92:92}],53:[function(e,t,n){"use strict";var r=e(58),o=e(32),s=e(87),i=e(40),a=e(39),c=e(56),S=e(52),u=e(92),l=e(74),d=e(117)("iterator"),m=!([].keys&&"next"in[].keys()),g="keys",h="values",y=function(){return this};t.exports=function(e,t,n,C,f,p,v){S(n,t,C);var A,E,T,_=function(e){if(!m&&e in R)return R[e];switch(e){case g:case h:return function(){return new n(this,e)}}return function(){return new n(this,e)}},I=t+" Iterator",b=f==h,O=!1,R=e.prototype,N=R[d]||R["@@iterator"]||f&&R[f],D=N||_(f),L=f?b?_("entries"):D:void 0,M="Array"==t&&R.entries||N;if(M&&(T=l(M.call(new e)))!==Object.prototype&&(u(T,I,!0),r||a(T,d)||i(T,d,y)),b&&N&&N.name!==h&&(O=!0,D=function(){return N.call(this)}),r&&!v||!m&&!O&&R[d]||i(R,d,D),c[t]=D,c[I]=y,f)if(A={values:b?D:_(h),keys:p?D:_(g),entries:L},v)for(E in A)E in R||s(R,E,A[E]);else o(o.P+o.F*(m||O),t,A);return A}},{117:117,32:32,39:39,40:40,52:52,56:56,58:58,74:74,87:87,92:92}],54:[function(e,t,n){var r=e(117)("iterator"),o=!1;try{var s=[7][r]();s.return=function(){o=!0},Array.from(s,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var s=[7],i=s[r]();i.next=function(){return{done:n=!0}},s[r]=function(){return i},e(s)}catch(e){}return n}},{117:117}],55:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],56:[function(e,t,n){t.exports={}},{}],57:[function(e,t,n){var r=e(76),o=e(107);t.exports=function(e,t){for(var n,s=o(e),i=r(s),a=i.length,c=0;a>c;)if(s[n=i[c++]]===t)return n}},{107:107,76:76}],58:[function(e,t,n){t.exports=!1},{}],59:[function(e,t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},{}],60:[function(e,t,n){t.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],61:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],62:[function(e,t,n){var r=e(114)("meta"),o=e(49),s=e(39),i=e(67).f,a=0,c=Object.isExtensible||function(){return!0},S=!e(34)((function(){return c(Object.preventExtensions({}))})),u=function(e){i(e,r,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!s(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return S&&l.NEED&&c(e)&&!s(e,r)&&u(e),e}}},{114:114,34:34,39:39,49:49,67:67}],63:[function(e,t,n){var r=e(149),o=e(32),s=e(94)("metadata"),i=s.store||(s.store=new(e(255))),a=function(e,t,n){var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}var s=o.get(t);if(!s){if(!n)return;o.set(t,s=new r)}return s};t.exports={store:i,map:a,has:function(e,t,n){var r=a(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=a(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){a(n,r,!0).set(e,t)},keys:function(e,t){var n=a(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){o(o.S,"Reflect",e)}}},{149:149,255:255,32:32,94:94}],64:[function(e,t,n){var r=e(38),o=e(104).set,s=r.MutationObserver||r.WebKitMutationObserver,i=r.process,a=r.Promise,c="process"==e(18)(i);t.exports=function(){var e,t,n,S=function(){var r,o;for(c&&(r=i.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){i.nextTick(S)};else if(s){var u=!0,l=document.createTextNode("");new s(S).observe(l,{characterData:!0}),n=function(){l.data=u=!u}}else if(a&&a.resolve){var d=a.resolve();n=function(){d.then(S)}}else n=function(){o.call(r,S)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},{104:104,18:18,38:38}],65:[function(e,t,n){"use strict";var r=e(76),o=e(73),s=e(77),i=e(109),a=e(45),c=Object.assign;t.exports=!c||e(34)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=i(e),c=arguments.length,S=1,u=o.f,l=s.f;c>S;)for(var d,m=a(arguments[S++]),g=u?r(m).concat(u(m)):r(m),h=g.length,y=0;h>y;)l.call(m,d=g[y++])&&(n[d]=m[d]);return n}:c},{109:109,34:34,45:45,73:73,76:76,77:77}],66:[function(e,t,n){var r=e(7),o=e(68),s=e(30),i=e(93)("IE_PROTO"),a=function(){},c="prototype",S=function(){var t,n=e(29)("iframe"),r=s.length;for(n.style.display="none",e(41).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),S=t.F;r--;)delete S[c][s[r]];return S()};t.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=r(e),n=new a,a[c]=null,n[i]=e):n=S(),void 0===t?n:o(n,t)}},{29:29,30:30,41:41,68:68,7:7,93:93}],67:[function(e,t,n){var r=e(7),o=e(42),s=e(110),i=Object.defineProperty;n.f=e(28)?Object.defineProperty:function(e,t,n){if(r(e),t=s(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{110:110,28:28,42:42,7:7}],68:[function(e,t,n){var r=e(67),o=e(7),s=e(76);t.exports=e(28)?Object.defineProperties:function(e,t){o(e);for(var n,i=s(t),a=i.length,c=0;a>c;)r.f(e,n=i[c++],t[n]);return e}},{28:28,67:67,7:7,76:76}],69:[function(e,t,n){t.exports=e(58)||!e(34)((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete e(38)[t]}))},{34:34,38:38,58:58}],70:[function(e,t,n){var r=e(77),o=e(85),s=e(107),i=e(110),a=e(39),c=e(42),S=Object.getOwnPropertyDescriptor;n.f=e(28)?S:function(e,t){if(e=s(e),t=i(t,!0),c)try{return S(e,t)}catch(e){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},{107:107,110:110,28:28,39:39,42:42,77:77,85:85}],71:[function(e,t,n){var r=e(107),o=e(72).f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return i&&"[object Window]"==s.call(e)?function(e){try{return o(e)}catch(e){return i.slice()}}(e):o(r(e))}},{107:107,72:72}],72:[function(e,t,n){var r=e(75),o=e(30).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{30:30,75:75}],73:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],74:[function(e,t,n){var r=e(39),o=e(109),s=e(93)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},{109:109,39:39,93:93}],75:[function(e,t,n){var r=e(39),o=e(107),s=e(11)(!1),i=e(93)("IE_PROTO");t.exports=function(e,t){var n,a=o(e),c=0,S=[];for(n in a)n!=i&&r(a,n)&&S.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~s(S,n)||S.push(n));return S}},{107:107,11:11,39:39,93:93}],76:[function(e,t,n){var r=e(75),o=e(30);t.exports=Object.keys||function(e){return r(e,o)}},{30:30,75:75}],77:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],78:[function(e,t,n){var r=e(32),o=e(23),s=e(34);t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*s((function(){n(1)})),"Object",i)}},{23:23,32:32,34:34}],79:[function(e,t,n){var r=e(76),o=e(107),s=e(77).f;t.exports=function(e){return function(t){for(var n,i=o(t),a=r(i),c=a.length,S=0,u=[];c>S;)s.call(i,n=a[S++])&&u.push(e?[n,i[n]]:i[n]);return u}}},{107:107,76:76,77:77}],80:[function(e,t,n){var r=e(72),o=e(73),s=e(7),i=e(38).Reflect;t.exports=i&&i.ownKeys||function(e){var t=r.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},{38:38,7:7,72:72,73:73}],81:[function(e,t,n){var r=e(38).parseFloat,o=e(102).trim;t.exports=1/r(e(103)+"-0")!=-1/0?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},{102:102,103:103,38:38}],82:[function(e,t,n){var r=e(38).parseInt,o=e(102).trim,s=e(103),i=/^[\-+]?0[xX]/;t.exports=8!==r(s+"08")||22!==r(s+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(i.test(n)?16:10))}:r},{102:102,103:103,38:38}],83:[function(e,t,n){"use strict";var r=e(84),o=e(44),s=e(3);t.exports=function(){for(var e=s(this),t=arguments.length,n=Array(t),i=0,a=r._,c=!1;t>i;)(n[i]=arguments[i++])===a&&(c=!0);return function(){var r,s=this,i=arguments.length,S=0,u=0;if(!c&&!i)return o(e,n,s);if(r=n.slice(),c)for(;t>S;S++)r[S]===a&&(r[S]=arguments[u++]);for(;i>u;)r.push(arguments[u++]);return o(e,r,s)}}},{3:3,44:44,84:84}],84:[function(e,t,n){t.exports=e(38)},{38:38}],85:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],86:[function(e,t,n){var r=e(87);t.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},{87:87}],87:[function(e,t,n){var r=e(38),o=e(40),s=e(39),i=e(114)("src"),a="toString",c=Function[a],S=(""+c).split(a);e(23).inspectSource=function(e){return c.call(e)},(t.exports=function(e,t,n,a){var c="function"==typeof n;c&&(s(n,"name")||o(n,"name",t)),e[t]!==n&&(c&&(s(n,i)||o(n,i,e[t]?""+e[t]:S.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[i]||c.call(this)}))},{114:114,23:23,38:38,39:39,40:40}],88:[function(e,t,n){t.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},{}],89:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],90:[function(e,t,n){var r=e(49),o=e(7),s=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=e(25)(Function.call,e(70).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(e){n=!0}return function(e,t){return s(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:s}},{25:25,49:49,7:7,70:70}],91:[function(e,t,n){"use strict";var r=e(38),o=e(67),s=e(28),i=e(117)("species");t.exports=function(e){var t=r[e];s&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},{117:117,28:28,38:38,67:67}],92:[function(e,t,n){var r=e(67).f,o=e(39),s=e(117)("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},{117:117,39:39,67:67}],93:[function(e,t,n){var r=e(94)("keys"),o=e(114);t.exports=function(e){return r[e]||(r[e]=o(e))}},{114:114,94:94}],94:[function(e,t,n){var r=e(38),o="__core-js_shared__",s=r[o]||(r[o]={});t.exports=function(e){return s[e]||(s[e]={})}},{38:38}],95:[function(e,t,n){var r=e(7),o=e(3),s=e(117)("species");t.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[s])?t:o(n)}},{117:117,3:3,7:7}],96:[function(e,t,n){var r=e(34);t.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},{34:34}],97:[function(e,t,n){var r=e(106),o=e(27);t.exports=function(e){return function(t,n){var s,i,a=String(o(t)),c=r(n),S=a.length;return c<0||c>=S?e?"":void 0:(s=a.charCodeAt(c))<55296||s>56319||c+1===S||(i=a.charCodeAt(c+1))<56320||i>57343?e?a.charAt(c):s:e?a.slice(c,c+2):i-56320+(s-55296<<10)+65536}}},{106:106,27:27}],98:[function(e,t,n){var r=e(50),o=e(27);t.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},{27:27,50:50}],99:[function(e,t,n){var r=e(32),o=e(34),s=e(27),i=/"/g,a=function(e,t,n,r){var o=String(s(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(r).replace(i,"&quot;")+'"'),a+">"+o+"</"+t+">"};t.exports=function(e,t){var n={};n[e]=t(a),r(r.P+r.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},{27:27,32:32,34:34}],100:[function(e,t,n){var r=e(108),o=e(101),s=e(27);t.exports=function(e,t,n,i){var a=String(s(e)),c=a.length,S=void 0===n?" ":String(n),u=r(t);if(u<=c||""==S)return a;var l=u-c,d=o.call(S,Math.ceil(l/S.length));return d.length>l&&(d=d.slice(0,l)),i?d+a:a+d}},{101:101,108:108,27:27}],101:[function(e,t,n){"use strict";var r=e(106),o=e(27);t.exports=function(e){var t=String(o(this)),n="",s=r(e);if(s<0||s==1/0)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},{106:106,27:27}],102:[function(e,t,n){var r=e(32),o=e(27),s=e(34),i=e(103),a="["+i+"]",c=RegExp("^"+a+a+"*"),S=RegExp(a+a+"*$"),u=function(e,t,n){var o={},a=s((function(){return!!i[e]()||"​"!="​"[e]()})),c=o[e]=a?t(l):i[e];n&&(o[n]=c),r(r.P+r.F*a,"String",o)},l=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(S,"")),e};t.exports=u},{103:103,27:27,32:32,34:34}],103:[function(e,t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],104:[function(e,t,n){var r,o,s,i=e(25),a=e(44),c=e(41),S=e(29),u=e(38),l=u.process,d=u.setImmediate,m=u.clearImmediate,g=u.MessageChannel,h=0,y={},C="onreadystatechange",f=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},p=function(e){f.call(e.data)};d&&m||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++h]=function(){a("function"==typeof e?e:Function(e),t)},r(h),h},m=function(e){delete y[e]},"process"==e(18)(l)?r=function(e){l.nextTick(i(f,e,1))}:g?(s=(o=new g).port2,o.port1.onmessage=p,r=i(s.postMessage,s,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",p,!1)):r=C in S("script")?function(e){c.appendChild(S("script"))[C]=function(){c.removeChild(this),f.call(e)}}:function(e){setTimeout(i(f,e,1),0)}),t.exports={set:d,clear:m}},{18:18,25:25,29:29,38:38,41:41,44:44}],105:[function(e,t,n){var r=e(106),o=Math.max,s=Math.min;t.exports=function(e,t){return(e=r(e))<0?o(e+t,0):s(e,t)}},{106:106}],106:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],107:[function(e,t,n){var r=e(45),o=e(27);t.exports=function(e){return r(o(e))}},{27:27,45:45}],108:[function(e,t,n){var r=e(106),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{106:106}],109:[function(e,t,n){var r=e(27);t.exports=function(e){return Object(r(e))}},{27:27}],110:[function(e,t,n){var r=e(49);t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{49:49}],111:[function(e,t,n){"use strict";if(e(28)){var r=e(58),o=e(38),s=e(34),i=e(32),a=e(113),c=e(112),S=e(25),u=e(6),l=e(85),d=e(40),m=e(86),g=e(106),h=e(108),y=e(105),C=e(110),f=e(39),p=e(89),v=e(17),A=e(49),E=e(109),T=e(46),_=e(66),I=e(74),b=e(72).f,O=e(118),R=e(114),N=e(117),D=e(12),L=e(11),M=e(95),w=e(130),B=e(56),P=e(54),k=e(91),U=e(9),K=e(8),G=e(67),x=e(70),F=G.f,V=x.f,Y=o.RangeError,$=o.TypeError,W=o.Uint8Array,j="ArrayBuffer",H="Shared"+j,q="BYTES_PER_ELEMENT",z="prototype",Q=Array[z],X=c.ArrayBuffer,J=c.DataView,Z=D(0),ee=D(2),te=D(3),ne=D(4),re=D(5),oe=D(6),se=L(!0),ie=L(!1),ae=w.values,ce=w.keys,Se=w.entries,ue=Q.lastIndexOf,le=Q.reduce,de=Q.reduceRight,me=Q.join,ge=Q.sort,he=Q.slice,ye=Q.toString,Ce=Q.toLocaleString,fe=N("iterator"),pe=N("toStringTag"),ve=R("typed_constructor"),Ae=R("def_constructor"),Ee=a.CONSTR,Te=a.TYPED,_e=a.VIEW,Ie="Wrong length!",be=D(1,(function(e,t){return Me(M(e,e[Ae]),t)})),Oe=s((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Re=!!W&&!!W[z].set&&s((function(){new W(1).set({})})),Ne=function(e,t){if(void 0===e)throw $(Ie);var n=+e,r=h(e);if(t&&!p(n,r))throw Y(Ie);return r},De=function(e,t){var n=g(e);if(n<0||n%t)throw Y("Wrong offset!");return n},Le=function(e){if(A(e)&&Te in e)return e;throw $(e+" is not a typed array!")},Me=function(e,t){if(!A(e)||!(ve in e))throw $("It is not a typed array constructor!");return new e(t)},we=function(e,t){return Be(M(e,e[Ae]),t)},Be=function(e,t){for(var n=0,r=t.length,o=Me(e,r);r>n;)o[n]=t[n++];return o},Pe=function(e,t,n){F(e,t,{get:function(){return this._d[n]}})},ke=function(e){var t,n,r,o,s,i,a=E(e),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,d=O(a);if(null!=d&&!T(d)){for(i=d.call(a),r=[],t=0;!(s=i.next()).done;t++)r.push(s.value);a=r}for(l&&c>2&&(u=S(u,arguments[2],2)),t=0,n=h(a.length),o=Me(this,n);n>t;t++)o[t]=l?u(a[t],t):a[t];return o},Ue=function(){for(var e=0,t=arguments.length,n=Me(this,t);t>e;)n[e]=arguments[e++];return n},Ke=!!W&&s((function(){Ce.call(new W(1))})),Ge=function(){return Ce.apply(Ke?he.call(Le(this)):Le(this),arguments)},xe={copyWithin:function(e,t){return K.call(Le(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Le(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return U.apply(Le(this),arguments)},filter:function(e){return we(this,ee(Le(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return re(Le(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return oe(Le(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Le(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ie(Le(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return se(Le(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return me.apply(Le(this),arguments)},lastIndexOf:function(e){return ue.apply(Le(this),arguments)},map:function(e){return be(Le(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return le.apply(Le(this),arguments)},reduceRight:function(e){return de.apply(Le(this),arguments)},reverse:function(){for(var e,t=this,n=Le(t).length,r=Math.floor(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t},some:function(e){return te(Le(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ge.call(Le(this),e)},subarray:function(e,t){var n=Le(this),r=n.length,o=y(e,r);return new(M(n,n[Ae]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,h((void 0===t?r:y(t,r))-o))}},Fe=function(e,t){return we(this,he.call(Le(this),e,t))},Ve=function(e){Le(this);var t=De(arguments[1],1),n=this.length,r=E(e),o=h(r.length),s=0;if(o+t>n)throw Y(Ie);for(;s<o;)this[t+s]=r[s++]},Ye={entries:function(){return Se.call(Le(this))},keys:function(){return ce.call(Le(this))},values:function(){return ae.call(Le(this))}},$e=function(e,t){return A(e)&&e[Te]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},We=function(e,t){return $e(e,t=C(t,!0))?l(2,e[t]):V(e,t)},je=function(e,t,n){return!($e(e,t=C(t,!0))&&A(n)&&f(n,"value"))||f(n,"get")||f(n,"set")||n.configurable||f(n,"writable")&&!n.writable||f(n,"enumerable")&&!n.enumerable?F(e,t,n):(e[t]=n.value,e)};Ee||(x.f=We,G.f=je),i(i.S+i.F*!Ee,"Object",{getOwnPropertyDescriptor:We,defineProperty:je}),s((function(){ye.call({})}))&&(ye=Ce=function(){return me.call(this)});var He=m({},xe);m(He,Ye),d(He,fe,Ye.values),m(He,{slice:Fe,set:Ve,constructor:function(){},toString:ye,toLocaleString:Ge}),Pe(He,"buffer","b"),Pe(He,"byteOffset","o"),Pe(He,"byteLength","l"),Pe(He,"length","e"),F(He,pe,{get:function(){return this[Te]}}),t.exports=function(e,t,n,c){var S=e+((c=!!c)?"Clamped":"")+"Array",l="Uint8Array"!=S,m="get"+e,g="set"+e,y=o[S],C=y||{},f=y&&I(y),p=!y||!a.ABV,E={},T=y&&y[z],O=function(e,n){var r=e._d;return r.v[m](n*t+r.o,Oe)},R=function(e,n,r){var o=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[g](n*t+o.o,r,Oe)},N=function(e,t){F(e,t,{get:function(){return O(this,t)},set:function(e){return R(this,t,e)},enumerable:!0})};p?(y=n((function(e,n,r,o){u(e,y,S,"_d");var s,i,a,c,l=0,m=0;if(A(n)){if(!(n instanceof X||(c=v(n))==j||c==H))return Te in n?Be(y,n):ke.call(y,n);s=n,m=De(r,t);var g=n.byteLength;if(void 0===o){if(g%t)throw Y(Ie);if((i=g-m)<0)throw Y(Ie)}else if((i=h(o)*t)+m>g)throw Y(Ie);a=i/t}else a=Ne(n,!0),s=new X(i=a*t);for(d(e,"_d",{b:s,o:m,l:i,e:a,v:new J(s)});l<a;)N(e,l++)})),T=y[z]=_(He),d(T,"constructor",y)):P((function(e){new y(null),new y(e)}),!0)||(y=n((function(e,n,r,o){var s;return u(e,y,S),A(n)?n instanceof X||(s=v(n))==j||s==H?void 0!==o?new C(n,De(r,t),o):void 0!==r?new C(n,De(r,t)):new C(n):Te in n?Be(y,n):ke.call(y,n):new C(Ne(n,l))})),Z(f!==Function.prototype?b(C).concat(b(f)):b(C),(function(e){e in y||d(y,e,C[e])})),y[z]=T,r||(T.constructor=y));var D=T[fe],L=!!D&&("values"==D.name||null==D.name),M=Ye.values;d(y,ve,!0),d(T,Te,S),d(T,_e,!0),d(T,Ae,y),(c?new y(1)[pe]==S:pe in T)||F(T,pe,{get:function(){return S}}),E[S]=y,i(i.G+i.W+i.F*(y!=C),E),i(i.S,S,{BYTES_PER_ELEMENT:t,from:ke,of:Ue}),q in T||d(T,q,t),i(i.P,S,xe),k(S),i(i.P+i.F*Re,S,{set:Ve}),i(i.P+i.F*!L,S,Ye),i(i.P+i.F*(T.toString!=ye),S,{toString:ye}),i(i.P+i.F*s((function(){new y(1).slice()})),S,{slice:Fe}),i(i.P+i.F*(s((function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()}))||!s((function(){T.toLocaleString.call([1,2])}))),S,{toLocaleString:Ge}),B[S]=L?D:M,r||L||d(T,fe,M)}}else t.exports=function(){}},{105:105,106:106,108:108,109:109,11:11,110:110,112:112,113:113,114:114,117:117,118:118,12:12,130:130,17:17,25:25,28:28,32:32,34:34,38:38,39:39,40:40,46:46,49:49,54:54,56:56,58:58,6:6,66:66,67:67,70:70,72:72,74:74,8:8,85:85,86:86,89:89,9:9,91:91,95:95}],112:[function(e,t,n){"use strict";var r=e(38),o=e(28),s=e(58),i=e(113),a=e(40),c=e(86),S=e(34),u=e(6),l=e(106),d=e(108),m=e(72).f,g=e(67).f,h=e(9),y=e(92),C="ArrayBuffer",f="DataView",p="prototype",v="Wrong length!",A="Wrong index!",E=r[C],T=r[f],_=r.Math,I=r.RangeError,b=r.Infinity,O=E,R=_.abs,N=_.pow,D=_.floor,L=_.log,M=_.LN2,w="buffer",B="byteLength",P="byteOffset",k=o?"_b":w,U=o?"_l":B,K=o?"_o":P,G=function(e,t,n){var r,o,s,i=Array(n),a=8*n-t-1,c=(1<<a)-1,S=c>>1,u=23===t?N(2,-24)-N(2,-77):0,l=0,d=e<0||0===e&&1/e<0?1:0;for((e=R(e))!=e||e===b?(o=e!=e?1:0,r=c):(r=D(L(e)/M),e*(s=N(2,-r))<1&&(r--,s*=2),(e+=r+S>=1?u/s:u*N(2,1-S))*s>=2&&(r++,s/=2),r+S>=c?(o=0,r=c):r+S>=1?(o=(e*s-1)*N(2,t),r+=S):(o=e*N(2,S-1)*N(2,t),r=0));t>=8;i[l++]=255&o,o/=256,t-=8);for(r=r<<t|o,a+=t;a>0;i[l++]=255&r,r/=256,a-=8);return i[--l]|=128*d,i},x=function(e,t,n){var r,o=8*n-t-1,s=(1<<o)-1,i=s>>1,a=o-7,c=n-1,S=e[c--],u=127&S;for(S>>=7;a>0;u=256*u+e[c],c--,a-=8);for(r=u&(1<<-a)-1,u>>=-a,a+=t;a>0;r=256*r+e[c],c--,a-=8);if(0===u)u=1-i;else{if(u===s)return r?NaN:S?-b:b;r+=N(2,t),u-=i}return(S?-1:1)*r*N(2,u-t)},F=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},$=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return G(e,52,8)},j=function(e){return G(e,23,4)},H=function(e,t,n){g(e[p],t,{get:function(){return this[n]}})},q=function(e,t,n,r){var o=+n,s=l(o);if(o!=s||s<0||s+t>e[U])throw I(A);var i=e[k]._b,a=s+e[K],c=i.slice(a,a+t);return r?c:c.reverse()},z=function(e,t,n,r,o,s){var i=+n,a=l(i);if(i!=a||a<0||a+t>e[U])throw I(A);for(var c=e[k]._b,S=a+e[K],u=r(+o),d=0;d<t;d++)c[S+d]=u[s?d:t-d-1]},Q=function(e,t){u(e,E,C);var n=+t,r=d(n);if(n!=r)throw I(v);return r};if(i.ABV){if(!S((function(){new E}))||!S((function(){new E(.5)}))){E=function(e){return new O(Q(this,e))};for(var X,J=E[p]=O[p],Z=m(O),ee=0;Z.length>ee;)(X=Z[ee++])in E||a(E,X,O[X]);s||(J.constructor=E)}var te=new T(new E(2)),ne=T[p].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(T[p],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else E=function(e){var t=Q(this,e);this._b=h.call(Array(t),0),this[U]=t},T=function(e,t,n){u(this,T,f),u(e,E,f);var r=e[U],o=l(t);if(o<0||o>r)throw I("Wrong offset!");if(o+(n=void 0===n?r-o:d(n))>r)throw I(v);this[k]=e,this[K]=o,this[U]=n},o&&(H(E,B,"_l"),H(T,w,"_b"),H(T,B,"_l"),H(T,P,"_o")),c(T[p],{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e){var t=q(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=q(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return F(q(this,4,e,arguments[1]))},getUint32:function(e){return F(q(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return x(q(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return x(q(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){z(this,1,e,V,t)},setUint8:function(e,t){z(this,1,e,V,t)},setInt16:function(e,t){z(this,2,e,Y,t,arguments[2])},setUint16:function(e,t){z(this,2,e,Y,t,arguments[2])},setInt32:function(e,t){z(this,4,e,$,t,arguments[2])},setUint32:function(e,t){z(this,4,e,$,t,arguments[2])},setFloat32:function(e,t){z(this,4,e,j,t,arguments[2])},setFloat64:function(e,t){z(this,8,e,W,t,arguments[2])}});y(E,C),y(T,f),a(T[p],i.VIEW,!0),n[C]=E,n[f]=T},{106:106,108:108,113:113,28:28,34:34,38:38,40:40,58:58,6:6,67:67,72:72,86:86,9:9,92:92}],113:[function(e,t,n){for(var r,o=e(38),s=e(40),i=e(114),a=i("typed_array"),c=i("view"),S=!(!o.ArrayBuffer||!o.DataView),u=S,l=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(r=o[d[l++]])?(s(r.prototype,a,!0),s(r.prototype,c,!0)):u=!1;t.exports={ABV:S,CONSTR:u,TYPED:a,VIEW:c}},{114:114,38:38,40:40}],114:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],115:[function(e,t,n){var r=e(38),o=e(23),s=e(58),i=e(116),a=e(67).f;t.exports=function(e){var t=o.Symbol||(o.Symbol=s?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:i.f(e)})}},{116:116,23:23,38:38,58:58,67:67}],116:[function(e,t,n){n.f=e(117)},{117:117}],117:[function(e,t,n){var r=e(94)("wks"),o=e(114),s=e(38).Symbol,i="function"==typeof s,a=t.exports=function(e){return r[e]||(r[e]=i&&s[e]||(i?s:o)("Symbol."+e))};a.store=r},{114:114,38:38,94:94}],118:[function(e,t,n){var r=e(17),o=e(117)("iterator"),s=e(56);t.exports=e(23).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||s[r(e)]}},{117:117,17:17,23:23,56:56}],119:[function(e,t,n){var r=e(32),o=e(88)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return o(e)}})},{32:32,88:88}],120:[function(e,t,n){var r=e(32);r(r.P,"Array",{copyWithin:e(8)}),e(5)("copyWithin")},{32:32,5:5,8:8}],121:[function(e,t,n){"use strict";var r=e(32),o=e(12)(4);r(r.P+r.F*!e(96)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},{12:12,32:32,96:96}],122:[function(e,t,n){var r=e(32);r(r.P,"Array",{fill:e(9)}),e(5)("fill")},{32:32,5:5,9:9}],123:[function(e,t,n){"use strict";var r=e(32),o=e(12)(2);r(r.P+r.F*!e(96)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},{12:12,32:32,96:96}],124:[function(e,t,n){"use strict";var r=e(32),o=e(12)(6),s="findIndex",i=!0;s in[]&&Array(1)[s]((function(){i=!1})),r(r.P+r.F*i,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e(5)(s)},{12:12,32:32,5:5}],125:[function(e,t,n){"use strict";var r=e(32),o=e(12)(5),s="find",i=!0;s in[]&&Array(1)[s]((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e(5)(s)},{12:12,32:32,5:5}],126:[function(e,t,n){"use strict";var r=e(32),o=e(12)(0),s=e(96)([].forEach,!0);r(r.P+r.F*!s,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},{12:12,32:32,96:96}],127:[function(e,t,n){"use strict";var r=e(25),o=e(32),s=e(109),i=e(51),a=e(46),c=e(108),S=e(24),u=e(118);o(o.S+o.F*!e(54)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,l,d=s(e),m="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,y=void 0!==h,C=0,f=u(d);if(y&&(h=r(h,g>2?arguments[2]:void 0,2)),null==f||m==Array&&a(f))for(n=new m(t=c(d.length));t>C;C++)S(n,C,y?h(d[C],C):d[C]);else for(l=f.call(d),n=new m;!(o=l.next()).done;C++)S(n,C,y?i(l,h,[o.value,C],!0):o.value);return n.length=C,n}})},{108:108,109:109,118:118,24:24,25:25,32:32,46:46,51:51,54:54}],128:[function(e,t,n){"use strict";var r=e(32),o=e(11)(!1),s=[].indexOf,i=!!s&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(i||!e(96)(s)),"Array",{indexOf:function(e){return i?s.apply(this,arguments)||0:o(this,e,arguments[1])}})},{11:11,32:32,96:96}],129:[function(e,t,n){var r=e(32);r(r.S,"Array",{isArray:e(47)})},{32:32,47:47}],130:[function(e,t,n){"use strict";var r=e(5),o=e(55),s=e(56),i=e(107);t.exports=e(53)(Array,"Array",(function(e,t){this._t=i(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),s.Arguments=s.Array,r("keys"),r("values"),r("entries")},{107:107,5:5,53:53,55:55,56:56}],131:[function(e,t,n){"use strict";var r=e(32),o=e(107),s=[].join;r(r.P+r.F*(e(45)!=Object||!e(96)(s)),"Array",{join:function(e){return s.call(o(this),void 0===e?",":e)}})},{107:107,32:32,45:45,96:96}],132:[function(e,t,n){"use strict";var r=e(32),o=e(107),s=e(106),i=e(108),a=[].lastIndexOf,c=!!a&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!e(96)(a)),"Array",{lastIndexOf:function(e){if(c)return a.apply(this,arguments)||0;var t=o(this),n=i(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,s(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},{106:106,107:107,108:108,32:32,96:96}],133:[function(e,t,n){"use strict";var r=e(32),o=e(12)(1);r(r.P+r.F*!e(96)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},{12:12,32:32,96:96}],134:[function(e,t,n){"use strict";var r=e(32),o=e(24);r(r.S+r.F*e(34)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},{24:24,32:32,34:34}],135:[function(e,t,n){"use strict";var r=e(32),o=e(13);r(r.P+r.F*!e(96)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},{13:13,32:32,96:96}],136:[function(e,t,n){"use strict";var r=e(32),o=e(13);r(r.P+r.F*!e(96)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},{13:13,32:32,96:96}],137:[function(e,t,n){"use strict";var r=e(32),o=e(41),s=e(18),i=e(105),a=e(108),c=[].slice;r(r.P+r.F*e(34)((function(){o&&c.call(o)})),"Array",{slice:function(e,t){var n=a(this.length),r=s(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var o=i(e,n),S=i(t,n),u=a(S-o),l=Array(u),d=0;d<u;d++)l[d]="String"==r?this.charAt(o+d):this[o+d];return l}})},{105:105,108:108,18:18,32:32,34:34,41:41}],138:[function(e,t,n){"use strict";var r=e(32),o=e(12)(3);r(r.P+r.F*!e(96)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},{12:12,32:32,96:96}],139:[function(e,t,n){"use strict";var r=e(32),o=e(3),s=e(109),i=e(34),a=[].sort,c=[1,2,3];r(r.P+r.F*(i((function(){c.sort(void 0)}))||!i((function(){c.sort(null)}))||!e(96)(a)),"Array",{sort:function(e){return void 0===e?a.call(s(this)):a.call(s(this),o(e))}})},{109:109,3:3,32:32,34:34,96:96}],140:[function(e,t,n){e(91)("Array")},{91:91}],141:[function(e,t,n){var r=e(32);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},{32:32}],142:[function(e,t,n){"use strict";var r=e(32),o=e(34),s=Date.prototype.getTime,i=function(e){return e>9?e:"0"+e};r(r.P+r.F*(o((function(){return"0385-07-25T07:06:39.999Z"!=new Date(-50000000000001).toISOString()}))||!o((function(){new Date(NaN).toISOString()}))),"Date",{toISOString:function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(n>99?n:"0"+i(n))+"Z"}})},{32:32,34:34}],143:[function(e,t,n){"use strict";var r=e(32),o=e(109),s=e(110);r(r.P+r.F*e(34)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=o(this),n=s(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},{109:109,110:110,32:32,34:34}],144:[function(e,t,n){var r=e(117)("toPrimitive"),o=Date.prototype;r in o||e(40)(o,r,e(26))},{117:117,26:26,40:40}],145:[function(e,t,n){var r=Date.prototype,o="Invalid Date",s="toString",i=r[s],a=r.getTime;new Date(NaN)+""!=o&&e(87)(r,s,(function(){var e=a.call(this);return e==e?i.call(this):o}))},{87:87}],146:[function(e,t,n){var r=e(32);r(r.P,"Function",{bind:e(16)})},{16:16,32:32}],147:[function(e,t,n){"use strict";var r=e(49),o=e(74),s=e(117)("hasInstance"),i=Function.prototype;s in i||e(67).f(i,s,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},{117:117,49:49,67:67,74:74}],148:[function(e,t,n){var r=e(67).f,o=e(85),s=e(39),i=Function.prototype,a=/^\s*function ([^ (]*)/,c="name",S=Object.isExtensible||function(){return!0};c in i||e(28)&&r(i,c,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(a)[1];return s(e,c)||!S(e)||r(e,c,o(5,t)),t}catch(e){return""}}})},{28:28,39:39,67:67,85:85}],149:[function(e,t,n){"use strict";var r=e(19);t.exports=e(22)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},{19:19,22:22}],150:[function(e,t,n){var r=e(32),o=e(60),s=Math.sqrt,i=Math.acosh;r(r.S+r.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+s(e-1)*s(e+1))}})},{32:32,60:60}],151:[function(e,t,n){var r=e(32),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{32:32}],152:[function(e,t,n){var r=e(32),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{32:32}],153:[function(e,t,n){var r=e(32),o=e(61);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},{32:32,61:61}],154:[function(e,t,n){var r=e(32);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{32:32}],155:[function(e,t,n){var r=e(32),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},{32:32}],156:[function(e,t,n){var r=e(32),o=e(59);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},{32:32,59:59}],157:[function(e,t,n){var r=e(32),o=e(61),s=Math.pow,i=s(2,-52),a=s(2,-23),c=s(2,127)*(2-a),S=s(2,-126);r(r.S,"Math",{fround:function(e){var t,n,r=Math.abs(e),s=o(e);return r<S?s*function(e){return e+1/i-1/i}(r/S/a)*S*a:(n=(t=(1+a/i)*r)-(t-r))>c||n!=n?s*(1/0):s*n}})},{32:32,61:61}],158:[function(e,t,n){var r=e(32),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,s=0,i=0,a=arguments.length,c=0;i<a;)c<(n=o(arguments[i++]))?(s=s*(r=c/n)*r+1,c=n):s+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(s)}})},{32:32}],159:[function(e,t,n){var r=e(32),o=Math.imul;r(r.S+r.F*e(34)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(e,t){var n=65535,r=+e,o=+t,s=n&r,i=n&o;return 0|s*i+((n&r>>>16)*i+s*(n&o>>>16)<<16>>>0)}})},{32:32,34:34}],160:[function(e,t,n){var r=e(32);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},{32:32}],161:[function(e,t,n){var r=e(32);r(r.S,"Math",{log1p:e(60)})},{32:32,60:60}],162:[function(e,t,n){var r=e(32);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{32:32}],163:[function(e,t,n){var r=e(32);r(r.S,"Math",{sign:e(61)})},{32:32,61:61}],164:[function(e,t,n){var r=e(32),o=e(59),s=Math.exp;r(r.S+r.F*e(34)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(s(e-1)-s(-e-1))*(Math.E/2)}})},{32:32,34:34,59:59}],165:[function(e,t,n){var r=e(32),o=e(59),s=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(s(e)+s(-e))}})},{32:32,59:59}],166:[function(e,t,n){var r=e(32);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},{32:32}],167:[function(e,t,n){"use strict";var r=e(38),o=e(39),s=e(18),i=e(43),a=e(110),c=e(34),S=e(72).f,u=e(70).f,l=e(67).f,d=e(102).trim,m="Number",g=r[m],h=g,y=g.prototype,C=s(e(66)(y))==m,f="trim"in String.prototype,p=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){var n,r,o,s=(t=f?t.trim():d(t,3)).charCodeAt(0);if(43===s||45===s){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var i,c=t.slice(2),S=0,u=c.length;S<u;S++)if((i=c.charCodeAt(S))<48||i>o)return NaN;return parseInt(c,r)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof g&&(C?c((function(){y.valueOf.call(n)})):s(n)!=m)?i(new h(p(t)),n,g):p(t)};for(var v,A=e(28)?S(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;A.length>E;E++)o(h,v=A[E])&&!o(g,v)&&l(g,v,u(h,v));g.prototype=y,y.constructor=g,e(87)(r,m,g)}},{102:102,110:110,18:18,28:28,34:34,38:38,39:39,43:43,66:66,67:67,70:70,72:72,87:87}],168:[function(e,t,n){var r=e(32);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},{32:32}],169:[function(e,t,n){var r=e(32),o=e(38).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},{32:32,38:38}],170:[function(e,t,n){var r=e(32);r(r.S,"Number",{isInteger:e(48)})},{32:32,48:48}],171:[function(e,t,n){var r=e(32);r(r.S,"Number",{isNaN:function(e){return e!=e}})},{32:32}],172:[function(e,t,n){var r=e(32),o=e(48),s=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&s(e)<=9007199254740991}})},{32:32,48:48}],173:[function(e,t,n){var r=e(32);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{32:32}],174:[function(e,t,n){var r=e(32);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{32:32}],175:[function(e,t,n){var r=e(32),o=e(81);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},{32:32,81:81}],176:[function(e,t,n){var r=e(32),o=e(82);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},{32:32,82:82}],177:[function(e,t,n){"use strict";var r=e(32),o=e(106),s=e(4),i=e(101),a=1..toFixed,c=Math.floor,S=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",l="0",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*S[n],S[n]=r%1e7,r=c(r/1e7)},m=function(e){for(var t=6,n=0;--t>=0;)n+=S[t],S[t]=c(n/e),n=n%e*1e7},g=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==S[e]){var n=String(S[e]);t=""===t?n:t+i.call(l,7-n.length)+n}return t},h=function(e,t,n){return 0===t?n:t%2==1?h(e,t-1,n*e):h(e*e,t/2,n)};r(r.P+r.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e(34)((function(){a.call({})}))),"Number",{toFixed:function(e){var t,n,r,a,c=s(this,u),S=o(e),y="",C=l;if(S<0||S>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(y="-",c=-c),c>1e-21)if(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*h(2,69,1))-69,n=t<0?c*h(2,-t,1):c/h(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=S;r>=7;)d(1e7,0),r-=7;for(d(h(10,r,1),0),r=t-1;r>=23;)m(1<<23),r-=23;m(1<<r),d(1,1),m(2),C=g()}else d(0,n),d(1<<-t,0),C=g()+i.call(l,S);return C=S>0?y+((a=C.length)<=S?"0."+i.call(l,S-a)+C:C.slice(0,a-S)+"."+C.slice(a-S)):y+C}})},{101:101,106:106,32:32,34:34,4:4}],178:[function(e,t,n){"use strict";var r=e(32),o=e(34),s=e(4),i=1..toPrecision;r(r.P+r.F*(o((function(){return"1"!==i.call(1,void 0)}))||!o((function(){i.call({})}))),"Number",{toPrecision:function(e){var t=s(this,"Number#toPrecision: incorrect invocation!");return void 0===e?i.call(t):i.call(t,e)}})},{32:32,34:34,4:4}],179:[function(e,t,n){var r=e(32);r(r.S+r.F,"Object",{assign:e(65)})},{32:32,65:65}],180:[function(e,t,n){var r=e(32);r(r.S,"Object",{create:e(66)})},{32:32,66:66}],181:[function(e,t,n){var r=e(32);r(r.S+r.F*!e(28),"Object",{defineProperties:e(68)})},{28:28,32:32,68:68}],182:[function(e,t,n){var r=e(32);r(r.S+r.F*!e(28),"Object",{defineProperty:e(67).f})},{28:28,32:32,67:67}],183:[function(e,t,n){var r=e(49),o=e(62).onFreeze;e(78)("freeze",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},{49:49,62:62,78:78}],184:[function(e,t,n){var r=e(107),o=e(70).f;e(78)("getOwnPropertyDescriptor",(function(){return function(e,t){return o(r(e),t)}}))},{107:107,70:70,78:78}],185:[function(e,t,n){e(78)("getOwnPropertyNames",(function(){return e(71).f}))},{71:71,78:78}],186:[function(e,t,n){var r=e(109),o=e(74);e(78)("getPrototypeOf",(function(){return function(e){return o(r(e))}}))},{109:109,74:74,78:78}],187:[function(e,t,n){var r=e(49);e(78)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},{49:49,78:78}],188:[function(e,t,n){var r=e(49);e(78)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},{49:49,78:78}],189:[function(e,t,n){var r=e(49);e(78)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},{49:49,78:78}],190:[function(e,t,n){var r=e(32);r(r.S,"Object",{is:e(89)})},{32:32,89:89}],191:[function(e,t,n){var r=e(109),o=e(76);e(78)("keys",(function(){return function(e){return o(r(e))}}))},{109:109,76:76,78:78}],192:[function(e,t,n){var r=e(49),o=e(62).onFreeze;e(78)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},{49:49,62:62,78:78}],193:[function(e,t,n){var r=e(49),o=e(62).onFreeze;e(78)("seal",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},{49:49,62:62,78:78}],194:[function(e,t,n){var r=e(32);r(r.S,"Object",{setPrototypeOf:e(90).set})},{32:32,90:90}],195:[function(e,t,n){"use strict";var r=e(17),o={};o[e(117)("toStringTag")]="z",o+""!="[object z]"&&e(87)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},{117:117,17:17,87:87}],196:[function(e,t,n){var r=e(32),o=e(81);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},{32:32,81:81}],197:[function(e,t,n){var r=e(32),o=e(82);r(r.G+r.F*(parseInt!=o),{parseInt:o})},{32:32,82:82}],198:[function(e,t,n){"use strict";var r,o,s,i=e(58),a=e(38),c=e(25),S=e(17),u=e(32),l=e(49),d=e(3),m=e(6),g=e(37),h=e(95),y=e(104).set,C=e(64)(),f="Promise",p=a.TypeError,v=a.process,A=a[f],E="process"==S(v=a.process),T=function(){},_=!!function(){try{var t=A.resolve(1),n=(t.constructor={})[e(117)("species")]=function(e){e(T,T)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof n}catch(e){}}(),I=function(e,t){return e===t||e===A&&t===s},b=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},O=function(e){return I(A,e)?new R(e):new o(e)},R=o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw p("Bad Promise constructor");t=e,n=r})),this.resolve=d(t),this.reject=d(n)},N=function(e){try{e()}catch(e){return{error:e}}},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;C((function(){for(var r=e._v,o=1==e._s,s=0,i=function(t){var n,s,i=o?t.ok:t.fail,a=t.resolve,c=t.reject,S=t.domain;try{i?(o||(2==e._h&&w(e),e._h=1),!0===i?n=r:(S&&S.enter(),n=i(r),S&&S.exit()),n===t.promise?c(p("Promise-chain cycle")):(s=b(n))?s.call(n,a,c):a(n)):c(r)}catch(e){c(e)}};n.length>s;)i(n[s++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){y.call(a,(function(){var t,n,r,o=e._v;if(M(e)&&(t=N((function(){E?v.emit("unhandledRejection",o,e):(n=a.onunhandledrejection)?n({promise:e,reason:o}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=E||M(e)?2:1),e._a=void 0,t)throw t.error}))},M=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if((t=n[r++]).fail||!M(t.promise))return!1;return!0},w=function(e){y.call(a,(function(){var t;E?v.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},P=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw p("Promise can't be resolved itself");(t=b(e))?C((function(){var r={_w:n,_d:!1};try{t.call(e,c(P,r,1),c(B,r,1))}catch(e){B.call(r,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};_||(A=function(e){m(this,A,f,"_h"),d(e),r.call(this);try{e(c(P,this,1),c(B,this,1))}catch(e){B.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e(86)(A.prototype,{then:function(e,t){var n=O(h(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=E?v.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),R=function(){var e=new r;this.promise=e,this.resolve=c(P,e,1),this.reject=c(B,e,1)}),u(u.G+u.W+u.F*!_,{Promise:A}),e(92)(A,f),e(91)(f),s=e(23)[f],u(u.S+u.F*!_,f,{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(i||!_),f,{resolve:function(e){if(e instanceof A&&I(e.constructor,this))return e;var t=O(this);return(0,t.resolve)(e),t.promise}}),u(u.S+u.F*!(_&&e(54)((function(e){A.all(e).catch(T)}))),f,{all:function(e){var t=this,n=O(t),r=n.resolve,o=n.reject,s=N((function(){var n=[],s=0,i=1;g(e,!1,(function(e){var a=s++,c=!1;n.push(void 0),i++,t.resolve(e).then((function(e){c||(c=!0,n[a]=e,--i||r(n))}),o)})),--i||r(n)}));return s&&o(s.error),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,o=N((function(){g(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o&&r(o.error),n.promise}})},{104:104,117:117,17:17,23:23,25:25,3:3,32:32,37:37,38:38,49:49,54:54,58:58,6:6,64:64,86:86,91:91,92:92,95:95}],199:[function(e,t,n){var r=e(32),o=e(3),s=e(7),i=(e(38).Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!e(34)((function(){i((function(){}))})),"Reflect",{apply:function(e,t,n){var r=o(e),c=s(n);return i?i(r,t,c):a.call(r,t,c)}})},{3:3,32:32,34:34,38:38,7:7}],200:[function(e,t,n){var r=e(32),o=e(66),s=e(3),i=e(7),a=e(49),c=e(34),S=e(16),u=(e(38).Reflect||{}).construct,l=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),d=!c((function(){u((function(){}))}));r(r.S+r.F*(l||d),"Reflect",{construct:function(e,t){s(e),i(t);var n=arguments.length<3?e:s(arguments[2]);if(d&&!l)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(S.apply(e,r))}var c=n.prototype,m=o(a(c)?c:Object.prototype),g=Function.apply.call(e,m,t);return a(g)?g:m}})},{16:16,3:3,32:32,34:34,38:38,49:49,66:66,7:7}],201:[function(e,t,n){var r=e(67),o=e(32),s=e(7),i=e(110);o(o.S+o.F*e(34)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){s(e),t=i(t,!0),s(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},{110:110,32:32,34:34,67:67,7:7}],202:[function(e,t,n){var r=e(32),o=e(70).f,s=e(7);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(s(e),t);return!(n&&!n.configurable)&&delete e[t]}})},{32:32,7:7,70:70}],203:[function(e,t,n){"use strict";var r=e(32),o=e(7),s=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};e(52)(s,"Object",(function(){var e,t=this,n=t._k;do{if(t._i>=n.length)return{value:void 0,done:!0}}while(!((e=n[t._i++])in t._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new s(e)}})},{32:32,52:52,7:7}],204:[function(e,t,n){var r=e(70),o=e(32),s=e(7);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(s(e),t)}})},{32:32,7:7,70:70}],205:[function(e,t,n){var r=e(32),o=e(74),s=e(7);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(s(e))}})},{32:32,7:7,74:74}],206:[function(e,t,n){var r=e(70),o=e(74),s=e(39),i=e(32),a=e(49),c=e(7);i(i.S,"Reflect",{get:function e(t,n){var i,S,u=arguments.length<3?t:arguments[2];return c(t)===u?t[n]:(i=r.f(t,n))?s(i,"value")?i.value:void 0!==i.get?i.get.call(u):void 0:a(S=o(t))?e(S,n,u):void 0}})},{32:32,39:39,49:49,7:7,70:70,74:74}],207:[function(e,t,n){var r=e(32);r(r.S,"Reflect",{has:function(e,t){return t in e}})},{32:32}],208:[function(e,t,n){var r=e(32),o=e(7),s=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!s||s(e)}})},{32:32,7:7}],209:[function(e,t,n){var r=e(32);r(r.S,"Reflect",{ownKeys:e(80)})},{32:32,80:80}],210:[function(e,t,n){var r=e(32),o=e(7),s=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return s&&s(e),!0}catch(e){return!1}}})},{32:32,7:7}],211:[function(e,t,n){var r=e(32),o=e(90);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},{32:32,90:90}],212:[function(e,t,n){var r=e(67),o=e(70),s=e(74),i=e(39),a=e(32),c=e(85),S=e(7),u=e(49);a(a.S,"Reflect",{set:function e(t,n,a){var l,d,m=arguments.length<4?t:arguments[3],g=o.f(S(t),n);if(!g){if(u(d=s(t)))return e(d,n,a,m);g=c(0)}return i(g,"value")?!(!1===g.writable||!u(m)||(l=o.f(m,n)||c(0),l.value=a,r.f(m,n,l),0)):void 0!==g.set&&(g.set.call(m,a),!0)}})},{32:32,39:39,49:49,67:67,7:7,70:70,74:74,85:85}],213:[function(e,t,n){var r=e(38),o=e(43),s=e(67).f,i=e(72).f,a=e(50),c=e(36),S=r.RegExp,u=S,l=S.prototype,d=/a/g,m=/a/g,g=new S(d)!==d;if(e(28)&&(!g||e(34)((function(){return m[e(117)("match")]=!1,S(d)!=d||S(m)==m||"/a/i"!=S(d,"i")})))){S=function(e,t){var n=this instanceof S,r=a(e),s=void 0===t;return!n&&r&&e.constructor===S&&s?e:o(g?new u(r&&!s?e.source:e,t):u((r=e instanceof S)?e.source:e,r&&s?c.call(e):t),n?this:l,S)};for(var h=function(e){e in S||s(S,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},y=i(u),C=0;y.length>C;)h(y[C++]);l.constructor=S,S.prototype=l,e(87)(r,"RegExp",S)}e(91)("RegExp")},{117:117,28:28,34:34,36:36,38:38,43:43,50:50,67:67,72:72,87:87,91:91}],214:[function(e,t,n){e(28)&&"g"!=/./g.flags&&e(67).f(RegExp.prototype,"flags",{configurable:!0,get:e(36)})},{28:28,36:36,67:67}],215:[function(e,t,n){e(35)("match",1,(function(e,t,n){return[function(n){"use strict";var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]}))},{35:35}],216:[function(e,t,n){e(35)("replace",2,(function(e,t,n){return[function(r,o){"use strict";var s=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,s,o):n.call(String(s),r,o)},n]}))},{35:35}],217:[function(e,t,n){e(35)("search",1,(function(e,t,n){return[function(n){"use strict";var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]}))},{35:35}],218:[function(e,t,n){e(35)("split",2,(function(t,n,r){"use strict";var o=e(50),s=r,i=[].push,a="split",c="length",S="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[c]||2!="ab"[a](/(?:ab)*/)[c]||4!="."[a](/(.?)(.?)/)[c]||"."[a](/()()/)[c]>1||""[a](/.?/)[c]){var u=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return s.call(n,e,t);var r,a,l,d,m,g=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),y=0,C=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,h+"g");for(u||(r=new RegExp("^"+f.source+"$(?!\\s)",h));(a=f.exec(n))&&!((l=a.index+a[0][c])>y&&(g.push(n.slice(y,a.index)),!u&&a[c]>1&&a[0].replace(r,(function(){for(m=1;m<arguments[c]-2;m++)void 0===arguments[m]&&(a[m]=void 0)})),a[c]>1&&a.index<n[c]&&i.apply(g,a.slice(1)),d=a[0][c],y=l,g[c]>=C));)f[S]===a.index&&f[S]++;return y===n[c]?!d&&f.test("")||g.push(""):g.push(n.slice(y)),g[c]>C?g.slice(0,C):g}}else"0"[a](void 0,0)[c]&&(r=function(e,t){return void 0===e&&0===t?[]:s.call(this,e,t)});return[function(e,o){var s=t(this),i=null==e?void 0:e[n];return void 0!==i?i.call(e,s,o):r.call(String(s),e,o)},r]}))},{35:35,50:50}],219:[function(e,t,n){"use strict";e(214);var r=e(7),o=e(36),s=e(28),i="toString",a=/./[i],c=function(t){e(87)(RegExp.prototype,i,t,!0)};e(34)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)})):a.name!=i&&c((function(){return a.call(this)}))},{214:214,28:28,34:34,36:36,7:7,87:87}],220:[function(e,t,n){"use strict";var r=e(19);t.exports=e(22)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},{19:19,22:22}],221:[function(e,t,n){"use strict";e(99)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},{99:99}],222:[function(e,t,n){"use strict";e(99)("big",(function(e){return function(){return e(this,"big","","")}}))},{99:99}],223:[function(e,t,n){"use strict";e(99)("blink",(function(e){return function(){return e(this,"blink","","")}}))},{99:99}],224:[function(e,t,n){"use strict";e(99)("bold",(function(e){return function(){return e(this,"b","","")}}))},{99:99}],225:[function(e,t,n){"use strict";var r=e(32),o=e(97)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},{32:32,97:97}],226:[function(e,t,n){"use strict";var r=e(32),o=e(108),s=e(98),i="endsWith",a=""[i];r(r.P+r.F*e(33)(i),"String",{endsWith:function(e){var t=s(this,e,i),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),c=void 0===n?r:Math.min(o(n),r),S=String(e);return a?a.call(t,S,c):t.slice(c-S.length,c)===S}})},{108:108,32:32,33:33,98:98}],227:[function(e,t,n){"use strict";e(99)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},{99:99}],228:[function(e,t,n){"use strict";e(99)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},{99:99}],229:[function(e,t,n){"use strict";e(99)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},{99:99}],230:[function(e,t,n){var r=e(32),o=e(105),s=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?s(t):s(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},{105:105,32:32}],231:[function(e,t,n){"use strict";var r=e(32),o=e(98),s="includes";r(r.P+r.F*e(33)(s),"String",{includes:function(e){return!!~o(this,e,s).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{32:32,33:33,98:98}],232:[function(e,t,n){"use strict";e(99)("italics",(function(e){return function(){return e(this,"i","","")}}))},{99:99}],233:[function(e,t,n){"use strict";var r=e(97)(!0);e(53)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},{53:53,97:97}],234:[function(e,t,n){"use strict";e(99)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},{99:99}],235:[function(e,t,n){var r=e(32),o=e(107),s=e(108);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=s(t.length),r=arguments.length,i=[],a=0;n>a;)i.push(String(t[a++])),a<r&&i.push(String(arguments[a]));return i.join("")}})},{107:107,108:108,32:32}],236:[function(e,t,n){var r=e(32);r(r.P,"String",{repeat:e(101)})},{101:101,32:32}],237:[function(e,t,n){"use strict";e(99)("small",(function(e){return function(){return e(this,"small","","")}}))},{99:99}],238:[function(e,t,n){"use strict";var r=e(32),o=e(108),s=e(98),i="startsWith",a=""[i];r(r.P+r.F*e(33)(i),"String",{startsWith:function(e){var t=s(this,e,i),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},{108:108,32:32,33:33,98:98}],239:[function(e,t,n){"use strict";e(99)("strike",(function(e){return function(){return e(this,"strike","","")}}))},{99:99}],240:[function(e,t,n){"use strict";e(99)("sub",(function(e){return function(){return e(this,"sub","","")}}))},{99:99}],241:[function(e,t,n){"use strict";e(99)("sup",(function(e){return function(){return e(this,"sup","","")}}))},{99:99}],242:[function(e,t,n){"use strict";e(102)("trim",(function(e){return function(){return e(this,3)}}))},{102:102}],243:[function(e,t,n){"use strict";var r=e(38),o=e(39),s=e(28),i=e(32),a=e(87),c=e(62).KEY,S=e(34),u=e(94),l=e(92),d=e(114),m=e(117),g=e(116),h=e(115),y=e(57),C=e(31),f=e(47),p=e(7),v=e(107),A=e(110),E=e(85),T=e(66),_=e(71),I=e(70),b=e(67),O=e(76),R=I.f,N=b.f,D=_.f,L=r.Symbol,M=r.JSON,w=M&&M.stringify,B="prototype",P=m("_hidden"),k=m("toPrimitive"),U={}.propertyIsEnumerable,K=u("symbol-registry"),G=u("symbols"),x=u("op-symbols"),F=Object[B],V="function"==typeof L,Y=r.QObject,$=!Y||!Y[B]||!Y[B].findChild,W=s&&S((function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(F,t);r&&delete F[t],N(e,t,n),r&&e!==F&&N(F,t,r)}:N,j=function(e){var t=G[e]=T(L[B]);return t._k=e,t},H=V&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},q=function(e,t,n){return e===F&&q(x,t,n),p(e),t=A(t,!0),p(n),o(G,t)?(n.enumerable?(o(e,P)&&e[P][t]&&(e[P][t]=!1),n=T(n,{enumerable:E(0,!1)})):(o(e,P)||N(e,P,E(1,{})),e[P][t]=!0),W(e,t,n)):N(e,t,n)},z=function(e,t){p(e);for(var n,r=C(t=v(t)),o=0,s=r.length;s>o;)q(e,n=r[o++],t[n]);return e},Q=function(e){var t=U.call(this,e=A(e,!0));return!(this===F&&o(G,e)&&!o(x,e))&&(!(t||!o(this,e)||!o(G,e)||o(this,P)&&this[P][e])||t)},X=function(e,t){if(e=v(e),t=A(t,!0),e!==F||!o(G,t)||o(x,t)){var n=R(e,t);return!n||!o(G,t)||o(e,P)&&e[P][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=D(v(e)),r=[],s=0;n.length>s;)o(G,t=n[s++])||t==P||t==c||r.push(t);return r},Z=function(e){for(var t,n=e===F,r=D(n?x:v(e)),s=[],i=0;r.length>i;)!o(G,t=r[i++])||n&&!o(F,t)||s.push(G[t]);return s};V||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(x,n),o(this,P)&&o(this[P],e)&&(this[P][e]=!1),W(this,e,E(1,n))};return s&&$&&W(F,e,{configurable:!0,set:t}),j(e)},a(L[B],"toString",(function(){return this._k})),I.f=X,b.f=q,e(72).f=_.f=J,e(77).f=Q,e(73).f=Z,s&&!e(58)&&a(F,"propertyIsEnumerable",Q,!0),g.f=function(e){return j(m(e))}),i(i.G+i.W+i.F*!V,{Symbol:L});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)m(ee[te++]);for(ee=O(m.store),te=0;ee.length>te;)h(ee[te++]);i(i.S+i.F*!V,"Symbol",{for:function(e){return o(K,e+="")?K[e]:K[e]=L(e)},keyFor:function(e){if(H(e))return y(K,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){$=!0},useSimple:function(){$=!1}}),i(i.S+i.F*!V,"Object",{create:function(e,t){return void 0===t?T(e):z(T(e),t)},defineProperty:q,defineProperties:z,getOwnPropertyDescriptor:X,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),M&&i(i.S+i.F*(!V||S((function(){var e=L();return"[null]"!=w([e])||"{}"!=w({a:e})||"{}"!=w(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!H(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return"function"==typeof(t=r[1])&&(n=t),!n&&f(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!H(t))return t}),r[1]=t,w.apply(M,r)}}}),L[B][k]||e(40)(L[B],k,L[B].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},{107:107,110:110,114:114,115:115,116:116,117:117,28:28,31:31,32:32,34:34,38:38,39:39,40:40,47:47,57:57,58:58,62:62,66:66,67:67,7:7,70:70,71:71,72:72,73:73,76:76,77:77,85:85,87:87,92:92,94:94}],244:[function(e,t,n){"use strict";var r=e(32),o=e(113),s=e(112),i=e(7),a=e(105),c=e(108),S=e(49),u=e(38).ArrayBuffer,l=e(95),d=s.ArrayBuffer,m=s.DataView,g=o.ABV&&u.isView,h=d.prototype.slice,y=o.VIEW,C="ArrayBuffer";r(r.G+r.W+r.F*(u!==d),{ArrayBuffer:d}),r(r.S+r.F*!o.CONSTR,C,{isView:function(e){return g&&g(e)||S(e)&&y in e}}),r(r.P+r.U+r.F*e(34)((function(){return!new d(2).slice(1,void 0).byteLength})),C,{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(i(this),e);for(var n=i(this).byteLength,r=a(e,n),o=a(void 0===t?n:t,n),s=new(l(this,d))(c(o-r)),S=new m(this),u=new m(s),g=0;r<o;)u.setUint8(g++,S.getUint8(r++));return s}}),e(91)(C)},{105:105,108:108,112:112,113:113,32:32,34:34,38:38,49:49,7:7,91:91,95:95}],245:[function(e,t,n){var r=e(32);r(r.G+r.W+r.F*!e(113).ABV,{DataView:e(112).DataView})},{112:112,113:113,32:32}],246:[function(e,t,n){e(111)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],247:[function(e,t,n){e(111)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],248:[function(e,t,n){e(111)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],249:[function(e,t,n){e(111)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],250:[function(e,t,n){e(111)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],251:[function(e,t,n){e(111)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],252:[function(e,t,n){e(111)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],253:[function(e,t,n){e(111)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{111:111}],254:[function(e,t,n){e(111)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},{111:111}],255:[function(e,t,n){"use strict";var r,o=e(12)(0),s=e(87),i=e(62),a=e(65),c=e(21),S=e(49),u=i.getWeak,l=Object.isExtensible,d=c.ufstore,m={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},h={get:function(e){if(S(e)){var t=u(e);return!0===t?d(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(this,e,t)}},y=t.exports=e(22)("WeakMap",g,h,c,!0,!0);7!=(new y).set((Object.freeze||Object)(m),7).get(m)&&(a((r=c.getConstructor(g)).prototype,h),i.NEED=!0,o(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];s(t,e,(function(t,o){if(S(t)&&!l(t)){this._f||(this._f=new r);var s=this._f[e](t,o);return"set"==e?this:s}return n.call(this,t,o)}))})))},{12:12,21:21,22:22,49:49,62:62,65:65,87:87}],256:[function(e,t,n){"use strict";var r=e(21);e(22)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},{21:21,22:22}],257:[function(e,t,n){"use strict";var r=e(32),o=e(11)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e(5)("includes")},{11:11,32:32,5:5}],258:[function(e,t,n){var r=e(32),o=e(64)(),s=e(38).process,i="process"==e(18)(s);r(r.G,{asap:function(e){var t=i&&s.domain;o(t?t.bind(e):e)}})},{18:18,32:32,38:38,64:64}],259:[function(e,t,n){var r=e(32),o=e(18);r(r.S,"Error",{isError:function(e){return"Error"===o(e)}})},{18:18,32:32}],260:[function(e,t,n){var r=e(32);r(r.P+r.R,"Map",{toJSON:e(20)("Map")})},{20:20,32:32}],261:[function(e,t,n){var r=e(32);r(r.S,"Math",{iaddh:function(e,t,n,r){var o=e>>>0,s=n>>>0;return(t>>>0)+(r>>>0)+((o&s|(o|s)&~(o+s>>>0))>>>31)|0}})},{32:32}],262:[function(e,t,n){var r=e(32);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,o=+t,s=r&n,i=o&n,a=r>>16,c=o>>16,S=(a*i>>>0)+(s*i>>>16);return a*c+(S>>16)+((s*c>>>0)+(S&n)>>16)}})},{32:32}],263:[function(e,t,n){var r=e(32);r(r.S,"Math",{isubh:function(e,t,n,r){var o=e>>>0,s=n>>>0;return(t>>>0)-(r>>>0)-((~o&s|~(o^s)&o-s>>>0)>>>31)|0}})},{32:32}],264:[function(e,t,n){var r=e(32);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,o=+t,s=r&n,i=o&n,a=r>>>16,c=o>>>16,S=(a*i>>>0)+(s*i>>>16);return a*c+(S>>>16)+((s*c>>>0)+(S&n)>>>16)}})},{32:32}],265:[function(e,t,n){"use strict";var r=e(32),o=e(109),s=e(3),i=e(67);e(28)&&r(r.P+e(69),"Object",{__defineGetter__:function(e,t){i.f(o(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},{109:109,28:28,3:3,32:32,67:67,69:69}],266:[function(e,t,n){"use strict";var r=e(32),o=e(109),s=e(3),i=e(67);e(28)&&r(r.P+e(69),"Object",{__defineSetter__:function(e,t){i.f(o(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},{109:109,28:28,3:3,32:32,67:67,69:69}],267:[function(e,t,n){var r=e(32),o=e(79)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},{32:32,79:79}],268:[function(e,t,n){var r=e(32),o=e(80),s=e(107),i=e(70),a=e(24);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=s(e),r=i.f,c=o(n),S={},u=0;c.length>u;)a(S,t=c[u++],r(n,t));return S}})},{107:107,24:24,32:32,70:70,80:80}],269:[function(e,t,n){"use strict";var r=e(32),o=e(109),s=e(110),i=e(74),a=e(70).f;e(28)&&r(r.P+e(69),"Object",{__lookupGetter__:function(e){var t,n=o(this),r=s(e,!0);do{if(t=a(n,r))return t.get}while(n=i(n))}})},{109:109,110:110,28:28,32:32,69:69,70:70,74:74}],270:[function(e,t,n){"use strict";var r=e(32),o=e(109),s=e(110),i=e(74),a=e(70).f;e(28)&&r(r.P+e(69),"Object",{__lookupSetter__:function(e){var t,n=o(this),r=s(e,!0);do{if(t=a(n,r))return t.set}while(n=i(n))}})},{109:109,110:110,28:28,32:32,69:69,70:70,74:74}],271:[function(e,t,n){var r=e(32),o=e(79)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},{32:32,79:79}],272:[function(e,t,n){"use strict";var r=e(32),o=e(38),s=e(23),i=e(64)(),a=e(117)("observable"),c=e(3),S=e(7),u=e(6),l=e(86),d=e(40),m=e(37),g=m.RETURN,h=function(e){return null==e?void 0:c(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},C=function(e){return void 0===e._o},f=function(e){C(e)||(e._o=void 0,y(e))},p=function(e,t){S(e),this._c=void 0,this._o=e,e=new v(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}C(this)&&y(this)};p.prototype=l({},{unsubscribe:function(){f(this)}});var v=function(e){this._s=e};v.prototype=l({},{next:function(e){var t=this._s;if(!C(t)){var n=t._o;try{var r=h(n.next);if(r)return r.call(n,e)}catch(e){try{f(t)}finally{throw e}}}},error:function(e){var t=this._s;if(C(t))throw e;var n=t._o;t._o=void 0;try{var r=h(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!C(t)){var n=t._o;t._o=void 0;try{var r=h(n.complete);e=r?r.call(n,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var A=function(e){u(this,A,"Observable","_f")._f=c(e)};l(A.prototype,{subscribe:function(e){return new p(e,this._f)},forEach:function(e){var t=this;return new(s.Promise||o.Promise)((function(n,r){c(e);var o=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n})}))}}),l(A,{from:function(e){var t="function"==typeof this?this:A,n=h(S(e)[a]);if(n){var r=S(n.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}return new t((function(t){var n=!1;return i((function(){if(!n){try{if(m(e,!1,(function(e){if(t.next(e),n)return g}))===g)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:A)((function(e){var t=!1;return i((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),d(A.prototype,a,(function(){return this})),r(r.G,{Observable:A}),e(91)("Observable")},{117:117,23:23,3:3,32:32,37:37,38:38,40:40,6:6,64:64,7:7,86:86,91:91}],273:[function(e,t,n){var r=e(63),o=e(7),s=r.key,i=r.set;r.exp({defineMetadata:function(e,t,n,r){i(e,t,o(n),s(r))}})},{63:63,7:7}],274:[function(e,t,n){var r=e(63),o=e(7),s=r.key,i=r.map,a=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:s(arguments[2]),r=i(o(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=a.get(t);return c.delete(n),!!c.size||a.delete(t)}})},{63:63,7:7}],275:[function(e,t,n){var r=e(220),o=e(10),s=e(63),i=e(7),a=e(74),c=s.keys,S=s.key,u=function(e,t){var n=c(e,t),s=a(e);if(null===s)return n;var i=u(s,t);return i.length?n.length?o(new r(n.concat(i))):i:n};s.exp({getMetadataKeys:function(e){return u(i(e),arguments.length<2?void 0:S(arguments[1]))}})},{10:10,220:220,63:63,7:7,74:74}],276:[function(e,t,n){var r=e(63),o=e(7),s=e(74),i=r.has,a=r.get,c=r.key,S=function(e,t,n){if(i(e,t,n))return a(e,t,n);var r=s(t);return null!==r?S(e,r,n):void 0};r.exp({getMetadata:function(e,t){return S(e,o(t),arguments.length<3?void 0:c(arguments[2]))}})},{63:63,7:7,74:74}],277:[function(e,t,n){var r=e(63),o=e(7),s=r.keys,i=r.key;r.exp({getOwnMetadataKeys:function(e){return s(o(e),arguments.length<2?void 0:i(arguments[1]))}})},{63:63,7:7}],278:[function(e,t,n){var r=e(63),o=e(7),s=r.get,i=r.key;r.exp({getOwnMetadata:function(e,t){return s(e,o(t),arguments.length<3?void 0:i(arguments[2]))}})},{63:63,7:7}],279:[function(e,t,n){var r=e(63),o=e(7),s=e(74),i=r.has,a=r.key,c=function(e,t,n){if(i(e,t,n))return!0;var r=s(t);return null!==r&&c(e,r,n)};r.exp({hasMetadata:function(e,t){return c(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},{63:63,7:7,74:74}],280:[function(e,t,n){var r=e(63),o=e(7),s=r.has,i=r.key;r.exp({hasOwnMetadata:function(e,t){return s(e,o(t),arguments.length<3?void 0:i(arguments[2]))}})},{63:63,7:7}],281:[function(e,t,n){var r=e(63),o=e(7),s=e(3),i=r.key,a=r.set;r.exp({metadata:function(e,t){return function(n,r){a(e,t,(void 0!==r?o:s)(n),i(r))}}})},{3:3,63:63,7:7}],282:[function(e,t,n){var r=e(32);r(r.P+r.R,"Set",{toJSON:e(20)("Set")})},{20:20,32:32}],283:[function(e,t,n){"use strict";var r=e(32),o=e(97)(!0);r(r.P,"String",{at:function(e){return o(this,e)}})},{32:32,97:97}],284:[function(e,t,n){"use strict";var r=e(32),o=e(27),s=e(108),i=e(50),a=e(36),c=RegExp.prototype,S=function(e,t){this._r=e,this._s=t};e(52)(S,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),r(r.P,"String",{matchAll:function(e){if(o(this),!i(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):a.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=s(e.lastIndex),new S(r,t)}})},{108:108,27:27,32:32,36:36,50:50,52:52}],285:[function(e,t,n){"use strict";var r=e(32),o=e(100);r(r.P,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},{100:100,32:32}],286:[function(e,t,n){"use strict";var r=e(32),o=e(100);r(r.P,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},{100:100,32:32}],287:[function(e,t,n){"use strict";e(102)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},{102:102}],288:[function(e,t,n){"use strict";e(102)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},{102:102}],289:[function(e,t,n){e(115)("asyncIterator")},{115:115}],290:[function(e,t,n){e(115)("observable")},{115:115}],291:[function(e,t,n){var r=e(32);r(r.S,"System",{global:e(38)})},{32:32,38:38}],292:[function(e,t,n){for(var r=e(130),o=e(87),s=e(38),i=e(40),a=e(56),c=e(117),S=c("iterator"),u=c("toStringTag"),l=a.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],m=0;m<5;m++){var g,h=d[m],y=s[h],C=y&&y.prototype;if(C)for(g in C[S]||i(C,S,l),C[u]||i(C,u,h),a[h]=l,r)C[g]||o(C,g,r[g],!0)}},{117:117,130:130,38:38,40:40,56:56,87:87}],293:[function(e,t,n){var r=e(32),o=e(104);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},{104:104,32:32}],294:[function(e,t,n){var r=e(38),o=e(32),s=e(44),i=e(83),a=r.navigator,c=!!a&&/MSIE .\./.test(a.userAgent),S=function(e){return c?function(t,n){return e(s(i,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};o(o.G+o.B+o.F*c,{setTimeout:S(r.setTimeout),setInterval:S(r.setInterval)})},{32:32,38:38,44:44,83:83}],295:[function(e,t,n){e(243),e(180),e(182),e(181),e(184),e(186),e(191),e(185),e(183),e(193),e(192),e(188),e(189),e(187),e(179),e(190),e(194),e(195),e(146),e(148),e(147),e(197),e(196),e(167),e(177),e(178),e(168),e(169),e(170),e(171),e(172),e(173),e(174),e(175),e(176),e(150),e(151),e(152),e(153),e(154),e(155),e(156),e(157),e(158),e(159),e(160),e(161),e(162),e(163),e(164),e(165),e(166),e(230),e(235),e(242),e(233),e(225),e(226),e(231),e(236),e(238),e(221),e(222),e(223),e(224),e(227),e(228),e(229),e(232),e(234),e(237),e(239),e(240),e(241),e(141),e(143),e(142),e(145),e(144),e(129),e(127),e(134),e(131),e(137),e(139),e(126),e(133),e(123),e(138),e(121),e(136),e(135),e(128),e(132),e(120),e(122),e(125),e(124),e(140),e(130),e(213),e(219),e(214),e(215),e(216),e(217),e(218),e(198),e(149),e(220),e(255),e(256),e(244),e(245),e(250),e(253),e(254),e(248),e(251),e(249),e(252),e(246),e(247),e(199),e(200),e(201),e(202),e(203),e(206),e(204),e(205),e(207),e(208),e(209),e(210),e(212),e(211),e(257),e(283),e(286),e(285),e(287),e(288),e(284),e(289),e(290),e(268),e(271),e(267),e(265),e(266),e(269),e(270),e(260),e(282),e(291),e(259),e(261),e(263),e(262),e(264),e(273),e(274),e(276),e(275),e(278),e(277),e(279),e(280),e(281),e(258),e(272),e(294),e(293),e(292),t.exports=e(23)},{120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,128:128,129:129,130:130,131:131,132:132,133:133,134:134,135:135,136:136,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,23:23,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,292:292,293:293,294:294}],296:[function(e,t,n){(function(e){!function(e){"use strict";function n(e,t,n,r){var s=t&&t.prototype instanceof o?t:o,i=Object.create(s.prototype),a=new d(r||[]);return i._invoke=S(e,n,a),i}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function s(){}function i(){}function a(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function c(e){function t(n,o,s,i){var a=r(e[n],e,o);if("throw"!==a.type){var c=a.arg,S=c.value;return S&&"object"==typeof S&&C.call(S,"__await")?Promise.resolve(S.__await).then((function(e){t("next",e,s,i)}),(function(e){t("throw",e,s,i)})):Promise.resolve(S).then((function(e){c.value=e,s(c)}),i)}i(a.arg)}var n;"object"==typeof process&&process.domain&&(t=process.domain.bind(t)),this._invoke=function(e,r){function o(){return new Promise((function(n,o){t(e,r,n,o)}))}return n=n?n.then(o,o):o()}}function S(e,t,n){var o=T;return function(s,i){if(o===I)throw new Error("Generator is already running");if(o===b){if("throw"===s)throw i;return g()}for(;;){var a=n.delegate;if(a){if("return"===s||"throw"===s&&a.iterator[s]===h){n.delegate=null;var c=a.iterator.return;if(c&&"throw"===(S=r(c,a.iterator,i)).type){s="throw",i=S.arg;continue}if("return"===s)continue}var S;if("throw"===(S=r(a.iterator[s],a.iterator,i)).type){n.delegate=null,s="throw",i=S.arg;continue}if(s="next",i=h,!(u=S.arg).done)return o=_,u;n[a.resultName]=u.value,n.next=a.nextLoc,n.delegate=null}if("next"===s)n.sent=n._sent=i;else if("throw"===s){if(o===T)throw o=b,i;n.dispatchException(i)&&(s="next",i=h)}else"return"===s&&n.abrupt("return",i);if(o=I,"normal"===(S=r(e,t,n)).type){o=n.done?b:_;var u={value:S.arg,done:n.done};if(S.arg!==O)return u;n.delegate&&"next"===s&&(i=h)}else"throw"===S.type&&(o=b,s="throw",i=S.arg)}}}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset(!0)}function m(e){if(e){var t=e[p];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(C.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=h,t.done=!0,t};return r.next=r}}return{next:g}}function g(){return{value:h,done:!0}}var h,y=Object.prototype,C=y.hasOwnProperty,f="function"==typeof Symbol?Symbol:{},p=f.iterator||"@@iterator",v=f.toStringTag||"@@toStringTag",A="object"==typeof t,E=e.regeneratorRuntime;if(E)A&&(t.exports=E);else{(E=e.regeneratorRuntime=A?t.exports:{}).wrap=n;var T="suspendedStart",_="suspendedYield",I="executing",b="completed",O={},R={};R[p]=function(){return this};var N=Object.getPrototypeOf,D=N&&N(N(m([])));D&&D!==y&&C.call(D,p)&&(R=D);var L=i.prototype=o.prototype=Object.create(R);s.prototype=L.constructor=i,i.constructor=s,i[v]=s.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,v in e||(e[v]="GeneratorFunction")),e.prototype=Object.create(L),e},E.awrap=function(e){return{__await:e}},a(c.prototype),E.AsyncIterator=c,E.async=function(e,t,r,o){var s=new c(n(e,t,r,o));return E.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},a(L),L[v]="Generator",L.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=m,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&C.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return s.type="throw",s.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=C.call(o,"catchLoc"),a=C.call(o,"finallyLoc");if(i&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&C.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?this.next=o.finallyLoc:this.complete(s),O},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),l(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;l(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},O}}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(){"use strict";function t(e,t){t?(d[0]=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0,this.blocks=d):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function i(e,n,r){var o,s=typeof e;if("string"===s){var i,a=[],c=e.length,S=0;for(o=0;o<c;++o)(i=e.charCodeAt(o))<128?a[S++]=i:i<2048?(a[S++]=192|i>>6,a[S++]=128|63&i):i<55296||i>=57344?(a[S++]=224|i>>12,a[S++]=128|i>>6&63,a[S++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),a[S++]=240|i>>18,a[S++]=128|i>>12&63,a[S++]=128|i>>6&63,a[S++]=128|63&i);e=a}else{if("object"!==s)throw new Error(h);if(null===e)throw new Error(h);if(f&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||f&&ArrayBuffer.isView(e)))throw new Error(h)}e.length>64&&(e=new t(n,!0).update(e).array());var u=[],l=[];for(o=0;o<64;++o){var d=e[o]||0;u[o]=92^d,l[o]=54^d}t.call(this,n,r),this.update(l),this.oKeyPad=u,this.inner=!0,this.sharedMemory=r}var h="input is invalid type",r="object"==typeof window,s=r?window:{};s.JS_SHA256_NO_WINDOW&&(r=!1);var e=!r&&"object"==typeof self,n=!s.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;n?s=global:e&&(s=self);var o=!s.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,a="function"==typeof define&&define.amd,f=!s.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],y=[24,16,8,0],p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=["hex","array","digest","arrayBuffer"],d=[];!s.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!f||!s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var A=function(e,n){return function(r){return new t(n,!0).update(r)[e]()}},w=function(e){var r=A("hex",e);n&&(r=b(r,e)),r.create=function(){return new t(e)},r.update=function(e){return r.create().update(e)};for(var o=0;o<l.length;++o){var s=l[o];r[s]=A(s,e)}return r},b=function(t,i){var r=eval("require('crypto')"),s=eval("require('buffer').Buffer"),e=i?"sha224":"sha256",n=function(n){if("string"==typeof n)return r.createHash(e).update(n,"utf8").digest("hex");if(null==n)throw new Error(h);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===s?r.createHash(e).update(new s(n)).digest("hex"):t(n)};return n},v=function(e,t){return function(n,r){return new i(n,t,!0).update(r)[e]()}},_=function(e){var t=v("hex",e);t.create=function(t){return new i(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<l.length;++n){var r=l[n];t[r]=v(r,e)}return t};t.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(h);if(null===e)throw new Error(h);if(f&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||f&&ArrayBuffer.isView(e)))throw new Error(h);t=!0}for(var r,o,s=0,i=e.length,a=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(o=this.start;s<i&&o<64;++s)a[o>>2]|=e[s]<<y[3&o++];else for(o=this.start;s<i&&o<64;++s)(r=e.charCodeAt(s))<128?a[o>>2]|=r<<y[3&o++]:r<2048?(a[o>>2]|=(192|r>>6)<<y[3&o++],a[o>>2]|=(128|63&r)<<y[3&o++]):r<55296||r>=57344?(a[o>>2]|=(224|r>>12)<<y[3&o++],a[o>>2]|=(128|r>>6&63)<<y[3&o++],a[o>>2]|=(128|63&r)<<y[3&o++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++s)),a[o>>2]|=(240|r>>18)<<y[3&o++],a[o>>2]|=(128|r>>12&63)<<y[3&o++],a[o>>2]|=(128|r>>6&63)<<y[3&o++],a[o>>2]|=(128|63&r)<<y[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=c[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},t.prototype.hash=function(){var e,t,n,r,o,s,i,a,c,S=this.h0,u=this.h1,l=this.h2,d=this.h3,m=this.h4,g=this.h5,h=this.h6,y=this.h7,C=this.blocks;for(e=16;e<64;++e)t=((o=C[e-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,n=((o=C[e-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,C[e]=C[e-16]+t+C[e-7]+n<<0;for(c=u&l,e=0;e<64;e+=4)this.first?(this.is224?(s=300032,y=(o=C[0]-1413257819)-150054599<<0,d=o+24177077<<0):(s=704751109,y=(o=C[0]-210244248)-1521486534<<0,d=o+143694565<<0),this.first=!1):(t=(S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10),r=(s=S&u)^S&l^c,y=d+(o=y+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&h)+p[e]+C[e])<<0,d=o+(t+r)<<0),t=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(i=d&S)^d&u^s,h=l+(o=h+(n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&m^~y&g)+p[e+1]+C[e+1])<<0,t=((l=o+(t+r)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),r=(a=l&d)^l&S^i,g=u+(o=g+(n=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&y^~h&m)+p[e+2]+C[e+2])<<0,t=((u=o+(t+r)<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),r=(c=u&l)^u&d^a,m=S+(o=m+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&h^~g&y)+p[e+3]+C[e+3])<<0,S=o+(t+r)<<0;this.h0=this.h0+S<<0,this.h1=this.h1+u<<0,this.h2=this.h2+l<<0,this.h3=this.h3+d<<0,this.h4=this.h4+m<<0,this.h5=this.h5+g<<0,this.h6=this.h6+h<<0,this.h7=this.h7+y<<0},t.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,s=this.h5,i=this.h6,a=this.h7,c=u[e>>28&15]+u[e>>24&15]+u[e>>20&15]+u[e>>16&15]+u[e>>12&15]+u[e>>8&15]+u[e>>4&15]+u[15&e]+u[t>>28&15]+u[t>>24&15]+u[t>>20&15]+u[t>>16&15]+u[t>>12&15]+u[t>>8&15]+u[t>>4&15]+u[15&t]+u[n>>28&15]+u[n>>24&15]+u[n>>20&15]+u[n>>16&15]+u[n>>12&15]+u[n>>8&15]+u[n>>4&15]+u[15&n]+u[r>>28&15]+u[r>>24&15]+u[r>>20&15]+u[r>>16&15]+u[r>>12&15]+u[r>>8&15]+u[r>>4&15]+u[15&r]+u[o>>28&15]+u[o>>24&15]+u[o>>20&15]+u[o>>16&15]+u[o>>12&15]+u[o>>8&15]+u[o>>4&15]+u[15&o]+u[s>>28&15]+u[s>>24&15]+u[s>>20&15]+u[s>>16&15]+u[s>>12&15]+u[s>>8&15]+u[s>>4&15]+u[15&s]+u[i>>28&15]+u[i>>24&15]+u[i>>20&15]+u[i>>16&15]+u[i>>12&15]+u[i>>8&15]+u[i>>4&15]+u[15&i];return this.is224||(c+=u[a>>28&15]+u[a>>24&15]+u[a>>20&15]+u[a>>16&15]+u[a>>12&15]+u[a>>8&15]+u[a>>4&15]+u[15&a]),c},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,s=this.h5,i=this.h6,a=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,s>>24&255,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i];return this.is224||c.push(a>>24&255,a>>16&255,a>>8&255,255&a),c},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},i.prototype=new t,i.prototype.finalize=function(){if(t.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();t.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),t.prototype.finalize.call(this)}};var B=w();B.sha256=B,B.sha224=w(!0),B.sha256.hmac=_(),B.sha224.hmac=_(!0),o?module.exports=B:(s.sha256=B.sha256,s.sha224=B.sha224,a&&define((function(){return B})))}();const OLD_APP_ID="tj9u972o46",OLD_APP_SECRET="D234AE3C42F092D4334433173AE9E264",APP_ID="4oe3617251",APP_SECRET="129BA16A406063B2E69A6F8DAB843EBA",REDIRECT_URL="https://account.samsunginternet.com/signInSuccess",PASS_SERVER_URL="https://extension.samsungpass.com/extension/v1/devices/certificate",PASS_ROOT_CERT="-----BEGIN CERTIFICATE-----\nMIIDfTCCAmWgAwIBAgIELOlB6DANBgkqhkiG9w0BAQ0FADBgMQswCQYDVQQGEwJL\nUjEUMBIGA1UECxMLTVggRGl2aXNpb24xHDAaBgNVBAoTE1NhbXN1bmcgRWxlY3Ry\nb25pY3MxHTAbBgNVBAMTFFNhbXN1bmcgUGFzcyBSb290IENBMB4XDTIyMDkyMDAx\nMDIxMFoXDTQyMDkxNTAxMDIxMFowYDELMAkGA1UEBhMCS1IxFDASBgNVBAsTC01Y\nIERpdmlzaW9uMRwwGgYDVQQKExNTYW1zdW5nIEVsZWN0cm9uaWNzMR0wGwYDVQQD\nExRTYW1zdW5nIFBhc3MgUm9vdCBDQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC\nAQoCggEBAJMkOGBcipkIZdoTE644huqh3fPehkqRy81GHi5L8+BPT4VyLDPHaMdr\nNOHWgjnZrcZSv0SijTQYGO4p5B76aKyGltjQRJyEkosqJsO7P3M9Ai9CLgsUTrO4\nlTCArijHjUCZwIu7sCW2W4ixngLOZuBxN7xrKLcDgYcZiWbRyQfmU9xE0ea2Ix/t\ncvNjX7HSW/+IJUMOwZdK+CN6gR2e4q/EC0+2dvseVSIahnkJJCvkcaGdtY2G7U5p\nCiVOgiMLPicXZDl48TyBD6H9mbbYr/ofM7CP6qCtc7L+e0Xa6AUfm3nmFebGk6xC\nZTaNO0H/ukX8YbSd0xSUidIEAgRP4gMCAwEAAaM/MD0wDwYDVR0TBAgwBgEB/wIB\nATALBgNVHQ8EBAMCAQYwHQYDVR0OBBYEFEHbovKsV1N+QsppBVjceJOdebgKMA0G\nCSqGSIb3DQEBDQUAA4IBAQCKBuFRXjxfo5fHpkcakOJWd8oH5CHfTmguTOTuX1Wc\nHTUKG+L34bAM5EtC6XtLaw6rK2guJs/iWLwnrTjWdgUgUxNCpWpXlTlImRQlwIGJ\nqkELWjiO44wafTifYhI8Vbvsx5yJga+iYx89U8iXPZshSdaWL1ichs/PFpTwhKzk\nwY9OhqvrU5zXi5PtsRuhrYhwAhjDkmUajzsjDKMnns7wPw9Wn3NCFfn8FmG4fthV\nR3uQUZ52mwpVt7sbgSzeP9ElcbQ0uPMq/z3voIa3BTIhIKxb0wIhyNxeza+RnxQC\nQDjc6kzbBFSEctkbgpQW0W21pyb0fMcCzFuVS85BO11V\n-----END CERTIFICATE-----",PASS_APP_RESPONSE_TIMEOUT=15e3,SAVE_PASSWORD_ENABLED="SAVE_PASSWORD_ENABLED",AUTOFILL_PASSWORD_ENABLED="AUTOFILL_PASSWORD_ENABLED",EXTENSION_AES_CBC_KEY="EXTENSION_AES_CBC_KEY",EXTENSION_AES_CBC_IV="EXTENSION_AES_CBC_IV",SERVER_CERT="SERVER_CERT",SPASS_USER_ID="SPASS_USER_ID",APIS={VALIDATE_TOKEN:{EU:"https://eu-auth2.samsungosp.com/v2/license/security/authorizeToken",US:"https://us-auth2.samsungosp.com/v2/license/security/authorizeToken",CN:"https://cn-auth2.samsungosp.com.cn/v2/license/security/authorizeToken"},REFRESH_TOKEN:{EU:"https://eu-auth2.samsungosp.com/auth/oauth2/token",US:"https://us-auth2.samsungosp.com/auth/oauth2/token",CN:"https://cn-auth2.samsungosp.com.cn/auth/oauth2/token"},ACTIVATE_TOKEN:"https://sc-auth.samsungosp.com/user/v4/activate",LOGIN:{EU:"https://account.samsung.com/accounts/v1/siMobileHybrid/signInGate?",US:"https://us.account.samsung.com/accounts/v1/siMobileHybrid/signInGate?",CN:"https://account.samsung.cn/accounts/v1/siMobileHybrid/signInGate?"},GET_AUTH_URL(){const e=storageLocalApi.getItem(AUTH_URL);return e?`https://${e}/auth/oauth2/token`:(SamsungSCloudSyncService.SyncLogs.log("Unexpected error! server_auth_url not in localStorage!"),SamsungSCloudSyncService.SyncLogs.log("Returning default URL"),APIS.REFRESH_TOKEN.EU)}},TIMEOUT_MS=4e4,LOGIN_LOADING="login-load.html",POPUP_URL="popup-vue.html",IMPORTED_FOLDER_IDS={SBROWSER:0,CHROME:-100,OPERA:-200,FIREFOX:-300,EDGE:-400},IMPORTED_MAIN_FOLDER_IDS={BOOKMARKS:-1e3,TABS:-2e3,ACCOUNTS:-3e3},IMPORTED_FOLDER_NAMES={0:"SBROWSER","-100":"CHROME","-200":"OPERA","-400":"EDGE"},PASS_APP_STATUS={NOT_INSTALLED:"NOT_INSTALLED",NOT_INSTALLED_FULL:"NOT_INSTALLED_FULL",NOT_ACTIVE:"NOT_ACTIVE",NOT_SAME_USER_ID:"NOT_SAME_USER_ID",NOT_SECURE:"NOT_SECURE",SECURED:"SECURED"},RESPONSE_CODE={BAD_ACCESS_TOKEN:19008,BAD_REQUEST:400,UNAUTHORIZED:401,UNAUTHENTICATED:402,NOT_FOUND:404,PRECONDITION_FAILED:412,UNAVAILABLE:503},IMPORTED_FOLDER_POSITION=-10003,AUTH_URL="AUTH_URL",IS_FROM_CHINA="IS_FROM_CHINA",DEVICE_UNIQUE_ID="DEVICE_UNIQUE_ID",USER_ID="GUID",PUSH_EXPIRE_TIME="PUSH_EXPIRE_TIME",CLIENT_ID="serviceID",IS_LOGGED_OUT="isLoggedOut",BOOKMARK_SERVER_TIME="BROWSER",BROWSER_TAB="SBROWSER_TAB",TAB_SERVER_TIME="TAB",DEVICE_NAME="DEVICE_NAME",ACCOUNT_NAME="ACCOUNT_NAME",CLIENT_IP="client_ip",ACCESS_TOKEN="ACCESS_TOKEN",PRIMARY_BASE_URL="mBaseUrlPrimary",ACCESS_TOKEN_GET_PARAMS="mGetAPIparms",ACCESS_TOKEN_PUT_PARAMS="mPutAPIparms",REFRESH_TOKEN="refresh_token",REFRESH_TOKEN_EXPIRES_IN="refresh_token_expires_in",LAST_IMPORT_TIME="last_import_time",PARENT_WINDOW="PARENT_WINDOW",IMPORT_AVAILABLE="IMPORT_AVAILABLE",IMPORT_OPTION="IMPORT_OPTION",IMPORT_POPUP_CHECK="IMPORT_POPUP_CHECK",HAS_SEEN_GUIDE="HAS_SEEN_GUIDE",MAX_PROGRESS="MAX_PROGRESS",CURRENT_PROGRESS="CURRENT_PROGRESS",IS_FIRST_OPEN="IS_FIRST_OPEN",LAST_SYNCED="LAST_SYNCED",IS_MODAL_OPENED="IS_MODAL_OPENED",SYNC_NEEDED="SYNC_NEEDED",IS_BOOKMARK_SYNC_ON="IS_BOOKMARK_SYNC_ON",IS_OPEN_TABS_SYNC_ON="IS_OPEN_TABS_SYNC_ON",SYNC_ENABLED="SYNC_ENABLED",SYNC_USING_SETTING="SYNC_USING_SETTING",SYNC_STATUS="syncStatus",SYNC_STARTED="SYNC_STARTED",SYNC_COMPLETED="SYNC_COMPLETED",OPEN_NEW_TAB="OPEN_NEW_TAB",EDGE="EDGE",CHROME="CHROME",URL_PATTERN_TABS_ONLY=["http://*/*","https://*/*","file://*/*","ftp://*/*","chrome://*/*"],URL_BLACKLIST=["browser","chrome","opera","file","view","content","data","about","mailto:"],isBrowserURL=e=>URL_BLACKLIST.some((t=>0===e.indexOf(t))),KEYS={ESC:27,ALT:18,ENTER:13,BACK:8,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},EXT_DEVICE_ID="50435f457874656e73696f6e",EXT_DEVICE_NAME="PC_Extension",URL_REGEX=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i,EMAIL_REGEX=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i,PHONE_REGEX=/^(\d|-|\+|\(|\)){8,}$/i,TITLE_REGEX=/^[A-Za-z0-9_-\s]+$/i,BOOKMARK_EXISTS=chrome.i18n.getMessage("BOOKMARK_EXISTS"),FOLDER_NAME_EXISTS=chrome.i18n.getMessage("FOLDER_NAME_EXISTS"),FOLDER_NAME_NEEDED=chrome.i18n.getMessage("FOLDER_NAME_NEEDED"),TITLE_EMPTY=chrome.i18n.getMessage("TITLE_EMPTY"),URL_EMPTY=chrome.i18n.getMessage("URL_EMPTY"),URL_INVALID=chrome.i18n.getMessage("URL_INVALID"),FOLDER_SELF_MOVE=chrome.i18n.getMessage("FOLDER_SELF_MOVE"),CREATE_NEW_FOLDER=chrome.i18n.getMessage("CREATE_NEW_FOLDER"),UNTITLED=chrome.i18n.getMessage("UNTITLED"),TITLE=chrome.i18n.getMessage("TITLE"),WEB_ADDRESS=chrome.i18n.getMessage("WEB_ADDRESS"),FOLDER_NAME=chrome.i18n.getMessage("FOLDER_NAME"),NOTIFICATION_SIGIN_ERROR=chrome.i18n.getMessage("NOTIFICATION_SIGIN_ERROR"),NOTIFICATION_BOOKMARK_SUCCESS=chrome.i18n.getMessage("NOTIFICATION_BOOKMARK_SUCCESS"),LOGIN_SUCCESS=chrome.i18n.getMessage("SIGNIN_SUCCESSFUL"),ADD_TO_SAMSUNG_BOOKMARKS=chrome.i18n.getMessage("ADD_TO_SAMSUNG_BOOKMARKS"),ERROR_STRING=chrome.i18n.getMessage("ERROR_STRING"),EXTENSION_ID=chrome.i18n.getMessage("@@extension_id"),FIND_EMAIL_URL=`chrome-extension://${EXTENSION_ID}/findEmail.html`,ACCOUNT_URL=`chrome-extension://${EXTENSION_ID}/account.html`,SIGNUP_URL=`chrome-extension://${EXTENSION_ID}/signUp.html`,BOOKMARK_MANAGER=`chrome-extension://${EXTENSION_ID}/bookmark-manager.html`,PC_PASS_APP_ID="com.samsung.pass",WEBSTORE_URL="https://chrome.google.com/webstore/detail/samsung-internet/epejdmjgfibjaffbmojllapapjejipkh/",EXT_ENVIRONMENT="production",PASS_CHROME_WEBSTORE_URL="https://chrome.google.com/webstore/detail/samsung-pass/ikbdppgmbnfncggibmidpeoklmbbmpbb",PASS_EDGE_WEBSTORE_URL="https://microsoftedge.microsoft.com/addons/detail/samsung-pass/bhafgjkglbbnaobkkaihfgimpniejpkg",SamsungSCloudSyncService={SyncLogs:{log:logger,error:logger,data:[]},PassLogs:{data:[],log:e=>{let t=`${(new Date).toLocaleString()} ${"string"==typeof e?e:JSON.stringify(e)}`;for("production"==EXT_ENVIRONMENT?(t=t.replace(/"password":"(.*?)","/g,'"password":"*****","'),t=t.replace(/"username":"(.*?)","/g,'"username":"*****","'),t=t.replace(/"value":"(.*?)","/g,'"value":"*****","'),t=t.replace(/"devicePublicKey":"(.*?)","/g,'"value":"*****","'),t=t.replace(/"devicePublicKeyPem":"(.*?)","/g,'"value":"*****","')):console.log(t),SamsungSCloudSyncService.PassLogs.data.push(t);SamsungSCloudSyncService.PassLogs.data.length>5e3;)SamsungSCloudSyncService.PassLogs.data.shift()},export:()=>SamsungSCloudSyncService.PassLogs.data},clearLogs:()=>{SamsungSCloudSyncService.SyncLogs.data=[],SamsungSCloudSyncService.PassLogs.data=[]}};function initFS(){window.requestFileSystem(TEMPORARY,0,(e=>e.root.getFile("samsung-scloud-sync-logs.txt",{create:!1},(e=>e.remove((()=>{SamsungSCloudSyncService.SyncLogs.log("File removed.")}),fileNotExist)),fileNotExist)),fileNotExist)}function logger(e){const t=(new Error).stack.replace("Error","Stack");for(SamsungSCloudSyncService.SyncLogs.data.push(`${e} \n  ${t}`);SamsungSCloudSyncService.SyncLogs.data.length>5e3;)SamsungSCloudSyncService.SyncLogs.data.shift();"production"!==EXT_ENVIRONMENT&&(console.groupCollapsed(e),console.info(t),console.groupEnd())}function fileNotExist(){SamsungSCloudSyncService.SyncLogs.log("Log file not exist")}chrome.runtime.onMessage.addListener((async(e,t,n)=>{const{cmd:r}=e;"GET_BACKGROUND_LOG"===r&&n({pass:JSON.stringify(SamsungSCloudSyncService.PassLogs.data),sync:JSON.stringify(SamsungSCloudSyncService.SyncLogs.data)})}));const timeoutPromise=(e,t)=>new Promise((n=>setTimeout(n,e,t)));async function refreshAccessToken(e){if(!e)throw new Error("NO_REFRESH_TOKEN");await isFromChina();const t=APIS.GET_AUTH_URL(),n={method:"POST",body:["grant_type=refresh_token",`client_id=${APP_ID}`,`client_secret=${APP_SECRET}`,`refresh_token=${e}`].join("&").trim(),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},r=await Promise.race([fetch(t,n),timeoutPromise(TIMEOUT_MS,"TIMEOUT")]);if("TIMEOUT"===r)throw new Error("Encountered timeout during refreshing token");const o=await r.json();if(SamsungSCloudSyncService.SyncLogs.log(o),200!==r.status)throw new Error("BAD_RESPONSE");const{refresh_token:s,refresh_token_expires_in:i,access_token:a,access_token_expires_in:c}=o;return{token:a,tokenExpiresIn:c,refreshToken:s,refreshTokenExpiresIn:i}}function updateAccessToken(e,t=!0){return(SamsungSCloudSyncService.sAuthManager||new AuthManager).setAccessToken(e,t)}async function storeAccessToken(e){const t=storageLocalApi.getItem(USER_ID);await storageLocalApi.setArrayItems([[ACCESS_TOKEN,e],[ACCESS_TOKEN_GET_PARAMS,`&uid=${t}&access_token=${e}`],[ACCESS_TOKEN_PUT_PARAMS,`&uid=${t}&access_token=${e}&did=testdid`]])}function arrayToMap(e,t="id"){return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function arrayToObject(e){const t=arrayToMap(e,"id");for(let n of e){const e=t[n.parent];e&&(e.children?e.children.push(n):e.children=[n])}return t[0]}function defaultIfUndefined(e,t){return e&&"undefined"!=e?e:t}const isLoggedIn=()=>"1"==storageLocalApi.getItem(IS_LOGGED_OUT),isBookmarkSyncOn=()=>!1!==storageLocalApi.getItem(IS_BOOKMARK_SYNC_ON)&&!1!==storageLocalApi.getItem(SYNC_ENABLED),isOpenTabsSyncOn=()=>!1,sanitizeTitle=e=>e?e.trim().replace(/(")/g,"","ig"):UNTITLED,notify=({body:e,title:t,icon:n="assets/img/logo48x48.png"})=>{var r={type:"basic",iconUrl:n,title:t,message:e,priority:1};chrome.notifications.create("noti",r,(function(){})),setTimeout((function(){chrome.notifications.clear("noti",(function(){}))}),1e4)},bookmarkSavedNotif=({url:e,title:t,enabled:n=!0})=>{n&&notify({body:t,title:NOTIFICATION_BOOKMARK_SUCCESS})},enterPressed=e=>t=>t.keyCode===KEYS.ENTER&&e(t),url2title=e=>{let{hostname:t}=h("a",{href:e});switch(t=t.replace("www.","").replace("http://","").replace("https://",""),t=t.split("."),t.length){case 1:case 2:return t[0];default:return t.slice(-2)[0]}},isVisible=e=>"block"===e.style.display||"visible"===e.style.visibility,h=(e,t={},n)=>{const r=document.createElement(e);return Object.keys(t).forEach((e=>"function"==typeof t[e]?r.addEventListener(e,t[e],!1):r.setAttribute(e,t[e]))),"string"==typeof n?r.innerHTML=n:Array.isArray(n)&&n.forEach((e=>r.appendChild(e))),r};function fillBookmarkFields({$title:e,$url:t}){return({title:n="",url:r="",isFolder:o=!1}={})=>{e.value=n,o?t.parentNode.style.display="none":(t.value=r,t.parentNode.style.display="")}}const isValidURL=e=>URL_REGEX.test(e),isValidEmail=e=>EMAIL_REGEX.test(e),isValidPhone=e=>PHONE_REGEX.test(e),isValidTitle=e=>TITLE_REGEX.test(e);function importFolderIcon(){return`assets/img/internet_list_folder_${getBrowserName().toLowerCase()}.png`}function importFolderSYNC4EndsWith(){const e=getBrowserName().toLowerCase(),t=getBrowserName().toUpperCase();return`${e}_0_${e}_${IMPORTED_FOLDER_IDS[t]}`}function importFolderSYNC4EndsFromKey(e){const t=e.toLowerCase();return`${t}_0_${t}_${IMPORTED_FOLDER_IDS[e]}`}function queryForImportFolder({selection:e=["SYNC4","_ID","PARENT","TITLE"]}){return DB.Query.bookmarks({selection:e,where:{equals:[{key:"IS_DELETED",value:"0"}],likes:[{key:"SYNC4",value:importFolderSYNC4EndsWith()}]}})}function updateModifiedOfImportFolder(e=Date.now()){return DB.Update.bookmarks({newData:{MODIFIED:e,SYNC5:e,DIRTY:1},where:{equals:[{key:"IS_DELETED",value:"0"}],likes:[{key:"SYNC4",value:importFolderSYNC4EndsWith()}]}})}function getLocale(){const[e,t]=(navigator.userLanguage||navigator.language).split("-");return{languageCode:e,countryCode:t}}function isFromChina(){if(storageLocalApi.getItem(IS_FROM_CHINA))return Promise.resolve("1"==storageLocalApi.getItem(IS_FROM_CHINA));const e=getLocale(),t=["cn","tw","hk"].some((t=>(e.countryCode||"").toLowerCase()===t))||"zh"===(e.languageCode||"").toLowerCase();return console.log(`isFromChina returned ${t}`),new Promise((async e=>{storageLocalApi.setItem(IS_FROM_CHINA,!0===t?"1":"0"),e(t)}))}async function clearLocalStorage(){await storageLocalApi.setArrayItems([[IS_LOGGED_OUT,0],[BOOKMARK_SERVER_TIME,0],[TAB_SERVER_TIME,0],[BROWSER_TAB,0]]),await storageLocalApi.removeItems([AUTH_URL,IS_FROM_CHINA,DEVICE_NAME,PRIMARY_BASE_URL,CLIENT_ID,ACCESS_TOKEN,USER_ID,ACCESS_TOKEN_GET_PARAMS,ACCESS_TOKEN_PUT_PARAMS,SYNC_STATUS,REFRESH_TOKEN,REFRESH_TOKEN_EXPIRES_IN,LAST_IMPORT_TIME,IS_BOOKMARK_SYNC_ON,IS_OPEN_TABS_SYNC_ON,SYNC_ENABLED,SYNC_USING_SETTING,"ORIGIN_ID","LEFT_PANE_ACTIVE","SPASS_DEVICE_PEM_PUBLIC_KEY","LAUNCH_EXTENSION_COUNT","PASSWORD_SYNC_BADGE_SHOWED","PASSWORD_SYNC_BADGE_SHOWED_1ST"])}async function clearDatabase(){SamsungSCloudSyncService.clearLogs(),DB.clear(),await storageLocalApi.removeItem(ACCESS_TOKEN),await storageLocalApi.setItem(SYNC_STATUS,""),SamsungSCloudSyncService.SyncLogs.log("Logout Complete.")}async function cleanupStateOnLogout(){await storageLocalApi.setItem(IS_LOGGED_OUT,0),clearLocalStorage(),SamsungSCloudSyncService.BrowserOverlay.onLogoutClick()}function findTabWithURL(e,t){const n=t=>(Array.isArray(e)?e:[e]).some((e=>t.url.match(e))),r=t.find((e=>e.tabs.some(n))),o=r?r.tabs.find(n):void 0;return{win:r,tab:o}}function getWindowOptions(){return new Promise((e=>{chrome.windows.getLastFocused({windowTypes:["normal"]},(t=>{e({top:t.top+100,left:t.left+t.width-450,width:400,height:700,type:"popup"})}))}))}function windowPopupWithURLExists(e){return new Promise(((t,n)=>chrome.windows.getAll({populate:!0,windowTypes:["popup"]},(r=>{const{win:o,tab:s}=findTabWithURL(e,r);o&&s?t({win:o,tab:s}):n()}))))}const createTabForURL=(e,t)=>new Promise((n=>chrome.tabs.create({windowId:t,url:e},n))),createTabForEachURL=(e,t)=>Promise.all(e.map((e=>createTabForURL(e,t)))),createTabsInWindow=(e,...t)=>new Promise((n=>chrome.windows.create({top:100,left:Math.round((screen.width-.75*screen.width)/2),height:Math.round(.75*screen.height),width:Math.round(.75*screen.width),type:"normal",url:e},(e=>createTabForEachURL(t,e.id).then(n))))),createTabsInSecretWindow=(e,...t)=>new Promise((n=>chrome.windows.create({top:100,left:Math.round((screen.width-.75*screen.width)/2),height:Math.round(.75*screen.height),width:Math.round(.75*screen.width),type:"normal",incognito:!0,url:e},(e=>createTabForEachURL(t,e.id).then(n)))));function updateTabInCurrentWindow(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.update(t[0].id,{url:e},(()=>window.close()))}))}function createTabInCurrentWindow(...e){chrome.windows.getCurrent((t=>createTabForEachURL(e,t.id).then((()=>window.close()))))}function getBrowserName(){var e,t,n=navigator.userAgent,r=navigator.appName;return-1!=(t=n.indexOf("OPR/"))||-1!=(t=n.indexOf("Opera"))?r="Opera":-1!=(t=n.indexOf("Edg"))?r="Edge":-1!=(t=n.indexOf("Chrome"))?r="Chrome":-1!=(t=n.indexOf("Safari"))?r="Safari":-1!=(t=n.indexOf("Firefox"))?r="Firefox":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(r=n.substring(e,t)).toLowerCase()==r.toUpperCase()&&(r=navigator.appName),r}const createContextMenu=e=>chrome.contextMenus.remove(e.id,(()=>{chrome.runtime.lastError,chrome.contextMenus.create(e)})),removeContextMenu=({id:e})=>chrome.contextMenus.remove(e,(()=>chrome.runtime.lastError)),enableContextMenu=({id:e})=>chrome.contextMenus.update(e,{enabled:!0}),disableContextMenu=({id:e})=>chrome.contextMenus.update(e,{enabled:!1});function getServerTimeStampValue(){const e=new TimeManager,t=storageLocalApi.getItem(BOOKMARK_SERVER_TIME)||e.getCurrentTime();return 0==t?e.getCurrentTime():t}function fetchUserInfo(){if(SamsungSCloudSyncService.ACCOUNT_NAME=storageLocalApi.getItem(ACCOUNT_NAME),null==SamsungSCloudSyncService.DEVICE_NAME){const{BROWSER_NAME:n="PC_Browser",EXT_VERSION:r,PLATFORM_NAME:o}=SamsungSCloudSyncService;var e=SamsungSCloudSyncService.ACCOUNT_NAME.indexOf("@"),t=SamsungSCloudSyncService.ACCOUNT_NAME;e>0&&(t=SamsungSCloudSyncService.ACCOUNT_NAME.substr(0,e)),SamsungSCloudSyncService.DEVICE_NAME=`${t}_${r}_${n}_${o}`}SamsungSCloudSyncService.BrowserOverlay.launchSyncPage()}function getChromeBookmarksFlatTree({startIdWith:e=0}){return new Promise(((t,n)=>queryForImportFolder({selection:["SYNC4","_ID"]}).then((r=>{if(r&&1===r.length){const n={_ID:r[0]._ID,SYNC4:r[0].SYNC4};chrome.bookmarks.getTree((([r])=>{const o=getBrowserName().toLowerCase(),s=(t,r=[],i=null)=>{if(t.id=parseInt(t.id)+parseInt(e),t.SYNC4=createSYNC4({id:`${o}_${t.id}`,parent:`${o}_${t.parentId}`}),t.POSITION=t.index+1,i?(t.parentId=parseInt(t.parentId)+parseInt(e),t.SYNC3=i?i.SYNC4:null):(t.SYNC3=n.SYNC4,t.parentId=parseInt(n._ID)),!t.children||0===t.children.length)return[...r,t];if(t.children.length>0){let n=r;return t.id!=e+0&&(n=[...n,Object.assign({},t,{children:void 0})]),t.children.forEach((r=>n=s(r,n,t.id!=e+0?t:null))),n}},i=s(r);t(i)}))}else SamsungSCloudSyncService.SyncLogs.log("imported folder not found"),n("imported folder not found")}))))}function prepareFlatTree(e){return new Promise(((t,n)=>{const r=getServerTimeStampValue();t(e.map((e=>(e._ID=e.id,e.PARENT=e.parentId||0,e.SOURCEID=e.PARENT,e.DIRTY=1,e.CREATED=r,e.MODIFIED=r,e.TITLE=sanitizeTitle(e.title),e.URL=e.url,e.FOLDER=e.url?0:1,e.SYNC5=r,e.DEVICE_ID=EXT_DEVICE_ID,e.DEVICE_NAME=EXT_DEVICE_NAME,e.IS_DELETED="0",e.BOOKMARK_ID=e._ID,e.ACCOUNT_NAME=storageLocalApi.getItem("ACCOUNT_NAME"),e.ACCOUNT_TYPE=storageLocalApi.getItem("ACCOUNT_TYPE"),delete e.id,delete e.title,delete e.url,delete e.parentId,delete e.children,delete e.index,delete e.dateAdded,delete e.dateGroupModified,e))))}))}function deleteImportedBookmarks({SYNC4:e}){return DB.Query.bookmarks({selection:["_ID","PARENT","SYNC3","SYNC4"]}).then((t=>{if(t&&t.length>0){const n=(t=Array.from(t)).find((t=>t.SYNC4==e));if(n){const r=e=>{let r=[e];const o=e=>{const n=t.filter((t=>t.SYNC3==e.SYNC4));n&&n.length>0&&(r=[...r,...n.map((e=>e.SYNC4))],n.forEach((e=>o(e))))};return o(n),r.filter((t=>t!=e))};let o=r(e);if(o.length>0){o=o.map((e=>`"${e}"`)).join(","),SamsungSCloudSyncService.SyncLogs.log(`Deleting following SYNC4s (${o.split(",").length}) [${o}]`);const e=getServerTimeStampValue();return DB.Update.bookmarks({newData:{DIRTY:1,IS_DELETED:"1",SYNC5:e,MODIFIED:e},where:{ins:[{key:"SYNC4",value:o.replace(/"/g,"").split(",")}]}}).then((e=>syncAndCallback()))}return SamsungSCloudSyncService.SyncLogs.log("Nothing to delete"),Promise.resolve(0)}return SamsungSCloudSyncService.SyncLogs.log("No imported bookmarks"),Promise.resolve(0)}return SamsungSCloudSyncService.SyncLogs.log("No bookmarks in DB"),Promise.resolve(0)}))}function insertImportedFolder({_ID:e,SERVER_TIMESTAMP:t}){const n=getBrowserName(),r=n.toLowerCase(),o=createSYNC4({id:`${r}_${e}`,parent:`${r}_0`});return SamsungSCloudSyncService.SyncLogs.log(`Inserting folder with SYNC4 = ${o} at _ID = ${e}`),DB.Delete.bookmarks({where:{equals:[{key:"_ID",value:e}]}}).then((()=>DB.Insert.bookmarks({data:{_ID:e,TITLE:`${n} Bookmarks`,BOOKMARK_ID:e,SOURCEID:0,PARENT:0,FOLDER:"1",DIRTY:1,IS_DELETED:"0",SYNC4:o,POSITION:IMPORTED_FOLDER_POSITION,CREATED:t,MODIFIED:t,SYNC5:t,DEVICE_ID:EXT_DEVICE_ID,DEVICE_NAME:EXT_DEVICE_NAME,ACCOUNT_NAME:storageLocalApi.getItem("ACCOUNT_NAME"),ACCOUNT_TYPE:storageLocalApi.getItem("ACCOUNT_TYPE")}})))}function importLocalBookmarksAndReplace({_ID:e}){const t=getServerTimeStampValue();return SamsungSCloudSyncService.SyncLogs.log("Beginning to import bookmarks"),queryForImportFolder({selection:["_ID","SYNC3","SYNC4"]}).then((n=>{SamsungSCloudSyncService.SyncLogs.log("Queried for imported bookmarks' root folder");const r=n&&1===n.length;return SamsungSCloudSyncService.SyncLogs.log(`Looked for existence of folder : ${r}`),r?deleteImportedBookmarks({SYNC4:n[0].SYNC4}):insertImportedFolder({_ID:e,SERVER_TIMESTAMP:t})})).then((e=>(SamsungSCloudSyncService.SyncLogs.log("Looking for max id in DB"),DB.Max.bookmarks({key:"_ID"})))).then((e=>{const t=parseInt(e)<1?0:parseInt(e);return SamsungSCloudSyncService.SyncLogs.log(`Got max id in DB ${t}`),getChromeBookmarksFlatTree({startIdWith:t})})).then((e=>(SamsungSCloudSyncService.SyncLogs.log("Flattening tree"),prepareFlatTree(e)))).then((e=>new Promise(((t,n)=>{SamsungSCloudSyncService.SyncLogs.log("Got flatted tree"),Promise.all(e.map((e=>DB.Insert.bookmarks({data:e})))).then((()=>t(e.length)))})))).catch((e=>{console.log("(importLocalBookmarksAndReplace) Error: ",e)}))}function importLocalBookmarksAndOverwrite({_ID:e}){const t=(e,t,n)=>{const r=[],o=(e,t)=>{let s=Object.assign({},e,{children:void 0}),i=getBrowserName().toLowerCase();s.id=parseInt(s.id)+parseInt(n),s.SYNC4=createSYNC4({id:`${i}_${s.id}`,parent:`${i}_${s.parentId}`}),s.POSITION=s.index+1,s.SYNC3=t.SYNC4,s.parentId=parseInt(t._ID),s.title=sanitizeTitle(s.title),s=(e=>{const t=getServerTimeStampValue();return e._ID=e.id,e.PARENT=e.parentId?parseInt(e.parentId):0,e.SOURCEID=e.PARENT,e.DIRTY=1,e.CREATED=t,e.MODIFIED=t,e.TITLE=sanitizeTitle(e.title),e.URL=e.url||"",e.FOLDER=e.url?0:1,e.SYNC5=t,e.DEVICE_ID=EXT_DEVICE_ID,e.DEVICE_NAME=EXT_DEVICE_NAME,e.IS_DELETED="0",e.BOOKMARK_ID=e._ID,e.ACCOUNT_NAME=storageLocalApi.getItem("ACCOUNT_NAME"),e.ACCOUNT_TYPE=storageLocalApi.getItem("ACCOUNT_TYPE"),delete e.id,delete e.title,delete e.url,delete e.parentId,delete e.children,delete e.index,delete e.dateAdded,delete e.dateGroupModified,e})(s),r.push(s),e.children&&e.children.length>0&&e.children.forEach((e=>o(e,s)))};return o(e,t),r};return queryForImportFolder({selection:["_ID"]}).then((t=>{SamsungSCloudSyncService.SyncLogs.log("Queried for imported bookmarks' root folder");const n=t&&1===t.length,r=getServerTimeStampValue();return SamsungSCloudSyncService.SyncLogs.log(`Looked for existence of folder : ${n}`),n?Promise.resolve(0):insertImportedFolder({_ID:e,SERVER_TIMESTAMP:r})})).then((e=>{SamsungSCloudSyncService.SyncLogs.log("Getting previously imported Bookmarks");const t=(e,n=0,r={})=>new Promise((o=>DB.Query.bookmarks({selection:["_ID","SYNC4","TITLE","URL","FOLDER"],where:{equals:[{key:"PARENT",value:e._ID},{key:"SYNC3",value:e.SYNC4},{key:"IS_DELETED",value:"0"},{key:"DIRTY",value:0}]}}).then((s=>{const i=`${n}-${sanitizeTitle(e.TITLE)}`;[...s].forEach((e=>r[i]?r[i].push(e):r[i]=[e])),Promise.all([...s].map((e=>1==e.FOLDER?t(e,n+1,r):Promise.resolve(r)))).then((()=>o(r)))}))));return queryForImportFolder({selection:["_ID","SYNC4","TITLE","URL","FOLDER"]}).then((([e])=>t(e).then((t=>Promise.resolve({SamsungBookmarks:t,importedFolder:e})))))})).then((({SamsungBookmarks:e,importedFolder:t})=>new Promise((n=>{SamsungSCloudSyncService.SyncLogs.log("Getting latest Chrome Bookmarks"),chrome.bookmarks.getTree((([r])=>n({SamsungBookmarks:e,ChromeBookmarks:r,importedFolder:t})))})))).then((({SamsungBookmarks:e,ChromeBookmarks:t,importedFolder:n})=>(SamsungSCloudSyncService.SyncLogs.log("Looking for max id in DB"),DB.Max.bookmarks({key:"_ID"}).then((r=>Promise.resolve({SamsungBookmarks:e,ChromeBookmarks:t,importedFolder:n,MAX_ID:parseInt(r)<1?0:parseInt(r)})))))).then((({SamsungBookmarks:e,ChromeBookmarks:n,MAX_ID:r,importedFolder:o})=>{SamsungSCloudSyncService.SyncLogs.log("Starting diff algorithm");let s=[];const i={inChrome:{title:o.TITLE},inSamsung:o},a=(n,o=i,c=-1)=>{if(-1===c)n.children.forEach((e=>a(e,o,c+1)));else{const i=e[`${c}-${o.inChrome.title}`],S=i&&i.find((e=>sanitizeTitle(e.TITLE)===sanitizeTitle(n.title)&&(1==e.FOLDER||e.URL==n.url))),u=!n.url&&n.children&&n.children.length>0;S?u&&n.children.forEach((e=>a(e,{inChrome:n,inSamsung:S},c+1))):s=[...s,...t(n,o.inSamsung,r)]}};return a(n),SamsungSCloudSyncService.SyncLogs.log(`Found ${s.length} new bookmarks to add`),Promise.resolve(s)})).then((e=>new Promise((t=>{Promise.all(e.map((e=>DB.Insert.bookmarks({data:e})))).then((n=>t(e.length)))})))).catch((e=>{console.log("(importLocalBookmarksAndOverwrite) Error: ",e)}))}function syncAndCallback(){return new Promise(((e,t)=>{chrome.storage.local.onChanged.addListener((t=>{Object.keys(t).forEach((n=>{t[n].newValue===SYNC_COMPLETED&&e()}))})),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess()}))}function importAvailable(){storageLocalApi.setItem(IMPORT_AVAILABLE,!0).then((()=>{chrome.runtime.sendMessage({CHROME_BOOKMARK_CHANGED:"CHANGED"})}))}function onInit(){isLoggedIn()&&chrome.action.setIcon({path:"assets/img/logo32x32.png"})}chrome.contextMenus.removeAll((()=>{chrome.contextMenus.onClicked.addListener(((e,{active:t,url:n,title:r})=>{isLoggedIn()?t?addBookmark({url:n,title:r}).then((()=>{bookmarkSavedNotif({url:n,title:r}),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess()})).catch((e=>notify({title:ERROR_STRING,body:e}))):notify({title:"Invalid Behaviour",body:"Sorry we don't support inactive tabs"}):notify({title:ERROR_STRING,body:NOTIFICATION_SIGIN_ERROR})})),chrome.contextMenus.create({title:ADD_TO_SAMSUNG_BOOKMARKS,type:"normal",contexts:["all"],enabled:!0,id:`save_bookmark_samsung_browser_extension ${Date.now()}`,documentUrlPatterns:URL_PATTERN_TABS_ONLY})})),SamsungSCloudSyncService.BROWSER_NAME=getBrowserName(),SamsungSCloudSyncService.PLATFORM_NAME=navigator.platform,SamsungSCloudSyncService.NEW_TAB_URL_ID=null,SamsungSCloudSyncService.EXT_ID=chrome.i18n.getMessage("@@extension_id"),SamsungSCloudSyncService.EXT_VERSION=chrome.runtime.getManifest().version,SamsungSCloudSyncService.NEW_TAB_URL="chrome://newtab/",SamsungSCloudSyncService.LAUNCH_URL="chrome-extension://"+SamsungSCloudSyncService.EXT_ID+"/login-load.html",SamsungSCloudSyncService.DEVICE_NAME=null,SamsungSCloudSyncService.ACCOUNT_NAME=null,SamsungSCloudSyncService.ACCOUNT_TYPE="com.osp.app.signin",SamsungSCloudSyncService.tokenV=null,SamsungSCloudSyncService.isSyncTabLaunched=!1,SamsungSCloudSyncService.isLoginTabLaunched=!1,SamsungSCloudSyncService.firstSynced=!1,SamsungSCloudSyncService.isAccessToken=!1,SamsungSCloudSyncService.SYNC_TIMER=-1,SamsungSCloudSyncService.AUTO_SYNC_TIMER=-1,SamsungSCloudSyncService.SYNC_TIMER_VAL=18e5,SamsungSCloudSyncService.AUTO_SYNC_TIMER_VAL=18e5,SamsungSCloudSyncService.INTERNET_FAILURE_TEXT="Internet Connectivity Failure; Check your Internet Connection",SamsungSCloudSyncService.updateTabOperations=[],SamsungSCloudSyncService.insertDeletedTabOperations=[],SamsungSCloudSyncService.isTabSyncStatus=!1,SamsungSCloudSyncService.OLD_SYNC_KEY="00:24:54:98:C2:B0",SamsungSCloudSyncService.NEW_SYNC_KEY="00245498C2B0",SamsungSCloudSyncService.sAuthManager=null,SamsungSCloudSyncService.mCloudServiceManager=null,SamsungSCloudSyncService.mKVSConstants=null,SamsungSCloudSyncService.mSyncConstants=null,SamsungSCloudSyncService.mORSConstants=null,SamsungSCloudSyncService.mServerCommonConstants=null,SamsungSCloudSyncService.recordServiceManager=null,SamsungSCloudSyncService.mNetClient=null,SamsungSCloudSyncService.mNetworkResponse=null,SamsungSCloudSyncService.mKVSResponse=null,SamsungSCloudSyncService.mBrowserConstants=null,SamsungSCloudSyncService.mContentProvider=null,SamsungSCloudSyncService.mICloudServiceManager=null,SamsungSCloudSyncService.mAppTool=null,SamsungSCloudSyncService.mClientDeviceId=null,SamsungSCloudSyncService.mBrowserBookmarkSyncAdapter=null,SamsungSCloudSyncService.mBrowserTabSyncAdapter=null,SamsungSCloudSyncService.syncTabsInDB=!1,SamsungSCloudSyncService.firstSyncCompleted=!1,SamsungSCloudSyncService.mSyncCancelled=!1,storageLocalApi.setArrayItems([["EXT_ID",SamsungSCloudSyncService.EXT_ID],["ACCOUNT_TYPE",SamsungSCloudSyncService.ACCOUNT_TYPE]]),storageLocalApi.waitForAvailable().then((()=>{SamsungSCloudSyncService.CURRENT_DATE_TIME=storageLocalApi.getItem("CURRENT_DATE_TIME")||Date.now().toString(36),SamsungSCloudSyncService.DEVICE_ID=`${SamsungSCloudSyncService.EXT_ID}_${SamsungSCloudSyncService.EXT_VERSION}_${SamsungSCloudSyncService.BROWSER_NAME}_Desktop_${SamsungSCloudSyncService.PLATFORM_NAME}_${SamsungSCloudSyncService.CURRENT_DATE_TIME}`,storageLocalApi.setItem("CURRENT_DATE_TIME",SamsungSCloudSyncService.CURRENT_DATE_TIME),storageLocalApi.setArrayItems([["DEVICE_ID",SamsungSCloudSyncService.DEVICE_ID],["CURRENT_DATE_TIME",SamsungSCloudSyncService.CURRENT_DATE_TIME]])})),SamsungSCloudSyncService.BrowserOverlay={clearAutoSyncTimeoutInterval(e){SamsungSCloudSyncService.SyncLogs.log(`Auto Sync Timer Cleared = ${SamsungSCloudSyncService.AUTO_SYNC_TIMER}`),SamsungSCloudSyncService.AUTO_SYNC_TIMER>0&&(clearInterval(SamsungSCloudSyncService.AUTO_SYNC_TIMER),SamsungSCloudSyncService.AUTO_SYNC_TIMER=-1),e||(SamsungSCloudSyncService.BrowserOverlay.applyAutoSyncTimeoutInterval(),SamsungSCloudSyncService.SyncLogs.log("Auto Sync Timer Applied"))},applyAutoSyncTimeoutInterval(){-1==SamsungSCloudSyncService.AUTO_SYNC_TIMER?(SamsungSCloudSyncService.AUTO_SYNC_TIMER=setInterval((()=>{SamsungSCloudSyncService.SyncLogs.log("Auto Syncing..."),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess()}),SamsungSCloudSyncService.AUTO_SYNC_TIMER_VAL),SamsungSCloudSyncService.SyncLogs.log(`Auto Sync Timer applied = ${SamsungSCloudSyncService.AUTO_SYNC_TIMER}`)):SamsungSCloudSyncService.SyncLogs.log(`Auto Sync Timer Value = ${SamsungSCloudSyncService.AUTO_SYNC_TIMER}`)},clearSyncTimeoutInterval(){SamsungSCloudSyncService.SyncLogs.log(`Sync Timer Cleared = ${SamsungSCloudSyncService.SYNC_TIMER}`),SamsungSCloudSyncService.SYNC_TIMER>0&&(clearInterval(SamsungSCloudSyncService.SYNC_TIMER),SamsungSCloudSyncService.SYNC_TIMER=-1)},applySyncTimeoutInterval(){-1==SamsungSCloudSyncService.SYNC_TIMER?(SamsungSCloudSyncService.SYNC_TIMER=setInterval(SamsungSCloudSyncService.BrowserOverlay.showSyncErrorMsg,SamsungSCloudSyncService.SYNC_TIMER_VAL),SamsungSCloudSyncService.SyncLogs.log("Sync Timer Applied = "+SamsungSCloudSyncService.SYNC_TIMER)):SamsungSCloudSyncService.SyncLogs.log(`Timer Value = ${SamsungSCloudSyncService.SYNC_TIMER}`)},showSyncErrorMsg(){SamsungSCloudSyncService.BrowserOverlay.clearSyncTimeoutInterval(),SamsungSCloudSyncService.BrowserOverlay.clearAutoSyncTimeoutInterval(!1),chrome.runtime.sendMessage({ERROR:"Sync Timeout"}),SamsungSCloudSyncService.BrowserOverlay.onLogoutClick(),chrome.action.setPopup({popup:""}),chrome.action.setIcon({path:"assets/img/logo32x32_gray.png"})},async onAccessTokenReceived(e,t){SamsungSCloudSyncService.mSyncCancelled=!1;const{BROWSER_NAME:n="PC_Browser",EXT_VERSION:r,PLATFORM_NAME:o}=SamsungSCloudSyncService,s={};if(e.replace(/[?&]+([^=&]+)=([^&]*)/gi,((e,t,n)=>s[t]=n)),s.inputUserID){SamsungSCloudSyncService.ACCOUNT_NAME=s.inputUserID,SamsungSCloudSyncService.ACCOUNT_NAME.replace("%40","@");var i=SamsungSCloudSyncService.ACCOUNT_NAME.indexOf("@"),a=SamsungSCloudSyncService.ACCOUNT_NAME.substr(0,i);SamsungSCloudSyncService.DEVICE_NAME=`${a}_${r}_${n}_${o}`}s.inputEmailID&&(SamsungSCloudSyncService.ACCOUNT_NAME=s.inputEmailID,(i=SamsungSCloudSyncService.ACCOUNT_NAME.indexOf("%40"))>0&&(SamsungSCloudSyncService.ACCOUNT_NAME=SamsungSCloudSyncService.ACCOUNT_NAME.replace("%40","@")),i=SamsungSCloudSyncService.ACCOUNT_NAME.indexOf("@"),a=SamsungSCloudSyncService.ACCOUNT_NAME.substr(0,i),SamsungSCloudSyncService.DEVICE_NAME=`${a}_${r}_${n}_${o}`),s.inputPhoneID&&(SamsungSCloudSyncService.ACCOUNT_NAME=s.inputPhoneID,SamsungSCloudSyncService.DEVICE_NAME=`${s.inputPhoneID}_${r}_${n}_${o}`),s.client_id&&(SamsungSCloudSyncService.CLIENT_ID=s.client_id),t.userId&&(SamsungSCloudSyncService.USER_ID=t.userId),t.access_token&&(SamsungSCloudSyncService.tokenV=t.access_token,SamsungSCloudSyncService.isAccessToken=!0),await storageLocalApi.setArrayItems([[ACCOUNT_NAME,SamsungSCloudSyncService.ACCOUNT_NAME],[CLIENT_ID,SamsungSCloudSyncService.CLIENT_ID],[USER_ID,SamsungSCloudSyncService.USER_ID],[ACCESS_TOKEN,SamsungSCloudSyncService.tokenV]]),SamsungSCloudSyncService.isAccessToken&&(SamsungSCloudSyncService.sAuthManager=SamsungSCloudSyncService.sAuthManager||new AuthManager,SamsungSCloudSyncService.sAuthManager.setAccessToken(SamsungSCloudSyncService.tokenV))},onBrowserActionClicked(){SamsungSCloudSyncService.tokenV=storageLocalApi.getItem(ACCESS_TOKEN),SamsungSCloudSyncService.tokenV?fetchUserInfo():SamsungSCloudSyncService.BrowserOverlay.launchLoginPage()},launchSyncPage(){SamsungSCloudSyncService.SyncLogs.log("launchSyncPage"),chrome.runtime.sendMessage({USER_LOGGED_IN:!0}),SamsungSCloudSyncService.mContentProvider=SamsungSCloudSyncService.mContentProvider||new ContentProvider,SamsungSCloudSyncService.BrowserOverlay.startSync()},syncOpenedTabs:function(){SamsungSCloudSyncService.firstSynced=!0,SamsungSCloudSyncService.mContentProvider||(SamsungSCloudSyncService.mContentProvider=new ContentProvider),DB.Query.tabs({selection:["*"],where:{equals:[{key:"DEVICE_ID",value:SamsungSCloudSyncService.DEVICE_ID}]}}).then((e=>{chrome.windows.getAll({populate:!0},(function(t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].TAB_ID;for(var o=0;o<t.length;o++)for(var s=new Array(t[o].tabs.length),i=0;i<t[o].tabs.length;i++)s[i]=t[o].tabs[i].id,(0==e.length||n.indexOf(t[o].tabs[i].id)>=0)&&SamsungSCloudSyncService.BrowserOverlay.syncOpenTabData(t[o].tabs[i]);for(r=0;r<e.length;r++)if(-1==s.indexOf(n[r])){SamsungSCloudSyncService.mContentProvider.Update("TABS",{DIRTY:1,IS_DELETED:"1",SYNC5:0},{equals:[{key:"DEVICE_ID",value:SamsungSCloudSyncService.DEVICE_ID}]},null,null)}SamsungSCloudSyncService.updateTabOperations.length>0?SamsungSCloudSyncService.mContentProvider.applyBatch(SamsungSCloudSyncService.updateTabOperations,SamsungSCloudSyncService.BrowserOverlay.updateTabOperationsCallback):SamsungSCloudSyncService.BrowserOverlay.updateTabOperationsCallback()}))}))},syncOpenTabData:function(e){var t={TAB_ID:e.id,TAB_ACTIVATE:e.active,TAB_INDEX:e.index,TAB_URL:e.url,TAB_TITLE:e.title,IS_INCOGNITO:e.incognito,DEVICE_NAME:EXT_DEVICE_NAME,DEVICE_ID:SamsungSCloudSyncService.DEVICE_ID,ACCOUNT_NAME:SamsungSCloudSyncService.ACCOUNT_NAME,ACCOUNT_TYPE:SamsungSCloudSyncService.ACCOUNT_TYPE,IS_DELETED:"0",SYNC5:0};SamsungSCloudSyncService.updateTabOperations.push(new BatchOperation("UPDATE","TABS",t,{equals:[{key:"TAB_ID",value:e.id},{key:"DEVICE_ID",value:SamsungSCloudSyncService.DEVICE_ID}]}))},updateTabOperationsCallback:function(e=[],t){SamsungSCloudSyncService.SyncLogs.log("updateTabOperations callback called"),SamsungSCloudSyncService.updateTabOperations=[];for(var n=0;n<e.length;n++)0==e[n].rowsAffected&&(t[n].DIRTY=1,0!=t[n].TAB_URL.indexOf("browser")&&0!=t[n].TAB_URL.indexOf("chrome")&&0!=t[n].TAB_URL.indexOf("opera")&&0!=t[n].TAB_URL.indexOf("file")&&0!=t[n].TAB_URL.indexOf("content")&&0!=t[n].TAB_URL.indexOf("view")&&0!=t[n].TAB_URL.indexOf("data")||(t[n].DIRTY=0),SamsungSCloudSyncService.insertDeletedTabOperations.push(new BatchOperation("INSERT","TABS",t[n],null)));SamsungSCloudSyncService.insertDeletedTabOperations.length>0?SamsungSCloudSyncService.mContentProvider.applyBatch(SamsungSCloudSyncService.insertDeletedTabOperations,SamsungSCloudSyncService.BrowserOverlay.insertDeletedTabOperationsCallback):SamsungSCloudSyncService.BrowserOverlay.insertDeletedTabOperationsCallback()},insertDeletedTabOperationsCallback:function(){SamsungSCloudSyncService.SyncLogs.log("insertDeletedTabOperationsCallback called"),SamsungSCloudSyncService.insertDeletedTabOperations=[],SamsungSCloudSyncService.currentSync},refreshSyncProcess(){if(storageLocalApi.getItem(SYNC_STATUS)!==SYNC_COMPLETED)return void SamsungSCloudSyncService.SyncLogs.log("Sync is in progress");if(!isBookmarkSyncOn()&&!isOpenTabsSyncOn())return void SamsungSCloudSyncService.SyncLogs.log("Samsung Internet Sync is disabled");const e=async()=>{await storageLocalApi.setItem(SYNC_STATUS,SYNC_STARTED),SamsungSCloudSyncService.mSyncCancelled=!1,SamsungSCloudSyncService.BrowserOverlay.onBrowserActionClicked()},t=storageLocalApi.getItem(PUSH_EXPIRE_TIME);t&&t<Date.now()?(SamsungSCloudSyncService.SyncLogs.log(`Re-Activating token as push_expire_time is old [${new Date(Number(t))}] < [${new Date}]`),updateAccessToken(storageLocalApi.getItem(ACCESS_TOKEN),!1).then(e).catch((e=>{SamsungSCloudSyncService.SyncLogs.log("Failed to re-activate in event of push_expire_time > Date.now()"),SamsungSCloudSyncService.SyncLogs.log(e)}))):e()},onLogoutClick(){SamsungSCloudSyncService.firstSyncCompleted=!1,isLoggedIn()||(SamsungSCloudSyncService.mSyncConstants=null,SamsungSCloudSyncService.isAccessToken=!1,SamsungSCloudSyncService.tokenV=null),SamsungSCloudSyncService.BrowserOverlay.onCancelSyncClick()},async onCancelSyncClick(){await storageLocalApi.setItem(SYNC_STATUS,SYNC_COMPLETED),SamsungSCloudSyncService.mSyncCancelled=!0,SamsungSCloudSyncService.mBrowserBookmarkSyncAdapter&&SamsungSCloudSyncService.mBrowserBookmarkSyncAdapter.cancelSync(),SamsungSCloudSyncService.mBrowserTabSyncAdapter&&SamsungSCloudSyncService.mBrowserTabSyncAdapter.cancelSync(),clearLocalStorage(),clearDatabase()},launchLoginPage(){SamsungSCloudSyncService.SyncLogs.log("Trying to refresh token"),refreshAccessToken(storageLocalApi.getItem(REFRESH_TOKEN)).then((({token:e,refreshToken:t,tokenExpiresIn:n,refreshTokenExpiresIn:r})=>updateAccessToken(e).then((async()=>{SamsungSCloudSyncService.SyncLogs.log("Refreshed successfully"),storeAccessToken(e),await storageLocalApi.setArrayItems([[REFRESH_TOKEN,t],[REFRESH_TOKEN_EXPIRES_IN,r]]),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess()})))).catch((e=>{SamsungSCloudSyncService.SyncLogs.log("Problem in refreshing token"),SamsungSCloudSyncService.SyncLogs.log(e),console.error(e),cleanupStateOnLogout(),chrome.runtime.sendMessage({ACCESS_TOKEN_URL_PROBLEM:"SESSION_EXPIRED"})}))},async startSync(){SamsungSCloudSyncService.mSyncCancelled||(SamsungSCloudSyncService.BrowserOverlay.resetGlobalClassObjects(),SamsungSCloudSyncService.mBrowserConstants=SamsungSCloudSyncService.mBrowserConstants||new BrowserConstants,SamsungSCloudSyncService.mSyncConstants=SamsungSCloudSyncService.mSyncConstants||new SyncConstants,SamsungSCloudSyncService.mContentProvider=SamsungSCloudSyncService.mContentProvider||new ContentProvider,SamsungSCloudSyncService.mKVSConstants=SamsungSCloudSyncService.mKVSConstants||new KVSConstants,SamsungSCloudSyncService.currentSync&&"BOOKMARK_SYNC"!=SamsungSCloudSyncService.currentSync&&isOpenTabsSyncOn()?(SamsungSCloudSyncService.SyncLogs.log("Tab Sync Started"),await storageLocalApi.setItem(SYNC_STATUS,SYNC_STARTED),SamsungSCloudSyncService.currentSync="TAB_SYNC",chrome.runtime.sendMessage({SYNC:SYNC_STARTED}),SamsungSCloudSyncService.isFixParentIDsDone=!1,SamsungSCloudSyncService.BrowserOverlay.applySyncTimeoutInterval(),SamsungSCloudSyncService.mBrowserTabSyncAdapter=new BrowserTabSyncAdapter,SamsungSCloudSyncService.mBrowserTabSyncAdapter.performSync(SamsungSCloudSyncService.mKVSConstants.SYNC_SELF),SamsungSCloudSyncService.BrowserOverlay.syncOpenedTabs()):isBookmarkSyncOn()&&(SamsungSCloudSyncService.SyncLogs.log("Bookmark Sync Started"),await storageLocalApi.setItem(SYNC_STATUS,SYNC_STARTED),SamsungSCloudSyncService.currentSync="ALL_SYNC",chrome.runtime.sendMessage({SYNC:SYNC_STARTED}),SamsungSCloudSyncService.isFixParentIDsDone=!1,SamsungSCloudSyncService.BrowserOverlay.applySyncTimeoutInterval(),SamsungSCloudSyncService.mBrowserBookmarkSyncAdapter=new BrowserBookmarkSyncAdapter,SamsungSCloudSyncService.mBrowserBookmarkSyncAdapter.performSync(SamsungSCloudSyncService.mKVSConstants.SYNC_SELF)))},resetGlobalClassObjects(){SamsungSCloudSyncService.startKey=null,SamsungSCloudSyncService.mCloudServiceManager=null,SamsungSCloudSyncService.mORSConstants=null,SamsungSCloudSyncService.recordServiceManager=null,SamsungSCloudSyncService.mNetClient=null,SamsungSCloudSyncService.mNetworkResponse=null,SamsungSCloudSyncService.mKVSResponse=null,SamsungSCloudSyncService.mICloudServiceManager=null,SamsungSCloudSyncService.mAppTool=null,SamsungSCloudSyncService.mClientDeviceId=null},updateCallback:function(e,t){e&&0==e.rowsAffected&&SamsungSCloudSyncService.mContentProvider.Insert("TABS",t)},clearTab:function(e){if(void 0!==e){SamsungSCloudSyncService.mContentProvider||(SamsungSCloudSyncService.mContentProvider=new ContentProvider),SamsungSCloudSyncService.mContentProvider.Update("TABS",{DIRTY:1,IS_DELETED:"1",SYNC5:0},{equals:[{key:"TAB_ID",value:e}],equals:[{key:"DEVICE_ID",value:SamsungSCloudSyncService.DEVICE_ID}]})}},onLoad(){SamsungSCloudSyncService.tokenV=storageLocalApi.getItem(ACCESS_TOKEN),SamsungSCloudSyncService.tokenV&&(SamsungSCloudSyncService.BrowserOverlay.clearAutoSyncTimeoutInterval(!1),fetchUserInfo()),SamsungSCloudSyncService.BrowserOverlay.resetSyncKey()},resetSyncKey(){SamsungSCloudSyncService.mContentProvider=SamsungSCloudSyncService.mContentProvider||mContentProvider||new ContentProvider,SamsungSCloudSyncService.mContentProvider.Query("BOOKMARKS",["_ID","SYNC1"],null,[],null,SamsungSCloudSyncService.BrowserOverlay.resetBookmarkSyncKey),SamsungSCloudSyncService.mContentProvider.Query("TABS",["_ID","SYNC1"],null,[],null,SamsungSCloudSyncService.BrowserOverlay.resetTabSyncKey)},resetTabSyncKey(e){if(e){SamsungSCloudSyncService.updateTabSyncKeyOperations=[];const t=Date.now();for(let n=0;n<e.length;n++){const r=e[n];if(null!=r.SYNC1&&void 0!==r.SYNC1&&r.SYNC1.match(SamsungSCloudSyncService.OLD_SYNC_KEY)){const e={SYNC1:EXT_DEVICE_ID,DIRTY:1,SYNC5:t};SamsungSCloudSyncService.updateTabSyncKeyOperations.push(new BatchOperation("UPDATE","TABS",e,{equals:[{key:"_ID",value:r._ID}]}))}}SamsungSCloudSyncService.updateTabSyncKeyOperations.length>0&&SamsungSCloudSyncService.mContentProvider.applyBatch(SamsungSCloudSyncService.updateTabSyncKeyOperations,SamsungSCloudSyncService.BrowserOverlay.updateTabSyncKeyOperationsCallback)}},updateTabSyncKeyOperationsCallback(){SamsungSCloudSyncService.updateTabSyncKeyOperations=[]},resetBookmarkSyncKey(e){if(e){SamsungSCloudSyncService.updateBookmarkSyncKeyOperations=[];const t=Date.now();for(let n=0;n<e.length;n++){const r=e[n];if(null!=r.SYNC1&&void 0!==r.SYNC1&&r.SYNC1.match(SamsungSCloudSyncService.OLD_SYNC_KEY)){const e={SYNC1:EXT_DEVICE_ID,DIRTY:1,SYNC5:t};SamsungSCloudSyncService.updateBookmarkSyncKeyOperations.push(new BatchOperation("UPDATE","BOOKMARKS",e,{equals:[{key:"_ID",value:r._ID}]}))}}SamsungSCloudSyncService.updateBookmarkSyncKeyOperations.length>0&&SamsungSCloudSyncService.mContentProvider.applyBatch(SamsungSCloudSyncService.updateBookmarkSyncKeyOperations,SamsungSCloudSyncService.BrowserOverlay.updateBookmarkSyncKeyOperationsCallback)}},updateBookmarkSyncKeyOperationsCallback(){SamsungSCloudSyncService.updateBookmarkSyncKeyOperations=[]},randomUUID(){const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase();return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`},async onAccessTokenExpire(){SamsungSCloudSyncService.mContentProvider=SamsungSCloudSyncService.mContentProvider||new ContentProvider,SamsungSCloudSyncService.firstSynced=!1,SamsungSCloudSyncService.mSyncConstants=null,SamsungSCloudSyncService.isAccessToken=!1,SamsungSCloudSyncService.tokenV=null,await storageLocalApi.setArrayItems([[BOOKMARK_SERVER_TIME,0],[TAB_SERVER_TIME,0],[IS_LOGGED_OUT,0],[DEVICE_NAME,""],[ACCESS_TOKEN,""],[SYNC_STATUS,""]]),SamsungSCloudSyncService.mContentProvider.Delete("TABS","DEVICE_ID NOT LIKE %Desktop% AND DEVICE_NAME != "+SamsungSCloudSyncService.DEVICE_NAME,null,null),SamsungSCloudSyncService.mContentProvider.Update("TABS",{DIRTY:1,IS_DELETED:"1",SYNC5:0},"DEVICE_NAME = "+SamsungSCloudSyncService.DEVICE_NAME,null,SamsungSCloudSyncService.BrowserOverlay.deleteTabsCallback)},deleteTabsCallback:function(){SamsungSCloudSyncService.mContentProvider.Delete("BOOKMARKS","DEVICE_ID NOT LIKE %Desktop% AND DEVICE_NAME != "+SamsungSCloudSyncService.DEVICE_NAME,null,null);var e=Date.now(),t={DIRTY:1,IS_DELETED:"1",MODIFIED:e,SYNC5:e};SamsungSCloudSyncService.mContentProvider.Update("BOOKMARKS",t,"DEVICE_NAME = "+SamsungSCloudSyncService.DEVICE_NAME,null,SamsungSCloudSyncService.BrowserOverlay.deleteBookmarksCallback)},deleteBookmarksCallback:async function(){await storageLocalApi.setItem("isLoggedOut",0),chrome.runtime.sendMessage({ACCESS_TOKEN_URL_PROBLEM:"SESSION_EXPIRED"}),SamsungSCloudSyncService.isSyncTabLaunched=!1,SamsungSCloudSyncService.isLoginTabLaunched=!0,SamsungSCloudSyncService.browserActionClicked=!1,SamsungSCloudSyncService.BrowserOverlay.clearAutoSyncTimeoutInterval(!0)}},chrome.runtime.onStartup.addListener((async()=>{await storageLocalApi.waitForAvailable(),storageLocalApi.getItem(SYNC_STATUS)===SYNC_STARTED&&await storageLocalApi.setItem(SYNC_STATUS,SYNC_COMPLETED),SamsungSCloudSyncService.BrowserOverlay.onLoad()})),chrome.tabs.onCreated.addListener((function(e){if(e.url!=SamsungSCloudSyncService.LAUNCH_URL&&e.url!=SamsungSCloudSyncService.NEW_TAB_URL||(SamsungSCloudSyncService.NEW_TAB_URL_ID=e.id),null!=SamsungSCloudSyncService.DEVICE_NAME){var t={TAB_ID:e.id,TAB_ACTIVATE:e.active,TAB_INDEX:e.index,TAB_URL:e.url,TAB_TITLE:e.title,IS_INCOGNITO:e.incognito,DEVICE_NAME:EXT_DEVICE_NAME,DEVICE_ID:SamsungSCloudSyncService.DEVICE_ID,ACCOUNT_NAME:SamsungSCloudSyncService.ACCOUNT_NAME,ACCOUNT_TYPE:SamsungSCloudSyncService.ACCOUNT_TYPE,DIRTY:1,IS_DELETED:"0",SYNC5:0,DATE_CREATED:AbstractSyncAdapterGlobal.mTimeManager.getCurrentTime(),DATE_MODIFIED:AbstractSyncAdapterGlobal.mTimeManager.getCurrentTime()};0!=e.url.indexOf("browser")&&0!=e.url.indexOf("chrome")&&0!=e.url.indexOf("opera")&&0!=e.url.indexOf("file")&&0!=e.url.indexOf("view")&&0!=e.url.indexOf("content")&&0!=e.url.indexOf("data")||(t.DIRTY=0),SamsungSCloudSyncService.mContentProvider||(SamsungSCloudSyncService.mContentProvider=new ContentProvider),SamsungSCloudSyncService.mContentProvider.Insert("TABS",t,null)}})),chrome.tabs.onUpdated.addListener((function(e,t,n){if("complete"==t.status&&(n.id==SamsungSCloudSyncService.NEW_TAB_URL_ID&&(n.url!=SamsungSCloudSyncService.NEW_TAB_URL&&n.url!=SamsungSCloudSyncService.LAUNCH_URL&&null!=SamsungSCloudSyncService.DEVICE_NAME?(SamsungSCloudSyncService.isSyncTabLaunched=!1,SamsungSCloudSyncService.NEW_TAB_URL_ID=null):null!=storageLocalApi.getItem(ACCESS_TOKEN)&&(n.url!=SamsungSCloudSyncService.NEW_TAB_URL&&n.url!=SamsungSCloudSyncService.LAUNCH_URL&&(SamsungSCloudSyncService.NEW_TAB_URL_ID=null),SamsungSCloudSyncService.isSyncTabLaunched=!0,SamsungSCloudSyncService.isLoginTabLaunched=!1,SamsungSCloudSyncService.firstSynced||setTimeout("SamsungSCloudSyncService.BrowserOverlay.syncOpenedTabs()",1e3))),SamsungSCloudSyncService.firstSynced)){var r={TAB_ID:n.id,TAB_ACTIVATE:n.active,TAB_INDEX:n.index,TAB_URL:n.url,TAB_TITLE:n.title,IS_INCOGNITO:n.incognito,DEVICE_NAME:EXT_DEVICE_NAME,DEVICE_ID:SamsungSCloudSyncService.DEVICE_ID,ACCOUNT_NAME:SamsungSCloudSyncService.ACCOUNT_NAME,ACCOUNT_TYPE:SamsungSCloudSyncService.ACCOUNT_TYPE,DIRTY:1,IS_DELETED:"0",SYNC5:0,DATE_MODIFIED:AbstractSyncAdapterGlobal.mTimeManager.getCurrentTime()};0!=n.url.indexOf("browser")&&0!=n.url.indexOf("chrome")&&0!=n.url.indexOf("opera")&&0!=n.url.indexOf("file")&&0!=n.url.indexOf("view")&&0!=n.url.indexOf("content")&&0!=n.url.indexOf("data")||(r.DIRTY=0),SamsungSCloudSyncService.mContentProvider||(SamsungSCloudSyncService.mContentProvider=new ContentProvider),SamsungSCloudSyncService.mContentProvider.Update("TABS",r,{equals:[{key:"TAB_ID",value:n.id},{key:"DEVICE_ID",value:SamsungSCloudSyncService.DEVICE_ID}]},null,SamsungSCloudSyncService.BrowserOverlay.updateCallback)}})),chrome.tabs.onRemoved.addListener((function(e){e==SamsungSCloudSyncService.NEW_TAB_URL_ID?(SamsungSCloudSyncService.NEW_TAB_URL_ID=null,SamsungSCloudSyncService.isSyncTabLaunched=!1,SamsungSCloudSyncService.isLoginTabLaunched=!1):SamsungSCloudSyncService.firstSyncCompleted&&SamsungSCloudSyncService.BrowserOverlay.clearTab(e)})),chrome.runtime.onMessage.addListener(((e,t,n)=>{const{BUTTON:r,ACCESS_TOKEN_URL:o,IMPORT_BOOKMARKS:s,STATUS:i=null}=e;switch(r){case"FETCH_LOGIN":default:break;case"BOOKMARK_SYNC":chrome.runtime.sendMessage({SYNC:"BOOKMARK_SYNC_STARTED"}),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess();break;case"TAB_SYNC":chrome.runtime.sendMessage({SYNC:"TAB_SYNC_STARTED"}),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess();break;case"LOGOUT":SamsungSCloudSyncService.BrowserOverlay.onLogoutClick()}if(o&&SamsungSCloudSyncService.BrowserOverlay.onAccessTokenReceived(o),s){const e=IMPORTED_FOLDER_IDS[getBrowserName().toUpperCase()];let t;switch(s){case"overwrite":t=importLocalBookmarksAndOverwrite({_ID:e});break;case"replace":t=importLocalBookmarksAndReplace({_ID:e})}t&&t.then((e=>updateModifiedOfImportFolder().then((t=>{SamsungSCloudSyncService.SyncLogs.log("Import complete!"),n({length:e})}))),(e=>{SamsungSCloudSyncService.SyncLogs.log("Import failure!"),SamsungSCloudSyncService.SyncLogs.log(e),n({err:e})}))}switch(i){case"LOGGED_IN":chrome.action.setIcon({path:"assets/img/logo32x32.png"});break;case"LOGGED_OUT":chrome.action.setIcon({path:"assets/img/logo32x32_gray.png"})}return!0})),chrome.commands.onCommand.addListener((e=>{chrome.tabs.query({active:!0,currentWindow:!0},(([{url:e,title:t}])=>{isLoggedIn()?addBookmark({url:e,title:t}).then((()=>bookmarkSavedNotif({title:t,url:e}))).catch((e=>notify({title:ERROR_STRING,body:e}))):notify({title:ERROR_STRING,body:NOTIFICATION_SIGIN_ERROR})}))})),chrome.action.onClicked.addListener((e=>{if(SamsungSCloudSyncService.SyncLogs.log("BrowserAction clicked"),isLoggedIn())return void chrome.action.setPopup({popup:POPUP_URL});chrome.windows.getCurrent((e=>storageLocalApi.setItem(PARENT_WINDOW,e.id)));const t=POPUP_URL;windowPopupWithURLExists(["login-load.html",t,"https://account.samsung.cn/mobile/account/","https://account.samsung.com/mobile/account/","https://account.samsung.com/accounts/"]).then((({win:e,tab:t})=>{SamsungSCloudSyncService.SyncLogs.log({win:e,tab:t}),SamsungSCloudSyncService.SyncLogs.log("Window already open, bringing to focus"),chrome.windows.update(e.id,{focused:!0})})).catch((()=>{SamsungSCloudSyncService.SyncLogs.log("Window not open, creating new");const e=isLoggedIn()?t:"login-load.html";getWindowOptions().then((t=>chrome.windows.create(Object.assign({},t,{url:e}),(e=>{isLoggedIn()||onFetchLoginMessage({win:e,tab:e.tabs[0]})}))))}))})),chrome.bookmarks.onChanged.addListener(importAvailable),chrome.bookmarks.onCreated.addListener(importAvailable),chrome.bookmarks.onRemoved.addListener(importAvailable),chrome.bookmarks.onMoved.addListener(importAvailable),chrome.bookmarks.onChildrenReordered.addListener(importAvailable),storageLocalApi.waitForAvailable().then((()=>{1==storageLocalApi.getItem(IS_LOGGED_OUT)&&(chrome.action.setPopup({popup:POPUP_URL}),chrome.action.setIcon({path:"assets/img/logo32x32.png"})),storageLocalApi.getItem(HAS_SEEN_GUIDE)||storageLocalApi.setItem(HAS_SEEN_GUIDE,"true").then((()=>{chrome.tabs.create({url:"guide-page.html"})}))})),setTimeout(onInit,100);class BrowserConstants{constructor(){this.BROWSER_TAB_URI="TABS",this.BROWSER_BOOKMARK_URI="BOOKMARKS",this.CALLER_IS_SYNCADAPTER="caller_is_syncadapter",this.EXT_DEVICE_ID="50435f457874656e73696f6e",this.EXT_DEVICE_NAME="PC_Extension",this.TABS={},this.BOOKMARKS={},this.initializeTABS(),this.initializeBOOKMARKS()}initializeTABS(){this.TABS._ID="_ID",this.TABS.TAB_ID="TAB_ID",this.TABS.TAB_INDEX="TAB_INDEX",this.TABS.TAB_URL="TAB_URL",this.TABS.TAB_TITLE="TAB_TITLE",this.TABS.TAB_FAV_ICON="TAB_FAV_ICON",this.TABS.TAB_ACTIVATE="TAB_ACTIVATE",this.TABS.IS_INCOGNITO="IS_INCOGNITO",this.TABS.IS_DELETED="IS_DELETED",this.TABS.ACCOUNT_NAME="ACCOUNT_NAME",this.TABS.ACCOUNT_TYPE="ACCOUNT_TYPE",this.TABS.DATE_CREATED="DATE_CREATED",this.TABS.DATE_MODIFIED="DATE_MODIFIED",this.TABS.DIRTY="DIRTY",this.TABS.SYNC1="SYNC1",this.TABS.SYNC2="SYNC2",this.TABS.SYNC3="SYNC3",this.TABS.SYNC4="SYNC4",this.TABS.SYNC5="SYNC5",this.TABS.DEVICE_NAME="DEVICE_NAME",this.TABS.DEVICE_ID="DEVICE_ID",this.TABS.DEVICE_TYPE="DEVICE_TYPE",this.TABS.TAB_USAGE="TAB_USAGE"}initializeBOOKMARKS(){this.BOOKMARKS._ID="_ID",this.BOOKMARKS.BOOKMARK_ID="BOOKMARK_ID",this.BOOKMARKS.URL="URL",this.BOOKMARKS.TITLE="TITLE",this.BOOKMARKS.FAVICON="FAVICON",this.BOOKMARKS.DATE_CREATED="CREATED",this.BOOKMARKS.IS_FOLDER="FOLDER",this.BOOKMARKS.PARENT="PARENT",this.BOOKMARKS.POSITION="POSITION",this.BOOKMARKS.INSERT_AFTER="INSERT_AFTER",this.BOOKMARKS.TAGS="TAGS",this.BOOKMARKS.SOURCE_ID="SOURCEID",this.BOOKMARKS.DATE_MODIFIED="MODIFIED",this.BOOKMARKS.DIRTY="DIRTY",this.BOOKMARKS.IS_DELETED="IS_DELETED",this.BOOKMARKS.ACCOUNT_NAME="ACCOUNT_NAME",this.BOOKMARKS.ACCOUNT_TYPE="ACCOUNT_TYPE",this.BOOKMARKS.DEVICE_NAME="DEVICE_NAME",this.BOOKMARKS.DEVICE_ID="DEVICE_ID",this.BOOKMARKS.SYNC1="SYNC1",this.BOOKMARKS.SYNC2="SYNC2",this.BOOKMARKS.SYNC3="SYNC3",this.BOOKMARKS.SYNC4="SYNC4",this.BOOKMARKS.SYNC5="SYNC5",this.BOOKMARKS.DOMINANT_COLOR="DOMINANT_COLOR"}}function CID(){this.BROWSER_TABS="P56GWW8N4r",this.BROWSER_BOOKMARKS="4OuNBe4y9z"}function SyncConstants(){this.ACCOUNT_TYPE=SamsungSCloudSyncService.ACCOUNT_TYPE,this.ACCOUNT_NAME=SamsungSCloudSyncService.ACCOUNT_NAME,this.REQUEST_POST=0,this.REQUEST_GET=1,this.REQUEST_POST_MULTIPART=2,this.REQUEST_GET_FILE=4,this.REQUEST_GET_META=5}function SyncUnit(){this.BROWSER_BOOKMARK=BOOKMARK_SERVER_TIME,this.BROWSER_TAB=BROWSER_TAB,this.BROWSER_BOOKMARK_KEY="BR",this.BROWSER_TAB_KEY="ST"}function AuthManager(){this.mClientID=APP_ID,this.mUserId=null,this.mAccessToken=null,this.mRegistrationID=null,this.mBaseUrlPrimary=null,this.mBaseUrlSecondary=null,this.mGetAPIparms=null,this.mPutAPIparms=null,this.mGld_mcc_region=null,this.mGld_user_region=null,this.mGlobalUserId=null,this.INFO_OK=0,this.getGetApiParams=function(e){return SamsungSCloudSyncService.mServerCommonConstants||(SamsungSCloudSyncService.mServerCommonConstants=new ServerCommonConstants),this.getGetApiParamsWithoutCid()+SamsungSCloudSyncService.mServerCommonConstants.CID_PARM+e},this.getPutApiParams=function(e){return SamsungSCloudSyncService.mServerCommonConstants||(SamsungSCloudSyncService.mServerCommonConstants=new ServerCommonConstants),this.getPutAPIParamsWithoutCid()+SamsungSCloudSyncService.mServerCommonConstants.CID_PARM+e},this.getGetApiParamsWithoutCid=function(){return this.mGetAPIparms=storageLocalApi.getItem("mGetAPIparms"),this.mGetAPIparms},this.getPutAPIParamsWithoutCid=function(){return this.mPutAPIparms=storageLocalApi.getItem("mPutAPIparms"),this.mPutAPIparms},this.getBaseUrl=function(){return this.mBaseUrlPrimary=storageLocalApi.getItem("mBaseUrlPrimary"),this.mBaseUrlPrimary},this.setAccessToken=function(e,t=!1){return void 0!==e?(this.mAccessToken=e,this.mUserId=SamsungSCloudSyncService.USER_ID||storageLocalApi.getItem(USER_ID),t||this.fetchUserInfo(),isFromChina().then((async e=>{this.mBaseUrlPrimary=e?"cn-api.samsungcloud.com":"api.samsungcloud.com",SamsungSCloudSyncService.mServerCommonConstants=SamsungSCloudSyncService.mServerCommonConstants||new ServerCommonConstants,this.mGetAPIparms=SamsungSCloudSyncService.mServerCommonConstants.USER_ID_PARM+this.mUserId+SamsungSCloudSyncService.mServerCommonConstants.ACCESS_TOKEN_PARM+this.mAccessToken,this.mPutAPIparms=`${this.mGetAPIparms+SamsungSCloudSyncService.mServerCommonConstants.DEVICE_ID_PARM}testdid`,await storageLocalApi.setArrayItems([[PRIMARY_BASE_URL,this.mBaseUrlPrimary],[ACCESS_TOKEN_GET_PARAMS,this.mGetAPIparms],[ACCESS_TOKEN_PUT_PARAMS,this.mPutAPIparms],[IS_LOGGED_OUT,1]]),SamsungSCloudSyncService.BrowserOverlay.onBrowserActionClicked()}))):Promise.reject(`INVALID_TOKEN_VALUE (${e})`)},this.fetchUserInfo=function(){const e=APIS.ACTIVATE_TOKEN,t=navigator.platform.replace(/\s/gi,"_"),n=storageLocalApi.getItem(CLIENT_IP)||"",r=`${t}_${getBrowserName()}_${EXT_DEVICE_ID}_${n}`,o=`${e}?${[`uid=${this.mUserId}`,`access_token=${this.mAccessToken}`,`app_id=${APP_ID}`,`device_id=${r}`,"register=true","model=PC-EXTENSION"].join("&").trim()}`,s=new Headers,i=sha256(`${this.mUserId}:${this.mAccessToken}:${APP_ID}:${r}`);s.append("Content-Type","application/json"),s.append("x-sc-hash",i),SamsungSCloudSyncService.SyncLogs.log("Initiating Activate API"),SamsungSCloudSyncService.SyncLogs.log(JSON.stringify({uid:this.mUserId,access_token:this.mAccessToken,APP_ID:APP_ID,deviceID:r,hash:i}));const a=JSON.stringify({device_info:{device_os:"9",device_type:"05",device_os_version:"3.0"}});return fetch(o,{headers:s,method:"POST",body:a}).then((e=>200!==e.status?Promise.reject({error:"Status error",status:e.status}):e.json())).then((e=>0===e.rcode?e:(SamsungSCloudSyncService.SyncLogs.log(JSON.stringify(e,null,2)),Promise.reject({error:"Access token problem",data:{res:e}})))).then((async e=>{SamsungSCloudSyncService.SyncLogs.log("Authorization successful"),await storageLocalApi.setItem(PUSH_EXPIRE_TIME,e.push_expire_time)})).catch((e=>(SamsungSCloudSyncService.SyncLogs.log(`Access token url problem: ${e.error}`),chrome.runtime.sendMessage({ACCESS_TOKEN_URL_PROBLEM:"NETWORK_ERROR"}),Promise.reject(e.error))))},this.cleanup=function(){this.mUserId=null,this.mAccessToken=null,this.mRegistrationID=null,this.mBaseUrlPrimary=null,this.mGetAPIparms=null,this.mPutAPIparms=null,this.mBaseUrlSecondary=null}}function SQLResultSet(){this.insertId="",this.rows=[],this.rowsAffected=0}function IndexedDBHandler(){this.isConnected=null,this.transaction=null,this.db=null}function ContentProvider(){this.DBHandler=this.DBHandler||new IndexedDBHandler,this.DBHandler.connect(),this.InputSanitization=function(e){const t=`${e}`.split("'");let n="";for(let e=0;e<t.length;e++)n+=t[e],e!=t.length-1&&(n+="''");let r="";const o=n.split('"');for(let e=0;e<o.length;e++)r+=o[e],e!=o.length-1&&(r+="");return r},this.Insert=function(e,t,n){const r={};Object.keys(t).forEach((e=>{r[e.toUpperCase()]=t[e]})),this.DBHandler.add(e,r,(function(e){e?e.rowsAffected&&n&&n(e.rowsAffected):n&&n(e)}))},this.bulkInsert=function(e,t,n){for(let r=0;r<t.length;r++){let o=`INSERT INTO ${e}`,s="(",i="VALUES (";const a=Object.keys(t[r]);for(let e=0;e<a.length;e++){const n=t[r][a[e]];i+=null===n?"NULL":`'${this.InputSanitization(n)}'`,s+=a[e],e!=a.length-1&&(i+=",",s+=",")}s+=")",i+=")",o+=`${s} ${i}`;const c=function(e){e&&n&&n(e.rowsAffected)};this.DBHandler.add(e,t,c)}},this.Delete=function(e,t,n,r){this.DBHandler.del(e,t).then((function(e){r&&e&&("number"==typeof e.rowsAffected?r(e.rowsAffected):r(e))}))},this.Query=function(e,t,n,r,o,s){s&&this.DBHandler.query(e,t,n,o).then((function(e){s&&(e&&e.rows?(SamsungSCloudSyncService.SyncLogs.log("QUERY_STRING response "+e.rows.length),s(e.rows)):(SamsungSCloudSyncService.SyncLogs.log("QUERY_STRING response "+e),s(e)))}))},this.Update=function(e,t,n,r,o){const s=Object.keys(t),i={};s.forEach((e=>{i[e.toUpperCase()]=t[e]})),this.DBHandler.update(e,i,n).then((function(e){o&&(e&&e.rows,o(e,t))}))},this.normalCallback=function(e,t){SamsungSCloudSyncService.ContentProviderGlobal.batchResult.push(e),SamsungSCloudSyncService.ContentProviderGlobal.batchResultValues.push(t)},this.finalCallback=function(e,t){SamsungSCloudSyncService.ContentProviderGlobal.batchResult.push(e),SamsungSCloudSyncService.ContentProviderGlobal.batchResultValues.push(t),null!=SamsungSCloudSyncService.ContentProviderGlobal.batchCallBack&&SamsungSCloudSyncService.ContentProviderGlobal.batchCount==SamsungSCloudSyncService.ContentProviderGlobal.batchResult.length&&SamsungSCloudSyncService.ContentProviderGlobal.batchCallBack(SamsungSCloudSyncService.ContentProviderGlobal.batchResult,SamsungSCloudSyncService.ContentProviderGlobal.batchResultValues)},this.applyBatch=function(e,t){this.batchCount=e.length,this.batchResult=[],this.batchResultValues=[],this.batchCallBack=t,e.forEach(((e,t)=>{const n=this.finalCallback;null!=e.operation.match(/INSERT/g)?this.Insert(e.uri,e.values,n):null!=e.operation.match(/DELETE/g)?this.Delete(e.uri,e.selection,e.selectionArgs,n):null!=e.operation.match(/UPDATE/g)?this.Update(e.uri,e.values,e.selection,e.selectionArgs,n):null!=e.operation.match(/QUERY/g)&&this.Query(e.uri,e.values,e.selection,e.selectionArgs,e.sortOrder,n)}))},this.UpdateMultiple=function(e,t,n,r,o){this.DBHandler.UpdateMultiple(e,t,n).then((function(e){o&&(e&&e.rows,o(e))}))},this.getMaxValueByKey=function(e,t,n){this.DBHandler.getMaxValueByKey(e,t).then(n)},this.getMax=function(e,t,n,r){this.DBHandler.getMax(e,t,n).then(r)},this.clear=function(e){this.DBHandler.clear(e),storageLocalApi.removeItem("LAST_SYNCED")},SamsungSCloudSyncService.ContentProviderGlobal=this}function BatchOperation(e,t,n,r,o,s){this.operation=e,this.uri=t,this.values=n,this.selection=r,this.selectionArgs=o,this.sortOrder=s}IndexedDBHandler.prototype={connect(){const e=indexedDB.open("SamsungSCloudSyncStorage",3);e.onupgradeneeded=e=>{const t=e.target.result;t.onerror=e=>{console.log(e)};const n=t.objectStoreNames;let r,o;r=n.contains("BOOKMARKS")?e.target.transaction.objectStore("BOOKMARKS"):t.createObjectStore("BOOKMARKS",{keyPath:"_ID"}),r.indexNames.contains("_ID")||r.createIndex("_ID","_ID",{unique:!0}),r.indexNames.contains("POSITION")||r.createIndex("POSITION","POSITION"),r.indexNames.contains("SYNC3")||r.createIndex("SYNC3","SYNC3"),r.indexNames.contains("SYNC4")||r.createIndex("SYNC4","SYNC4"),r.indexNames.contains("FOLDER")||r.createIndex("FOLDER","FOLDER"),r.indexNames.contains("IS_DELETED")||r.createIndex("IS_DELETED","IS_DELETED"),r.indexNames.contains("ACCOUNT_TYPE")||r.createIndex("ACCOUNT_TYPE","ACCOUNT_TYPE"),r.indexNames.contains("ACCOUNT_NAME")||r.createIndex("ACCOUNT_NAME","ACCOUNT_NAME"),r.indexNames.contains("DIRTY")||r.createIndex("DIRTY","DIRTY"),r.indexNames.contains("TITLE")||r.createIndex("TITLE","TITLE"),r.indexNames.contains("PARENT")||r.createIndex("PARENT","PARENT"),r.indexNames.contains("URL")||r.createIndex("URL","URL"),o=n.contains("TABS")?e.target.transaction.objectStore("TABS"):t.createObjectStore("TABS",{keyPath:"_ID"}),o.indexNames.contains("_ID")||o.createIndex("_ID","_ID",{unique:!0}),o.indexNames.contains("ACCOUNT_NAME")||o.createIndex("ACCOUNT_NAME","ACCOUNT_NAME"),o.indexNames.contains("ACCOUNT_TYPE")||o.createIndex("ACCOUNT_TYPE","ACCOUNT_TYPE"),o.indexNames.contains("DEVICE_ID")||o.createIndex("DEVICE_ID","DEVICE_ID"),o.indexNames.contains("DEVICE_NAME")||o.createIndex("DEVICE_NAME","DEVICE_NAME"),o.indexNames.contains("DIRTY")||o.createIndex("DIRTY","DIRTY"),o.indexNames.contains("IS_DELETED")||o.createIndex("IS_DELETED","IS_DELETED"),o.indexNames.contains("IS_INCOGNITO")||o.createIndex("IS_INCOGNITO","IS_INCOGNITO"),o.indexNames.contains("TAB_ACTIVATE")||o.createIndex("TAB_ACTIVATE","TAB_ACTIVATE"),o.indexNames.contains("TAB_ID")||o.createIndex("TAB_ID","TAB_ID"),o.indexNames.contains("TAB_INDEX")||o.createIndex("TAB_INDEX","TAB_INDEX"),o.indexNames.contains("TAB_TITLE")||o.createIndex("TAB_TITLE","TAB_TITLE"),o.indexNames.contains("TAB_URL")||o.createIndex("TAB_URL","TAB_URL"),o.indexNames.contains("SYNC5")||o.createIndex("SYNC5","SYNC5")},e.onsuccess=async()=>{this.db=e.result,this.db.addEventListener("close",(()=>{console.log("Database connection closed")})),this.isConnected=!0},e.onerror=e=>{console.log(e),SamsungSCloudSyncService.SyncLogs.log("Connect to database error "+e.message),this.isConnected=!1}},async waitConnected(){const e=e=>new Promise((t=>setTimeout(t,e)));for(;null===this.isConnected;)await e(200);return!0},updateAll(e,t,n){this.transaction=this.db.transaction([e],"readwrite").objectStore(e)},cancelUpdateAll(e){this.transaction.abort()},getRequestByIndex(e,t){let n;const r=t&&t.equals&&t.equals.length>0?t.equals[0].key:null;if(r){const o=e.index(r),s=t.equals[0].value;try{n=o.getAll(IDBKeyRange.only(s))}catch(e){console.log("getAll ",e,s)}}return n||(n=e.getAll()),n},filter(e,t,n){let r=[],o=[],s=[],i=[],a=[],c=e;if(t&&(t.equals&&(r=t.equals),t.likes&&(o=t.likes),t.ins&&(s=t.ins),t.not_likes&&(i=t.not_likes),t.empty&&(a=t.empty)),r.length&&r.forEach((e=>{c=c.filter((t=>t[e.key]==e.value))})),o.length&&o.forEach((e=>{c=c.filter((t=>t[e.key].indexOf(e.value)>=0))})),s.length&&s.forEach((e=>{c=c.filter((t=>e.value.map((e=>e+"")).indexOf(t[e.key]+"")>=0))})),i.length&&i.forEach((e=>{c=c.filter((t=>t[e.key].indexOf(e.value)<0))})),a.length&&a.forEach((e=>{c=c.filter((t=>null==t[e.key]||null==t[e.key]||""==t[e.key]))})),n&&n.length&&Array.isArray(n)){const e=n.filter((e=>e.indexOf(" as ")>0));if(e.length){const t=[];e.forEach((e=>{t.push(e.split("as"))})),c.forEach((e=>{t.forEach((t=>{e[t[1].trim()]=e[t[0].trim()]}))}))}}return c.sort(((e,t)=>{if(e.POSITION&&t.POSITION){if(e.POSITION>t.POSITION)return 1;if(e.POSITION<t.POSITION)return-1}else{if(e.CREATED>t.CREATED)return 1;if(e.CREATED<t.CREATED)return-1}return 0})),c},query(e,t,n,r){return new Promise((async(r,o)=>{await this.waitConnected();const s=this.db.transaction([e],"readwrite").objectStore(e),i=new SQLResultSet;let a=this.getRequestByIndex(s,n);a.onsuccess=e=>{let o=a.result&&a.result.value?a.result.value:a.result||[];o.length?i.rows=this.filter(o,n,t):i.rows=o,r(i)},a.onerror=e=>{o(e)}}))},async add(e,t,n){await this.waitConnected();const r=this.db.transaction([e],"readwrite").objectStore(e),o=new SQLResultSet;var s=r.index("_ID").openCursor(null,"prev");s.onsuccess=e=>{const s=e?.target?.result?.value?._ID||0;t.IS_DELETED||(t.IS_DELETED="0"),t._ID||(t._ID=s+1);const i=r.add(t);i.onsuccess=()=>{o.rows.push(t),o.rowsAffected=1,n(o)},i.onerror=e=>{console.log("(IndexedDB add) Error: ",e),n(o)}},s.onerror=e=>{console.log("(IndexedDB add) Error: ",e),n(o)}},update(e,t,n){return new Promise((async(r,o)=>{await this.waitConnected();const s=this.db.transaction([e],"readwrite"),i=s.objectStore(e),a=new SQLResultSet;let c=this.getRequestByIndex(i,n);c.onsuccess=e=>{let s,S=c.result&&c.result.value?c.result.value:c.result||[];if(s=S.length?this.filter(S,n,null):S,!s||0==s.length)return r(a);const u=[IMPORTED_FOLDER_IDS.CHROME,IMPORTED_FOLDER_IDS.EDGE,IMPORTED_FOLDER_IDS.OPERA];s.forEach((e=>{const n=e._ID,r=Object.assign({},e,t),s=i.put(r);s.onsuccess=()=>{a.rows.push(r),u.includes(r._ID)&&!u.includes(n)&&i.delete(n)},s.onerror=e=>{o(e)}}))},c.onerror=e=>{o(e)},s.oncomplete=()=>{r(a)}}))},UpdateMultiple(e,t,n){return new Promise((async(r,o)=>{await this.waitConnected();const s=this.db.transaction([e],"readwrite"),i=s.objectStore(e),a=new SQLResultSet;let c=this.getRequestByIndex(i,n);c.onsuccess=()=>{let e,s=c.result&&c.result.value?c.result.value:c.result||[];if(e=s.length?this.filter(s,n,null):s,!e||0==e.length)return r(a);e.forEach((e=>{const n=Object.assign({},e,t[e._ID]),r=i.put(n);r.onsuccess=()=>{a.rows.push(e)},r.onerror=e=>{o(e)}}))},c.onerror=e=>{o(e)},s.oncomplete=()=>{r(a)}}))},async del(e,t){return new Promise((async(n,r)=>{await this.waitConnected();const o=(await this.query(e,null,t)).rows,s=new SQLResultSet;if(o&&o.length){const t=this.db.transaction([e],"readwrite"),r=t.objectStore(e);o.forEach((e=>{r.delete(e._ID),s.rows.push(e)})),t.oncomplete=()=>{n(s)}}else n(s)}))},async getMax(e,t,n){return new Promise((async(r,o)=>{await this.waitConnected();const s=(await this.query(e,null,n)).rows;let i="";s.forEach((e=>{(!i||i<e[t])&&(i=e[t])})),r(i>0?i:0)}))},async getMaxValueByKey(e,t){return new Promise((async(n,r)=>{await this.waitConnected();var o=this.db.transaction([e],"readonly").objectStore(e).index(t).openCursor(null,"prev");o.onsuccess=e=>{e.target&&e.target.result&&e.target.result.value?n(e.target.result.value[t]>=0?e.target.result.value[t]:0):n(0)},o.onerror=e=>{n(0)}}))},clear(e){try{const t=this.db.transaction(["BOOKMARKS","TABS"],"readwrite");if(e)t.objectStore(e).clear();else{const e=t.objectStore("BOOKMARKS"),n=t.objectStore("TABS");e.clear(),n.clear()}}catch(e){console.log(e)}}};const DB={Query:{bookmarks:({selection:e=[],where:t=null,selectionArgs:n=null,sortOrder:r=null})=>new Promise(((o,s)=>mContentProvider.Query("BOOKMARKS",e,t,n,r,(e=>o(e))))),tabs:({selection:e=[],where:t=null,selectionArgs:n=null,sortOrder:r=null})=>new Promise(((o,s)=>mContentProvider.Query("TABS",e,t,n,r,(e=>o(e)))))},Update:{bookmarks:({newData:e,where:t=null,selectionArgs:n=null})=>new Promise(((r,o)=>mContentProvider.Update("BOOKMARKS",e,t,n,(e=>r(e))))),tabs:({newData:e,where:t=null,selectionArgs:n=null})=>new Promise(((r,o)=>mContentProvider.Update("TABS",e,t,n,(e=>r(e)))))},Insert:{bookmarks:({data:e})=>new Promise(((t,n)=>mContentProvider.Insert("BOOKMARKS",e,(e=>t(e))))),tabs:({data:e})=>new Promise(((t,n)=>mContentProvider.Insert("TABS",e,(e=>t(e)))))},Delete:{bookmarks:({where:e})=>new Promise(((t,n)=>mContentProvider.Delete("BOOKMARKS",e,null,(e=>t(e))))),tabs:({where:e})=>new Promise(((t,n)=>mContentProvider.Delete("TABS",e,null,(e=>t(e)))))},UpdateMultiple:{bookmarks:({items:e,where:t=null,selectionArgs:n=null})=>new Promise(((r,o)=>mContentProvider.UpdateMultiple("BOOKMARKS",e,t,n,(e=>r(e)))))},Max:{bookmarks:({key:e})=>new Promise(((t,n)=>mContentProvider.getMaxValueByKey("BOOKMARKS",e,(e=>t(e)))))},QueryMax:{bookmarks:({key:e,where:t})=>new Promise(((n,r)=>mContentProvider.getMax("BOOKMARKS",e,t,(e=>n(e)))))},clear:e=>mContentProvider.clear(e)},mContentProvider=new ContentProvider;var syncedBookmarkItems=0,syncedTabItems=0,removeDuplicateItems=[],moveChildrenDuplicateItems=[];const createSYNC4=({id:e,parent:t})=>`${EXT_DEVICE_ID}_${Date.now()}_${t}_${e}`,prefixUrlWithProtocol=e=>(["http","ftp"].some((t=>0===e.indexOf(t)))||(e=`http://${e}`),e);function cookBookmarkData({isFolder:e=!1,url:t="",title:n,id:r,position:o,parent:s,dominantColor:i,force:a}){const c=parseInt(storageLocalApi.getItem(BOOKMARK_SERVER_TIME))||AbstractSyncAdapterGlobal.mTimeManager.getCurrentTime();return new Promise(((S,u)=>{n=sanitizeTitle(n);let l=EXT_DEVICE_ID,d=EXT_DEVICE_NAME,m=c,g=m,h={_ID:r,TITLE:n,FOLDER:e?1:0,DIRTY:1,IS_DELETED:"0",INSERT_AFTER:"0",BOOKMARK_ID:r,POSITION:o,ACCOUNT_NAME:storageLocalApi.getItem("ACCOUNT_NAME"),ACCOUNT_TYPE:storageLocalApi.getItem("ACCOUNT_TYPE"),DEVICE_NAME:d,DEVICE_ID:l,CREATED:g,MODIFIED:m,SYNC5:0,PARENT:s,SYNC4:createSYNC4({id:r,parent:s}),DOMINANT_COLOR:parseInt(defaultIfUndefined(i,0)),TAGS:null,SOURCEID:null};return 0===n.length?u(TITLE_EMPTY):!e&&isBrowserURL(t)?u(URL_INVALID):(t=prefixUrlWithProtocol(t),void DB.Query.bookmarks({selection:["_ID"],where:{equals:[{key:"TITLE",value:n},{key:"URL",value:t},{key:"PARENT",value:s},{key:"IS_DELETED",value:"0"}]}}).then((n=>{if(!a&&n&&n.length>0)return u(BOOKMARK_EXISTS);h.url=e?"":t,0!=s?(h.SOURCEID=s,DB.Query.bookmarks({selection:["SYNC4"],where:{equals:[{key:"_ID",value:s},{key:"FOLDER",value:1}]}}).then((([{SYNC4:e}])=>{h.SYNC3=e,S(h)}))):(h.SOURCEID=null,h.SYNC3=null,S(h))})))}))}function cookUpdateData({isFolder:e,title:t,url:n,SYNC3:r,parent:o,dominantColor:s=0,POSITION:i}){const a={TITLE:t,DIRTY:1,SYNC5:0,MODIFIED:parseInt(storageLocalApi.getItem(BOOKMARK_SERVER_TIME))||AbstractSyncAdapterGlobal.mTimeManager.getCurrentTime(),DOMINANT_COLOR:parseInt(defaultIfUndefined(s,0))};return 0===t.length?Promise.reject(TITLE_EMPTY):!e&&isBrowserURL(n)?Promise.reject(URL_INVALID):(a.URL=e?"":prefixUrlWithProtocol(n),i&&(a.POSITION=i),r&&(a.SYNC3=r,a.PARENT=o),0==o&&(a.SYNC3=null,a.PARENT=o),SamsungSCloudSyncService.SyncLogs.log(JSON.stringify(a,null,2)),a)}function isValidBookmark({title:e,url:t,parent:n}){if(!e)throw new Error("Title is mandatory");if(!isValidURL(t))throw new Error("Url is invalid");return!0}async function addBookmark({url:e,title:t,parent:n=0,isFolder:r=!1,force:o=!1}){const{maxPosition:s,maxId:i}=await getMaxBookmarkPosId(),a=i+1,c=Number(s)+1,S=await cookBookmarkData({isFolder:r,url:e,title:t,parent:parseInt(n),id:a,position:c,force:o});return DB.Insert.bookmarks({data:S})}async function getMaxBookmarkPosId(){return{maxPosition:await DB.Max.bookmarks({key:"POSITION"}),maxId:await DB.Max.bookmarks({key:"_ID"})}}async function createFolder({title:e,parent:t=0,force:n=!1}){const r={equals:[{key:"TITLE",value:e=sanitizeTitle(e)},{key:"PARENT",value:parseInt(t)},{key:"IS_DELETED",value:"0"},{key:"FOLDER",value:1}]};if(!n&&0!==(await DB.Query.bookmarks({selection:["_ID"],where:r})).length)throw new Error(FOLDER_NAME_EXISTS);const{maxPosition:o,maxId:s}=await getMaxBookmarkPosId(),i=s+1,a=Number(o)+1,c=await cookBookmarkData({isFolder:!0,title:e,parent:parseInt(t),id:i,position:a});await DB.Insert.bookmarks({data:c});const S=await DB.Query.bookmarks({selection:null,where:r});return console.log("Folder created: ",JSON.stringify(S)),S[0]._ID}async function isBookmarkAdded({url:e}){return DB.Query.bookmarks({selection:["URL as url"],where:{equals:[{key:"URL",value:e},{key:"IS_DELETED",value:"0"},{key:"FOLDER",value:0}]}}).then(Array.from).then((e=>e.length>0))}async function checkSimilarBookmark({title:e,url:t,parent:n,isFolder:r}){e=sanitizeTitle(e),r||(t=prefixUrlWithProtocol(t));const o={folder:{equals:[{key:"TITLE",value:e},{key:"PARENT",value:n},{key:"IS_DELETED",value:"0"},{key:"FOLDER",value:1}]},bookmark:{equals:[{key:"TITLE",value:e},{key:"URL",value:t},{key:"PARENT",value:n},{key:"IS_DELETED",value:"0"},{key:"FOLDER",value:0}]}};return 0!==(await DB.Query.bookmarks({selection:["_ID"],where:o[r?"folder":"bookmark"]})).length}async function updateBookmark({id:e,url:t="",title:n,isFolder:r=!1,parent:o=0,dominantColor:s=0}){const[{currentParent:i}]=await DB.Query.bookmarks({selection:["PARENT as currentParent"],where:{equals:[{key:"_ID",value:e}]}});if(o=parseInt(o),n=sanitizeTitle(n),SamsungSCloudSyncService.SyncLogs.log(`Editing bookmark ${n} - ${t}`),await checkSimilarBookmark({title:n,url:t,parent:o,isFolder:r}))return Promise.reject(r?FOLDER_NAME_EXISTS:BOOKMARK_EXISTS);const a=t=>DB.Update.bookmarks({newData:t,where:{equals:[{key:"_ID",value:e}]}}).then((e=>{console.log("(updateBookmark) data: ",JSON.stringify(t)),console.log("(updateBookmark) response rowsAffected: ",e.rowsAffected)}));return await async function(){if(i!==o){const[e,s]=await Promise.all([DB.QueryMax.bookmarks({key:"POSITION",where:{equals:[{key:"PARENT",value:o}]}}),DB.Query.bookmarks({selection:["SYNC4"],where:{equals:[{key:"_ID",value:o}]}})]),i=cookUpdateData({isFolder:r,title:n,url:t,parent:o,POSITION:parseInt(e)+1,SYNC3:s.length>0?s[0].SYNC4:null});return await a(i)}return await a(cookUpdateData({isFolder:r,title:n,url:t}))}()}async function getDBBookmarkTree(){const e=await DB.Query.bookmarks({selection:["_ID as id","PARENT as parent","TITLE as title","URL as url","CREATED as created"],where:{equals:[{key:"IS_DELETED",value:"0"},{key:"FOLDER",value:1}]},sortOrder:"POSITION ASC"}),t=Array.from(e)||[];t.push({title:SAMSUNG_BOOKMARKS,id:0,children:[]});const n=arrayToObject(t);var r={title:BOOKMARKS,id:IMPORTED_MAIN_FOLDER_IDS.BOOKMARKS,children:[]},o=[];if(n.children.length){var s=n.children.findIndex((e=>e.id==IMPORTED_FOLDER_IDS.CHROME));null!=s&&s>=0&&(o.push(n.children[s]),n.children.splice(s,1));var i=n.children.findIndex((e=>e.id==IMPORTED_FOLDER_IDS.EDGE));null!=i&&i>=0&&(o.push(n.children[i]),n.children.splice(i,1));var a=n.children.findIndex((e=>e.id==IMPORTED_FOLDER_IDS.OPERA));null!=a&&a>=0&&(o.push(n.children[a]),n.children.splice(a,1)),o.sort(((e,t)=>e.created-t.created)),o.forEach((e=>{r.children.push(e)})),r.children.unshift(n)}return r}async function getSubFolders(e=0){const t=await DB.Query.bookmarks({selection:["_ID as id","TITLE as title","PARENT as parent"],where:{equals:[{key:"PARENT",value:e},{key:"FOLDER",value:1}]}});return Array.from(t)}function getFolderName(e,t){return e.reduce(((e,{title:n})=>{if(e===n){const n=parseInt(e.slice(t.length));return isNaN(n)?`${t} 1`:`${t} ${n+1}`}return e}),t)}function removeBookmark({e:e={},id:t,title:n,isFolder:r=!1,parent:o,url:s}){const i={title:n,"data-title":n,"data-is-folder":r,"data-parent-id":o,"data-id":t};r||(i["data-url"]=s);const a=h("a",i,n);onDeleteConfirm(e,a)}function removeBookmark_fancytree({e:e={},id:t,title:n,isFolder:r=!1,parent:o=0,url:s}){const i={title:n,"data-title":n,"data-is-folder":r,"data-parent-id":o,"data-id":t};r||(i["data-url"]=s);const a=h("a",i,n);onDeleteBookmarkConfirm_fancytree(e,a)}function removeSelectedBookmarks_fancytree(e){const t=e.map((e=>({_ID:e.data.id,FOLDER:e.folder})));onDeleteMultiBookmarkConfirm_fancytree(t)}function removeSelectedTabs_fancytree(e){const t=e.map((e=>({_ID:e.data.id,TITLE:e.title,PARENT:e.data.parent.data.id,URL:e.data.url})));onDeleteMultiTabConfirm_fancytree(t)}function removeTab_fancytree({e:e={},id:t,title:n,isFolder:r=!1,parent:o=0,url:s}){const i={title:n,"data-title":n,"data-is-folder":r,"data-parent-id":o,"data-id":t};r||(i["data-url"]=s);const a=h("a",i,n);onDeleteTabConfirm_fancytree(e,a)}function deleteDesktopBookmarks(){SamsungSCloudSyncService.SyncLogs.log("Deleting Desktop Bookmarks"),DB.Query.bookmarks({selection:["_ID"],where:{likes:[{key:"DEVICE_ID",value:"Desktop"}]}}).then((e=>{if(e.length>0){const t=parseInt(storageLocalApi.getItem(BOOKMARK_SERVER_TIME)),n=Array.from(e).map((({_ID:e})=>e)).join(",");return DB.Update.bookmarks({newData:{DIRTY:1,IS_DELETED:"1",SYNC5:t},where:{ins:[{key:"_ID",value:n.split(",")}]}})}return Promise.resolve(0)})).then((e=>0!==e&&doBookmarkSync()))}function listToTree(e){var t,n,r={},o=[];for(n=0;n<e.length;n+=1)r[e[n].id]=n,e[n].children=[];for(n=0;n<e.length;n+=1)"0"!==(t=e[n]).parent?void 0!==r[t.parent]&&e[r[t.parent]].children.push(t):o.push(t);if(storageLocalApi.getItem(SYNC_STATUS)===SYNC_COMPLETED)for(n=0;n<e.length;n+=1)"0"!==(t=e[n]).parent&&null==r[t.parent]&&invalidateBookmark(t.id);return o}async function getDBBookmarkTreeForManager(){var e=await DB.Query.bookmarks({selection:["_ID as id","PARENT as parent","TITLE as title","FOLDER as folder","URL as url","POSITION as position","CREATED as created"],where:{equals:[{key:"IS_DELETED",value:"0"}]},sortOrder:"POSITION ASC"}),t=Array.from(e)||[];syncedBookmarkItems=t.length,(t=t.map((e=>Object.assign({type:"bookmark"},e,{folder:Number(e.folder),parent:Number(e.parent),position:Number(e.position)})))).push({id:"0",parent:"0",children:[]});var n=listToTree(t),r=Array();r.push({title:SAMSUNG_BOOKMARKS,id:IMPORTED_FOLDER_IDS.SBROWSER,parent:"-1",position:"1",folder:"1",type:"bookmark",children:[]});const o={CHROME:{title:CHROME_BOOKMARKS,id:IMPORTED_FOLDER_IDS.CHROME,parent:"-1",position:"2",folder:"1",type:"bookmark",children:[]},EDGE:{title:chrome.i18n.getMessage("DREAM_BR_HEADER_PS_BOOKMARKS").replace("%s","Edge"),id:IMPORTED_FOLDER_IDS.EDGE,parent:"-1",position:"3",folder:"1",type:"bookmark",children:[]},OPERA:{title:chrome.i18n.getMessage("DREAM_BR_HEADER_PS_BOOKMARKS").replace("%s","Opera"),id:IMPORTED_FOLDER_IDS.OPERA,parent:"-1",position:"4",folder:"1",type:"bookmark",children:[]}},s={CHROME:"",EDGE:"",OPERA:""},i=IMPORTED_FOLDER_IDS[getBrowserName().toUpperCase()],a=e=>null!=e&&e>=0;if(Object.keys(s).forEach((e=>{s[e]=n[0].children.findIndex((t=>t.id==IMPORTED_FOLDER_IDS[e]))})),Object.keys(s).every((e=>a(s[e])))){const e=[n[0].children[s.CHROME],n[0].children[s.EDGE],n[0].children[s.OPERA]];e.sort(((e,t)=>e.created-t.created)),e.forEach(((e,t)=>{r.push(o[IMPORTED_FOLDER_NAMES[e.id]])}))}else Object.keys(s).every((e=>!a(s[e])))?r.push(o[getBrowserName().toUpperCase()]):[IMPORTED_FOLDER_IDS.CHROME,IMPORTED_FOLDER_IDS.EDGE,IMPORTED_FOLDER_IDS.OPERA].forEach(((e,t)=>{r.push(o[IMPORTED_FOLDER_NAMES[e]])}));n[0].children.length&&Object.keys(s).forEach((e=>{s[e]=n[0].children.findIndex((t=>t.id==IMPORTED_FOLDER_IDS[e]));const t=r.findIndex((t=>t.id==IMPORTED_FOLDER_IDS[e]));a(s[e])&&(r[t].children=n[0].children[s[e]].children||[],n[0].children.splice(s[e],1)),t>=0&&i!=r[t].id&&0==r[t].children.length&&(DB.Delete.bookmarks({where:{equals:[{key:"_ID",value:r[t].id}]}}),r.splice(t,1))})),r[0].children=n[0].children,moveChildrenDuplicateItems=[],removeDuplicateItems=[];for(let e=0;e<r.length;e++)mergeDuplicateBookmarks(r[e]);return moveChildrenDuplicateItems=Array.from(moveChildrenDuplicateItems).map((e=>updateBookmark({id:e.id,parent:e.parent,isFolder:1===parseInt(e.folder),url:e.url,title:e.title}))),removeDuplicateItems=Array.from(removeDuplicateItems).map((e=>invalidateBookmark(e.id))),await Promise.all(moveChildrenDuplicateItems),await Promise.all(removeDuplicateItems),moveChildrenDuplicateItems=[],removeDuplicateItems=[],r}function mergeDuplicateBookmarks(e){if(e.children&&e.children.length>0){const t=Object.values(e.children.reduce(((e,t)=>{let n=(t.TITLE?t.TITLE:"")+"-"+(t.URL?t.URL:"");return e[n]=e[n]||[],e[n].push(t),e}),{}));for(let n=0;n<t.length;n++)if(t[n].length>1){const r=1===parseInt(t[n][0].FOLDER);t[n].sort(((e,t)=>t.SYNC5-e.SYNC5));for(let o=1;o<t[n].length;o++)r&&(t[n][0].children=t[n][0].children.concat(t[n][o].children),t[n][o].children=[]),removeDuplicateItems.push(t[n][o]),e.children=e.children.filter((e=>e.id!==t[n][o].id))}for(let t=0;t<e.children.length;t++)e.children[t].parent!==e.id&&(e.children[t].parent=e.id,moveChildrenDuplicateItems.push(e.children[t]));for(let t=0;t<e.children.length;t++)mergeDuplicateBookmarks(e.children[t])}}async function getDBTabTreeForManager(){var e,t=await DB.Query.tabs({selection:["_ID as id","DEVICE_ID as deviceId","DEVICE_NAME as deviceName","TAB_TITLE as title","TAB_URL as url"],where:{equals:[{key:"IS_DELETED",value:"0"},{key:"ACCOUNT_NAME",value:storageLocalApi.getItem("ACCOUNT_NAME")}],not_likes:[{key:"DEVICE_ID",value:"Desktop"},{key:"DEVICE_NAME",value:"Firefox"}]},sortOrder:"TAB_INDEX ASC"}),n=Array.from(t)||[],r=[],o={};for(syncedTabItems=n.length,e=0;e<n.length;e+=1)r.indexOf(n[e].deviceId)<0&&(r.push(n[e].deviceId),o[n[e].deviceId]=n[e].deviceName);var s=Array();for(e=0;e<r.length;e+=1)s.push({title:o[r[e]],id:IMPORTED_MAIN_FOLDER_IDS.TABS-(e+1),parent:IMPORTED_MAIN_FOLDER_IDS.TABS,position:`${e+1}`,folder:"1",type:"tab",children:[]}),s[e].children=n.filter((t=>t.deviceId===r[e])).map((e=>Object.assign({folder:0,type:"tab"},e)));return s}async function getDBTreeForManager(){var[e,t]=await Promise.all([getDBBookmarkTreeForManager(),getDBTabTreeForManager()]),n=Array();return n.push({title:BOOKMARKS,id:IMPORTED_MAIN_FOLDER_IDS.BOOKMARKS,parent:"-1",position:"1",folder:"1",type:"bookmark",children:[]}),n[0].children=e,n}async function updatePosition(e){for(var t=getParentId(e[0]),n="",r=0;r<e.length;r++)n+=r<e.length-1?String(e[r].data.id)+",":String(e[r].data.id);const o=await DB.Query.bookmarks({selection:["_ID as id","POSITION as position","PARENT as parent"],where:{equals:[{key:"IS_DELETED",value:"0"}],ins:[{key:"_ID",value:n.split(",").map((e=>parseInt(e)))}]},sortOrder:"POSITION ASC"});if(null==o)return;const s=Array.from(o)||[];var i="";if(0!==t){const e=await DB.Query.bookmarks({selection:["_ID as id","SYNC4 as sync4"],where:{equals:[{key:"_ID",value:t},{key:"IS_DELETED",value:"0"}]}});if(null==e)return;const n=Array.from(e)||[];n.length&&(i=n[0].sync4)}else i="0";n="";var a={};for(r=0;r<s.length;r++){for(var c=0,S=0;S<e.length;S++)if(e[S].data.id==s[r].id){c=e[S].data.position;break}s[r].position==c&&s[r].parent==t||(""!=n&&(n+=","),n+=s[r].id,a[s[r].id]={PARENT:t,DIRTY:1,SYNC5:"0",SYNC3:i,POSITION:c},a[s[r].id]._ID=s[r].id,s[r].id)}DB.UpdateMultiple.bookmarks({items:a,where:{ins:[{key:"_ID",value:n.split(",").map((e=>parseInt(e)))}]}})}const openUrl=(e=[],t="OPEN_NEW_TAB")=>{switch(t){case"OPEN":{const[t]=e;updateTabInCurrentWindowWithoutClose(t);break}case"OPEN_NEW_TAB":createTabInCurrentWindowWithoutClose(...e);break;case"OPEN_NEW_WINDOW":createTabsInWindowWithoutClose(e);break;case"OPEN_NEW_SECRET_WINDOW":createTabsInSecretWindowWithoutClose(e);break;case"OPEN_ALL_BOOKMARKS":for(var n=0;n<e.length;n++)createTabInCurrentWindowWithoutClose(...e[n]);break;case"OPEN_ALL_NEW_WINDOW":for(n=0;n<e.length;n++){let t=e[n];createTabsInWindowWithoutClose(t)}break;case"OPEN_ALL_NEW_SECRET_WINDOW":for(n=0;n<e.length;n++){let t=e[n];createTabsInSecretWindowWithoutClose(t)}}},createTabForURLWithoutClose=(e,t)=>new Promise((n=>chrome.tabs.create({windowId:t,url:e},n))),createTabForEachURLWithoutClose=(e,t)=>Promise.all(e.map((e=>createTabForURLWithoutClose(e,t)))),createTabsInWindowWithoutClose=(e,...t)=>new Promise((n=>chrome.windows.create({top:100,left:Math.round((screen.width-.75*screen.width)/2),height:Math.round(.75*screen.height),width:Math.round(.75*screen.width),type:"normal",url:e},(e=>createTabForEachURLWithoutClose(t,e.id))))),createTabsInSecretWindowWithoutClose=(e,...t)=>new Promise((n=>chrome.windows.create({top:100,left:Math.round((screen.width-.75*screen.width)/2),height:Math.round(.75*screen.height),width:Math.round(.75*screen.width),type:"normal",incognito:!0,url:e},(e=>createTabForEachURLWithoutClose(t,e.id)))));function updateTabInCurrentWindowWithoutClose(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.update(t[0].id,{url:e})}))}function createTabInCurrentWindowWithoutClose(...e){chrome.windows.getCurrent((t=>createTabForEachURLWithoutClose(e,t.id)))}const BrowserUtil={tabsQuery:async e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))})),tabsQueryFirst:async e=>{const t=await BrowserUtil.tabsQuery(e);return t.length>0?t[0]:null},getTabFromCurrentWindow:async()=>await BrowserUtil.tabsQueryFirst({active:!0,currentWindow:!0}),getActiveTabs:async()=>await BrowserUtil.tabsQuery({active:!0}),tabSendMessage:async(e,t,n=null)=>{if(e&&e.id)return new Promise((r=>{chrome.tabs.sendMessage(e.id,t,n,(()=>{chrome.runtime.lastError,r()}))}))},isSupportPassword:()=>!0,isWin11Up:async()=>new Promise(((e,t)=>{navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((t=>{if("Windows"===navigator.userAgentData.platform){const n=parseInt(t.platformVersion.split(".")[0]);if(n>=13)return console.log("Windows 11 or later"),void e(!0);n>0?console.log("Windows 10"):console.log("Before Windows 10")}else console.log("Not running on Windows");e(!1)}))}))};function NetworkClient(){this.TAG="NetworkClient",this.OCTET_STREAM="application/octet-stream",this.JSON_CONTENT="application/json;charset=utf-8",this.mHttpClient=null,SamsungSCloudSyncService.NetworkClientGlobal=this,this.getRequest=function(){const e=arguments[0],t=arguments[1],n=arguments[2];if(this.callBack=arguments[3],1==arguments.length||4==arguments.length)if(navigator.onLine)this.getXMLHttpRequest(e,t?[[t,n]]:[]);else{const e={CONNECTIVITY:SamsungSCloudSyncService.INTERNET_FAILURE_TEXT};SamsungSCloudSyncService.NetworkClientGlobal.onFailureResponse(e,!0)}},this.postRequest=function(e,t){if(navigator.onLine){const n=new Headers;n.append("Content-type",this.JSON_CONTENT),fetch(e,{method:"POST",headers:n,body:t}).then((e=>{SamsungSCloudSyncService.NetworkClientGlobal.onSuccessResponse(e)})).catch((t=>{SamsungSCloudSyncService.SyncLogs.log(`(postRequest) Request error: ${e}`),SamsungSCloudSyncService.SyncLogs.error(t),SamsungSCloudSyncService.NetworkClientGlobal.onFailureResponse(t)}))}else{const e={CONNECTIVITY:SamsungSCloudSyncService.INTERNET_FAILURE_TEXT};SamsungSCloudSyncService.NetworkClientGlobal.onFailureResponse(e,!0)}},this.onFailureResponse=async function(e,t){try{if(await storageLocalApi.setItem(SYNC_STATUS,SYNC_COMPLETED),SamsungSCloudSyncService.BrowserOverlay.clearSyncTimeoutInterval(),SamsungSCloudSyncService.BrowserOverlay.clearAutoSyncTimeoutInterval(!1),t)chrome.runtime.sendMessage({CONNECTIVITY:SamsungSCloudSyncService.INTERNET_FAILURE_TEXT});else{var n;e&&(n=e.responseText?e.responseText:await e.text(),SamsungSCloudSyncService.SyncLogs.log(`On Failure Response (URL): ${e.url}`),SamsungSCloudSyncService.SyncLogs.log(`On Failure Response (status): ${e.status}`),SamsungSCloudSyncService.SyncLogs.log(`On Failure Response (text): ${n}`));const{rcode:t,rmsg:r}=JSON.parse(n);if(20002!=t&&29006!=t||SamsungSCloudSyncService.mBrowserBookmarkSyncAdapter.handleError(t),19018==t||19008==t)return SamsungSCloudSyncService.SyncLogs.log("Trying to refresh token"),void refreshAccessToken(storageLocalApi.getItem(REFRESH_TOKEN)).then((({token:e,refreshToken:t,tokenExpiresIn:n,refreshTokenExpiresIn:r})=>updateAccessToken(e).then((async()=>{SamsungSCloudSyncService.SyncLogs.log("Refreshed successfully"),storeAccessToken(e),await storageLocalApi.setArrayItems([[REFRESH_TOKEN,t],[REFRESH_TOKEN_EXPIRES_IN,r]]),SamsungSCloudSyncService.BrowserOverlay.refreshSyncProcess()})))).catch((e=>{SamsungSCloudSyncService.SyncLogs.log("Problem in refreshing token"),SamsungSCloudSyncService.SyncLogs.log(JSON.stringify(e)),console.error(e),cleanupStateOnLogout(),chrome.runtime.sendMessage({ACCESS_TOKEN_URL_PROBLEM:"SESSION_EXPIRED"})}));SamsungSCloudSyncService.SyncLogs.error(`HTTP Request Failed: ${r}`),chrome.runtime.sendMessage({ERROR:`HTTP Request Failed: ${t}`}),SamsungSCloudSyncService.SyncLogs.log("onFailureResponse: HTTP Request Failed")}}catch(t){SamsungSCloudSyncService.SyncLogs.error(`Can't parse response: ${e.responseText}`),chrome.runtime.sendMessage({ERROR:"Bad response"}),SamsungSCloudSyncService.SyncLogs.log("onFailureResponse: Bad response")}},this.onSuccessResponse=async function(e,t){var n,r;if(200==e.status){if(r=await e.text(),SamsungSCloudSyncService.SyncLogs.log(`On Success Response (URL): ${e.url}`),SamsungSCloudSyncService.SyncLogs.log(`On Success Response (text): ${r}`),!(r&&r.length>0))return void SamsungSCloudSyncService.SyncLogs.log("onSuccessResponse: Retruned");n=JSON.parse(r)}if((500==e.status||400==e.status||n&&0!=n.rcode)&&SamsungSCloudSyncService.NetworkClientGlobal.onFailureResponse(e),null!=SamsungSCloudSyncService.startKey&&n&&n.nextKey==SamsungSCloudSyncService.startKey)return void SamsungSCloudSyncService.SyncLogs.log("onSuccessResponse: Retruned");SamsungSCloudSyncService.mNetworkResponse||(SamsungSCloudSyncService.mNetworkResponse=new NetworkResponse);const o=e.headers.get("Content-type").toUpperCase().replace(/ /gi,"");o==SamsungSCloudSyncService.NetworkClientGlobal.JSON_CONTENT.toUpperCase()?SamsungSCloudSyncService.mNetworkResponse.setBody(r):o==SamsungSCloudSyncService.NetworkClientGlobal.OCTET_STREAM.toUpperCase()?SamsungSCloudSyncService.mNetworkResponse.setFileInStream(e):(console.error("onSuccessResponse: Unknown Header type"),SamsungSCloudSyncService.SyncLogs.error("onSuccessResponse: Unknown Header type"),SamsungSCloudSyncService.NetworkClientGlobal.onFailureResponse(e)),SamsungSCloudSyncService.NetworkClientGlobal.callBack&&SamsungSCloudSyncService.NetworkClientGlobal.callBack(SamsungSCloudSyncService.mNetworkResponse)},this.getFile=function(e){this.requestFile(e)},this.requestFile=function(e){},this.postMultiPart=function(){},this.encodeUrl=function(e){return encodeURIComponent(e)},this.getWithHeader=function(e,t,n){this.getRequest(e,t,n)},this.getXMLHttpRequest=function(e,t=[]){if(navigator.onLine){const n=new Headers;t.length>0&&t.forEach((([e,t])=>n.append(e,t))),fetch(e,{method:"GET",headers:n}).then((e=>{SamsungSCloudSyncService.NetworkClientGlobal.onSuccessResponse(e)})).catch((t=>{SamsungSCloudSyncService.SyncLogs.log(`(getXMLHttpRequest) Request error: ${e}`),SamsungSCloudSyncService.SyncLogs.error(t),SamsungSCloudSyncService.NetworkClientGlobal.onFailureResponse(t)}))}else SamsungSCloudSyncService.SyncLogs.log("getXMLHttpRequest: Internet connection is not there")}}function NetworkResponse(){this.mStatus=0,this.mBody=null,this.mFile=null,this.clear=function(){this.mStatus=0,this.mBody=null,this.mFile=null},this.isFileStream=function(){return null!=this.mFile},this.setStatus=function(e){this.mStatus=e},this.setBody=function(e){this.mBody=e},this.setFileInStream=function(e){this.mFile=e},this.getStatus=function(){return this.mStatus},this.getBody=function(e){return this.mBody},this.getFileInStream=function(e){return this.mFile}}SamsungSCloudSyncService.NetworkClientGlobal=null;class AppTool{generateCTID(e=8){return Math.floor(Math.random()*Math.pow(10,e)).toString()}appendIds(e,t){return console.log("appendIds"),e+t.map((e=>`'${e}'`)).join(",")}getClientDeviceId(){return"00245498C2B0"}}function KVSItem(e,t,n,r,o){this.mId=e,this.mDeleted=t,this.mTimeStamp=n,this.mValue=r,this.mSize=o,this.setup=function(){},this.getID=function(){return this.mId},this.setID=function(e){this.mId=e},this.isDeleted=function(){return this.mDeleted},this.getTimeStamp=function(){return this.mTimeStamp},this.setTimeStamp=function(e){this.mTimeStamp=e},this.getValue=function(){return this.mValue},this.setValue=function(e){this.mValue=e},this.getSize=function(){return this.mSize},this.cleanup=function(){this.mId=null,this.mDeleted=null,this.mTimeStamp=null,this.mValue=null,this.mSize=null}}function KVSResponse(){this.LEVEL="level",this.QUOTA="quota",this.USAGE="usage",this.AVAILABLE="available",this.RCODE="rcode",this.RMSG="rmsg",this.MAX_TIMESTAMP="maxTimestamp",this.NEXTKEY="nextKey",this.SERVER_TIMESTAMP="serverTimestamp",this.LIST="list",this.TIMESTAMP="timestamp",this.KEY="key",this.VALUE="value",this.DELETED="deleted",this.SIZE="size",this.STORAGEINFO="storageinfo",this.mMaxTimeStamp=null,this.mNextKey=null,this.mResponseCode=null,this.mResultMessage=null,this.mServerTimeStamp=null,this.mItemResponseList=[],this.mItemDetailsList=[],this.mKeyDetailList=[],SamsungSCloudSyncService.KVSResponseGlobal=this,this.setup=function(){},this.getResponseCode=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mResponseCode},this.getServerTimeStamp=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mServerTimeStamp},this.getResultMessage=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mResultMessage},this.getMaxTimeStamp=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mMaxTimeStamp},this.getNextKey=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mNextKey},this.getItemDetailsList=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mItemDetailsList},this.getItemResponseList=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mItemResponseList},this.getKeyDetailList=function(){return SamsungSCloudSyncService.KVSResponseGlobal.mKeyDetailList},this.fromJSON=function(e){try{const n=JSON.parse(e);if(n.hasOwnProperty(SamsungSCloudSyncService.KVSResponseGlobal.RCODE)&&(SamsungSCloudSyncService.KVSResponseGlobal.mResponseCode=n.rcode),n.hasOwnProperty(SamsungSCloudSyncService.KVSResponseGlobal.RMSG)&&(SamsungSCloudSyncService.KVSResponseGlobal.mResultMessage=n.rmsg),n.hasOwnProperty(SamsungSCloudSyncService.KVSResponseGlobal.MAX_TIMESTAMP)&&(SamsungSCloudSyncService.KVSResponseGlobal.mMaxTimeStamp=n.maxTimestamp),n.hasOwnProperty(SamsungSCloudSyncService.KVSResponseGlobal.NEXTKEY)&&(SamsungSCloudSyncService.KVSResponseGlobal.mNextKey=n.nextKey),n.hasOwnProperty(SamsungSCloudSyncService.KVSResponseGlobal.SERVER_TIMESTAMP)&&(SamsungSCloudSyncService.KVSResponseGlobal.mServerTimeStamp=n.serverTimestamp),n.hasOwnProperty("list")){const e=[];for(var t in n.list)e.push([t,n.list[t]]);for(t=0;t<e.length;t++){const n=e[t],r=n[1].timestamp,o=n[1].key;let s=0,i=null,a=!1,c=0;void 0!==n[1].rcode&&(s=n[1].rcode,SamsungSCloudSyncService.KVSResponseGlobal.mItemResponseList.push(new RecordItemResponse(o,r,s))),void 0!==n[1].value&&(a=n[1].deleted,i=n[1].value,SamsungSCloudSyncService.KVSResponseGlobal.mItemDetailsList.push(new RecordItem(o,r,i,a))),void 0!==n[1].size&&(a=n[1].deleted,c=n[1].size,SamsungSCloudSyncService.KVSResponseGlobal.mKeyDetailList.push(new RecordKey(o,r,c,a)))}}}catch(e){SamsungSCloudSyncService.SyncLogs.log(`KVSResponse: fromJSON: Exception = ${e}`)}},this.clear=function(){this.mMaxTimeStamp=null,this.mNextKey=null,this.mResponseCode=null,this.mResultMessage=null,this.mServerTimeStamp=null,this.mItemResponseList=[],this.mItemDetailsList=[],this.mKeyDetailList=[]},this.cleanup=function(){this.LEVEL=null,this.QUOTA=null,this.USAGE=null,this.AVAILABLE=null,this.RCODE=null,this.RMSG=null,this.MAX_TIMESTAMP=null,this.NEXTKEY=null,this.SERVER_TIMESTAMP=null,this.LIST=null,this.TIMESTAMP=null,this.KEY=null,this.VALUE=null,this.DELETED=null,this.SIZE=null,this.STORAGEINFO=null,this.mMaxTimeStamp=null,this.mNextKey=null,this.mResponseCode=null,this.mResultMessage=null,this.mServerTimeStamp=null,this.mItemResponseList=[],this.mItemDetailsList=[],this.mKeyDetailList=[]}}function RecordBase(e,t){this.KEY="key",this.TIMESTAMP="timestamp",this.mKey=e,this.mTimeStamp=t,this.getKEY=function(){return this.mKey},this.getTimeStamp=function(){return this.mTimeStamp},this.fromJSON=function(e){try{const t=e;t.hasOwnProperty(this.KEY)&&(this.mKey=t.key),t.hasOwnProperty(this.TIMESTAMP)&&(this.mTimeStamp=t.timestamp)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordBase: fromJSON: Record base Object Parsing: Exception = ${e}`)}},this.toJSON=function(){null!=this.mKey&&null!=this.mTimeStamp||SamsungSCloudSyncService.SyncLogs.log("RecordBase: toJSON: Input parsing error");const e={};return e.key=this.mKey,e.timestamp=this.mTimeStamp,e},this.cleanup=function(){this.mkey=null,this.mTimeStamp=null}}function RecordItem(e,t,n,r){this.KEY="key",this.TIMESTAMP="timestamp",this.mKey=e,this.mTimeStamp=t,this.DELETED="deleted",this.mDeleted=r,this.VALUE="value",this.mValue=n,this.getKEY=function(){return this.mKey},this.getTimeStamp=function(){return this.mTimeStamp},this.isDeleted=function(){return this.mDeleted},this.getValue=function(){return this.mValue},this.fromJSON=function(e){try{const t=e;t.hasOwnProperty(this.KEY)&&(this.mKey=t.key),t.hasOwnProperty(this.TIMESTAMP)&&(this.mTimeStamp=t.timestamp),t.hasOwnProperty(this.DELETED)&&(this.mDeleted=t.deleted),t.hasOwnProperty(this.VALUE)&&(this.mValue=t.value)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordItem: fromJSON: Exception = ${e}`)}},this.toJSON=function(){try{null!=this.mKey&&null!=this.mTimeStamp||SamsungSCloudSyncService.SyncLogs.log("RecordItem: toJSON: Input parsing error");const e={};return e.key=this.mKey,e.timestamp=this.mTimeStamp,e.deleted=this.mDeleted,e.value=this.mValue,e}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordItem: toJSON: Exception = ${e}`)}},this.cleanup=function(){this.DELETED=null,this.mDeleted=null,this.KEY=null,this.TIMESTAMP=null,this.mkey=null,this.mTimeStamp=null,this.VALUE=null,this.mValue=null}}function RecordKey(e,t,n,r){this.KEY="key",this.TIMESTAMP="timestamp",this.mKey=e,this.mTimeStamp=t,this.DELETED="deleted",this.mDeleted=r,this.SIZE="size",this.mSize=n,this.getKEY=function(){return this.mKey},this.getTimeStamp=function(){return this.mTimeStamp},this.isDeleted=function(){return this.mDeleted},this.fromJSON=function(e){try{const t=e;t.hasOwnProperty(this.KEY)&&(this.mKey=t.key),t.hasOwnProperty(this.TIMESTAMP)&&(this.mTimeStamp=t.timestamp),t.hasOwnProperty(this.DELETED)&&(this.mDeleted=t.deleted),t.hasOwnProperty(SIZE)&&(this.mSize=t.size)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordKey: fromJSON: Exception = ${e}`)}},this.toJSON=function(){try{null!=this.mKey&&null!=this.mTimeStamp||SamsungSCloudSyncService.SyncLogs.log("RecordKey: toJSON: Input parsing error");const e={};return e.key=this.mKey,e.timestamp=this.mTimeStamp,e.deleted=this.mDeleted,e.size=this.mSize,e}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordKey: toJSON: Exception = ${e}`)}},this.getSize=function(){return this.mSize},this.cleanup=function(){this.DELETED=null,this.mDeleted=null,this.KEY=null,this.TIMESTAMP=null,this.mkey=null,this.mTimeStamp=null,this.SIZE=null,this.mSize=null}}function RecordItemResponse(e,t,n){this.KEY="key",this.TIMESTAMP="timestamp",this.mKey=e,this.mTimeStamp=t,this.RCODE="rcode",this.mRcode=n,this.getKEY=function(){return this.mKey},this.getTimeStamp=function(){return this.mTimeStamp},this.getRcode=function(){return this.mRcode},this.fromJSON=function(e){try{const t=e;t.hasOwnProperty(this.KEY)&&(this.mKey=t.key),t.hasOwnProperty(this.TIMESTAMP)&&(this.mTimeStamp=t.timestamp),t.hasOwnProperty(this.RCODE)&&(this.mRcode=t.RCODE)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordItemResponse: fromJSON: Exception = ${e}`)}},this.toJSON=function(){try{null!=this.mKey&&null!=this.mTimeStamp||SamsungSCloudSyncService.SyncLogs.log("RecordItemResponse: toJSON: Input parsing error");const e={};return e.key=this.mKey,e.timestamp=this.mTimeStamp,e.rcode=this.mRcode,e}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordItemResponse:  toJSON: Exception = ${e}`)}},this.cleanup=function(){this.KEY=null,this.TIMESTAMP=null,this.mkey=null,this.mTimeStamp=null,this.RCODE=null,this.mRcode=null}}function RecordSetItem(e,t,n){this.KEY="key",this.TIMESTAMP="timestamp",this.mKey=e,this.mTimeStamp=t,this.VALUE="value",this.mValue=n,this.getKEY=function(){return this.mKey},this.getTimeStamp=function(){return this.mTimeStamp},this.setValue=function(e){this.mValue=e},this.getValue=function(){return this.mValue},this.fromJSON=function(e){try{const t=e;t.hasOwnProperty(this.KEY)&&(this.mKey=t.key),t.hasOwnProperty(this.TIMESTAMP)&&(this.mTimeStamp=t.timestamp),t.hasOwnProperty(this.VALUE)&&(this.mValue=t.value)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordSetItem: fromJSON: Exception ${e}`)}},this.toJSON=function(){try{null!=this.mKey&&null!=this.mTimeStamp||SamsungSCloudSyncService.SyncLogs.log("RecordSetItem: toJSON: Input parsing error");const e={};return e.key=this.mKey,e.timestamp=this.mTimeStamp,e.value=this.mValue,e}catch(e){SamsungSCloudSyncService.SyncLogs.log(`RecordSetItem: toJSON: Exception = ${e}`)}},this.cleanup=function(){this.KEY=null,this.TIMESTAMP=null,this.mkey=null,this.mTimeStamp=null,this.VALUE=null,this.mValue=null}}function BookMarkBuilder(e,t,n){this.mProvider=e,this.mAccount=t,this.mContext=n,this.mBookmarkId=0,this.mFolderMap=new Hash,this.mContentUri=null,this.mAuthorityUri=null,this.mBookmarkUri=null,this.bookmarksColumns=[],this.ACCOUNT_SELECTION=`${SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.ACCOUNT_TYPE} == '${SamsungSCloudSyncService.mSyncConstants.ACCOUNT_TYPE}' AND ${SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.ACCOUNT_NAME} == '${SamsungSCloudSyncService.mSyncConstants.ACCOUNT_NAME}'`,this.SBOOKMARK_COLUMNS=[SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.TITLE,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.URL,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.FAVICON,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.PARENT,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.IS_FOLDER,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.POSITION,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.INSERT_AFTER,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.ACCOUNT_NAME,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.ACCOUNT_TYPE,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SOURCE_ID,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.DEVICE_NAME,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.DEVICE_ID,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.DATE_CREATED,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.DATE_MODIFIED,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SYNC3,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SYNC4,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.TAGS,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.DOMINANT_COLOR],this.mBookmarkUri=SamsungSCloudSyncService.mBrowserConstants.BROWSER_BOOKMARK_URI,SamsungSCloudSyncService.BookMarkBuilderGlobal=this,this.parse=function(e,t,n){let r=null;if(!e)return null;try{const t={};e.TITLE&&(t.title=e.TITLE.toString()),e.URL&&(t.url=e.URL.toString()),e.FAVICON&&(t.favicon=e.FAVICON.toString()),e.ACCOUNT_NAME&&(t.account_name=e.ACCOUNT_NAME.toString()),e.ACCOUNT_TYPE&&(t.account_type=e.ACCOUNT_TYPE.toString()),e.SOURCEID&&(t.sourceid=e.SOURCEID.toString()),e.DEVICE_NAME&&(t.device_name=e.DEVICE_NAME.toString()),e.DEVICE_ID&&(t.device_id=e.DEVICE_ID.toString()),e.SYNC4&&(t.sync4=e.SYNC4.toString()),e.TAGS&&(t.tags=e.TAGS.toString()),e.SYNC3?(console.log("sync3",e.SYNC3),t.sync3=e.SYNC3.toString()):t.sync3="",e.PARENT?t.parent=e.PARENT.toString():t.parent="0",e.FOLDER?t.folder=e.FOLDER.toString():t.folder="0",e.POSITION?t.position=e.POSITION.toString():t.position="0",e.INSERT_AFTER?t.insert_after=e.INSERT_AFTER.toString():t.insert_after="0",e.CREATED?t.created=e.CREATED.toString():t.created="0",e.MODIFIED?t.modified=e.MODIFIED.toString():t.modified="0",e.DOMINANT_COLOR?t.dominant_color=e.DOMINANT_COLOR.toString():t.dominant_color="0",r=JSON.stringify(t)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`parse: Exception in parsing${e}`)}return r},this.update=function(e,t,n,r,o){const s=JSON.parse(e);s.position=Number(s.position),s.parent=parseInt(s.parent),delete s.touch_icon;try{const e=s.FAVICON;if(s.DOMINANT_COLOR,null!=e&&"undefined"!=e){let t;t=btoa(e),s.FAVICON=t}s.SYNC2=t}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`update: Unable to Parse;${e}`),!1}try{this.mProvider.Update(this.mBookmarkUri,s,{equals:[{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS._ID,value:n}]},null,o)}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`update: RemoteException${e}`),!1}return!0},this.insert=function(e,t,n,r=null){const o=JSON.parse(e);function s(e,t){return""==e||null==e||"undefined"==e||null==e?t:e}delete o.touch_icon;try{var i={title:sanitizeTitle(o.title),url:s(o.url,""),favicon:s(o.favicon,null),parent:parseInt(o.parent),folder:parseInt(s(o.folder,0)),position:parseInt(o.position),insert_after:parseInt(s(o.insert_after,0)),account_name:storageLocalApi.getItem("ACCOUNT_NAME"),account_type:o.account_type,sourceid:s(o.sourceid,null),device_name:o.device_name,device_id:o.device_id,created:o.created,modified:o.modified,sync3:s(o.sync3,null),sync4:o.sync4,tags:s(o.tags,null),dominant_color:parseInt(s(o.dominant_color,0))};const e=o.favicon;if(null!=e){let t;t=btoa(e),i.favicon=t}i.SYNC1=t,i.SYNC5=n,o.sync3||(i.parent=this.mBookmarkId)}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`insert: Unable to Parse;${e}`),!1}try{this.mProvider.Insert(this.mBookmarkUri,i,(e=>{r&&r(e)}))}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`insert: RemoteException${e}`),!1}return!0},this.getBatchSize=function(){return 1500},this.Delete=function(e,t,n,r){try{this.mProvider.Delete(e,n,null)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`Delete: Exception${e}`)}},this.cleanup=function(){this.mProvider=null,this.mAccount=null,this.mContext=null,this.mBookmarkId=null,this.mFolderMap=null,this.mContentUri=null,this.mAuthorityUri=null,this.mBookmarkUri=null,this.bookmarksColumns=null,this.ACCOUNT_SELECTION=null,this.SBOOKMARK_COLUMNS=null},this.getFolderList=function(){this.mProvider.Query(this.mBookmarkUri,[SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SYNC4,SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS._ID],{equals:[{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.IS_FOLDER,value:1},{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.ACCOUNT_TYPE,value:SamsungSCloudSyncService.mSyncConstants.ACCOUNT_TYPE},{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.ACCOUNT_NAME,value:SamsungSCloudSyncService.mSyncConstants.ACCOUNT_NAME}]},null,null,this.getFolderListQueryCallback)},this.getFolderList()}function TabBuilder(e,t,n){this.mProvider=e,this.mAccount=t,this.mContext=n,this.mTabId=0,this.mFolderMap=new Hash,this.mContentUri=null,this.mAuthorityUri=null,this.mTabUri=null,this.tabsColumns=[],this.ACCOUNT_SELECTION=`${SamsungSCloudSyncService.mBrowserConstants.TABS.ACCOUNT_TYPE} == '${SamsungSCloudSyncService.mSyncConstants.ACCOUNT_TYPE}' AND ${SamsungSCloudSyncService.mBrowserConstants.TABS.ACCOUNT_NAME} == '${SamsungSCloudSyncService.mSyncConstants.ACCOUNT_NAME}'`,this.SBROWSERTAB_COLUMNS=[SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_ID,SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_INDEX,SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_URL,SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_TITLE,SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_FAV_ICON,SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_ACTIVATE,SamsungSCloudSyncService.mBrowserConstants.TABS.IS_INCOGNITO,SamsungSCloudSyncService.mBrowserConstants.TABS.DATE_CREATED,SamsungSCloudSyncService.mBrowserConstants.TABS.DATE_MODIFIED,SamsungSCloudSyncService.mBrowserConstants.TABS.ACCOUNT_NAME,SamsungSCloudSyncService.mBrowserConstants.TABS.ACCOUNT_TYPE,SamsungSCloudSyncService.mBrowserConstants.TABS.DEVICE_NAME,SamsungSCloudSyncService.mBrowserConstants.TABS.DEVICE_ID,SamsungSCloudSyncService.mBrowserConstants.TABS.DEVICE_TYPE,SamsungSCloudSyncService.mBrowserConstants.TABS.TAB_USAGE],this.mTabUri=SamsungSCloudSyncService.mBrowserConstants.BROWSER_TAB_URI,SamsungSCloudSyncService.TabBuilderGlobal=this,this.parse=function(e,t,n){let r=null;if(null==e)return null;try{const t={};e.TAB_ID&&(t.TAB_ID=e.TAB_ID.toString()),e.TAB_URL&&(t.TAB_URL=e.TAB_URL.toString()),e.TAB_TITLE&&(t.TAB_TITLE=e.TAB_TITLE.toString()),e.TAB_FAV_ICON&&(t.TAB_FAV_ICON=e.TAB_FAV_ICON.toString()),e.ACCOUNT_NAME&&(t.ACCOUNT_NAME=e.ACCOUNT_NAME.toString()),e.ACCOUNT_TYPE&&(t.ACCOUNT_TYPE=e.ACCOUNT_TYPE.toString()),e.DEVICE_NAME&&(t.DEVICE_NAME=e.DEVICE_NAME.toString()),e.DEVICE_ID&&(t.DEVICE_ID=e.DEVICE_ID.toString()),e.DEVICE_TYPE&&(t.DEVICE_TYPE=e.DEVICE_TYPE.toString()),e.TAB_USAGE&&(t.TAB_USAGE=e.TAB_USAGE.toString()),e.TAB_INDEX&&(t.TAB_INDEX=e.TAB_INDEX.toString()),e.TAB_ACTIVATE&&(t.TAB_ACTIVATE=e.TAB_ACTIVATE.toString()),e.IS_INCOGNITO&&(t.IS_INCOGNITO=e.IS_INCOGNITO.toString()),e.DATE_CREATED&&(t.DATE_CREATED=e.DATE_CREATED.toString()),e.DATE_MODIFIED&&(t.DATE_MODIFIED=e.DATE_MODIFIED.toString()),r=JSON.stringify(t)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`parse: Exception in parsing${e}`)}return r},this.update=function(e,t,n,r,o){try{sBrowserTabValues=JSON.parse(e);let n=sBrowserTabValues.TAB_FAV_ICON;if(null!=n&&"undefined"!=n){let e;e=btoa(n),sBrowserTabValues.TAB_FAV_ICON=e}sBrowserTabValues.SYNC2=t}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`update: Unable to Parse;${e}`),!1}try{this.mProvider.Update(this.mTabUri,sBrowserTabValues,{equals:[{key:SamsungSCloudSyncService.mBrowserConstants.TABS._ID,value:n}]},null,o)}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`update: RemoteException${e}`),!1}return!0},this.insert=function(e,t,n,r=null){var o=null;try{var s,i=(o=JSON.parse(e)).TAB_FAV_ICON;null!=i&&(s=btoa(i),o.TAB_FAV_ICON=s),o.SYNC1=t,o.SYNC2=n}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`insert: Unable to Parse;${e}`),!1}try{this.mProvider.Insert(this.mTabUri,o,this.doInsertCallback)}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`insert: RemoteException${e}`),!1}return!0},this.Delete=function(e,t,n,r){try{this.mProvider.Delete(e,n,null)}catch(e){SamsungSCloudSyncService.SyncLogs.log(`Delete: Exception${e}`)}},this.getBatchSize=function(){return 250},this.cleanup=function(){this.SBROWSERTAB_COLUMNS=null,this.mProvider=null,this.mAccount=null,this.mContext=null,this.mTabId=null,this.mTabUri=null},this.doInsertCallback=function(e){e>0&&SamsungSCloudSyncService.NEW_TAB_URL_ID&&chrome.runtime.sendMessage({SYNC:"RESULT_UPDATED"})}}function AbstractServiceManager(e,t,n){this.initializeDefaults=function(){this.TAG="AbstractServiceManager",this.RCODE="rcode",this.mClientDeviceId=null,this.mCid=null,SamsungSCloudSyncService.mNetClient||(SamsungSCloudSyncService.mNetClient=new NetworkClient),SamsungSCloudSyncService.sAuthManager||(SamsungSCloudSyncService.sAuthManager=new AuthManager)},this.initializeDefaults(),this.mCid=e,SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=t),this.mClientDeviceId=n,this.close=function(){SamsungSCloudSyncService.mNetClient&&SamsungSCloudSyncService.mNetClient.close()},this.createMetaResponse=function(e){if(void 0!==e){SamsungSCloudSyncService.mKVSResponse.clear();try{null!=e.getBody()&&SamsungSCloudSyncService.mKVSResponse.fromJSON(e.getBody())}catch(e){SamsungSCloudSyncService.SyncLogs.log(`createMetaResponse: JSON PARSER Exception = ${e}`)}}},this.handleRequest=function(e,t,n,r,o,s){this.callbackFromNWClient=s;let i=null;if(void 0!==SamsungSCloudSyncService.mNetClient)if(void 0!==e)if(void 0!==t)if(void 0!==n)try{switch(SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),this.responseCallbackFromNetworkClient=this.responseCallbackFromNetworkClient.bind(this),e){case SamsungSCloudSyncService.mSyncConstants.REQUEST_POST:void 0!==r?i=SamsungSCloudSyncService.mNetClient.postRequest(t,r):SamsungSCloudSyncService.SyncLogs.log("handleRequest: Json is not defined");break;case SamsungSCloudSyncService.mSyncConstants.REQUEST_GET:i=SamsungSCloudSyncService.mNetClient.getRequest(t,this.APP_ID_HEADER,this.APP_ID,this.responseCallbackFromNetworkClient);break;case SamsungSCloudSyncService.mSyncConstants.REQUEST_POST_MULTIPART:void 0!==r?i=SamsungSCloudSyncService.mNetClient.postMultiPart(t,o):SamsungSCloudSyncService.SyncLogs.log("handleRequest: multipart is not defined");break;case SamsungSCloudSyncService.mSyncConstants.REQUEST_GET_FILE:i=SamsungSCloudSyncService.mNetClient.getFile(t);break;case SamsungSCloudSyncService.mSyncConstants.REQUEST_GET_META:SamsungSCloudSyncService.mORSConstants||(SamsungSCloudSyncService.mORSConstants=new ORSConstants),i=SamsungSCloudSyncService.mNetClient.getWithHeader(t,SamsungSCloudSyncService.mORSConstants.METADATA_HEADER_NAME,SamsungSCloudSyncService.mORSConstants.METADATA_HEADER_VALUE);break;default:SamsungSCloudSyncService.SyncLogs.log("handleRequest: Wrong Request.")}}catch(e){SamsungSCloudSyncService.SyncLogs.log(`handleRequest: IOException occured while Http Request, caused by : ${e.message}`)}else SamsungSCloudSyncService.SyncLogs.log("handleRequest: responseMeta is not defined");else SamsungSCloudSyncService.SyncLogs.log("handleRequest: json is not defined");else SamsungSCloudSyncService.SyncLogs.log("handleRequest: requestType is not defined");else SamsungSCloudSyncService.SyncLogs.log("handleRequest: nNetClient is not defined")},this.responseCallbackFromNetworkClient=function(e){this.createMetaResponse(e,null),null==e&&SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient:There is no Network Response.");const t=e.getBody(),n=e.getStatus();if(void 0!==n){switch(n){case 0:break;case HttpStatus.SC_BAD_REQUEST:if(void 0!==t)try{if((o=JSON.parse(t)).rcode){var r=o.rcode;SamsungSCloudSyncService.mServerCommonConstants||(SamsungSCloudSyncService.mServerCommonConstants=new ServerCommonConstants),SamsungSCloudSyncService.mServerCommonConstants.BAD_ACCESS_TOKEN==r&&SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient:Auth Token Exception")}}catch(e){SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient:JSON PARSER Exception")}else SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient: responseBody is not defined");default:if(void 0!==t)try{var o;(o=JSON.parse(t)).rcode&&(r=o.rcode,SamsungSCloudSyncService.SyncLogs.log(`responseCallbackFromNetworkClient: HTTPEXCEPTION, rcode is ${r}`))}catch(e){SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient: JSON PARSER Exception")}else SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient: responseBody is not defined")}this.callbackFromNWClient&&this.callbackFromNWClient(SamsungSCloudSyncService.mKVSResponse)}else SamsungSCloudSyncService.SyncLogs.log("responseCallbackFromNetworkClient: status is not defined")},this.cleanup=function(){}}function ICloudServiceManager(){this.CLOUD_START_R_CLEARED=-1,this.CLOUD_START_R_SUCCESS=0,this.CLOUD_START_R_SERVER_MAINTENCE=5,this.CLOUD_START_R_FULLSYNC=9,this.getRecordServiceManager=function(){},this.getFileServiceManager=function(){},this.serviceStart=function(e){},this.serviceEnd=function(e,t){},this.getLastApi=function(){},this.setLastApi=function(e){},this.getCtid=function(){},this.setCtid=function(e){},this.setAuthManager=function(e){},this.getAuthManager=function(){}}function IPDMServiceApiHelper(){this.addHeaderForApi=function(e){},this.getUserAgent=function(){}}function IRecordServiceManager(){IPDMServiceApiHelper.call(this),this.getServerTimeStamp=function(){},this.deleteItems=function(e){},this.setItems=function(e){},this.getItems=function(e){},this.getKeys=function(e,t){},this.getUpdates=function(e,t,n){},this.close=function(){}}function KVSConstants(){this.GETKEY="/kvs/key?",this.GETKEYS="/kvs/keys?",this.UPDATE="/kvs/updates?",this.DELETE="/kvs/?action=delete",this.SET="/kvs/?action=set",this.ITEMS="/kvs/items?",this.ITEM="/kvs/item?",this.TIMESTAMP="/kvs/timestamp?",this.START_TIMESTAMP="&start_timestamp=",this.START="&start=",this.COUNT="&count=",this.CLOUD_PREPARE="/cloud/prepare?",this.CLOUD_START="/cloud/start?",this.CLOUD_END="/cloud/end?",this.CDID="cdid",this.DID="did",this.CTID="ctid",this.RESULT="result",this.TRIGGER="trigger",this.RESULT_RCODE="r",this.RESULT_RCODE_SUC="0",this.RESULT_ERROR="e",this.SYNC_PUSH="sync_push",this.SYNC_SELF="sync_self",this.KVS={},this.ORS={},this.AUTH={},this.SERVICE={},this.CLOUD={},this.cleanup=function(){this.GETKEY=null,this.GETKEYS=null,this.UPDATE=null,this.DELETE=null,this.SET=null,this.ITEMS=null,this.ITEM=null,this.TIMESTAMP=null,this.START_TIMESTAMP=null,this.START=null,this.COUNT=null,this.CLOUD_PREPARE=null,this.CLOUD_START=null,this.CLOUD_END=null,this.CDID=null,this.DID=null,this.CTID=null,this.RESULT=null,this.TRIGGER=null,this.RESULT_RCODE=null,this.RESULT_RCODE_SUC=null,this.RESULT_ERROR=null,this.SYNC_PUSH=null,this.SYNC_SELF=null,this.KVS=null,this.ORS=null,this.AUTH=null,this.SERVICE=null,this.CLOUD=null},this.initializeKVSContants=function(){this.KVS.KEYS=211,this.KVS.UPDATES=212,this.KVS.ITEM=213,this.KVS.ITEMS=214,this.KVS.TIMESTAMP=215,this.KVS.SET=216,this.KVS.DELETE=217},this.initializeORSContants=function(){this.ORS.CREATE=310,this.ORS.DELETE=311,this.ORS.RENAME=312,this.ORS.MOVE=313,this.ORS.LIST=314,this.ORS.UPLOAD=315,this.ORS.DOWNLOAD=316,this.ORS.COPY=317,this.ORS.GET=318,this.ORS.SET=319},this.initializeAuthContants=function(){this.AUTH.GET_USER_INFO=410,this.AUTH.GET_USER_INFO_WEB=411},this.initializeServiceContants=function(){this.SERVICE.ACTIVATE=510,this.SERVICE.ACTIVATEON=511,this.SERVICE.DEACTIVATE=512,this.SERVICE.GET_DEVICE_LIST=513},this.initializeCloudContants=function(){this.CLOUD.PREPARE=810,this.CLOUD.START=811,this.CLOUD.END=812},this.initializeKVSContants(),this.initializeORSContants(),this.initializeAuthContants(),this.initializeServiceContants(),this.initializeCloudContants()}function KVSServiceManager(e,t){AbstractServiceManager.call(this,e,t),IRecordServiceManager.call(this,e,t),this.TAG="KVSServiceManager",this.APP_ID_HEADER="x-sc-appid",this.APP_ID=storageLocalApi.getItem(REFRESH_TOKEN)?APP_ID:OLD_APP_ID,SamsungSCloudSyncService.mNetClient||(SamsungSCloudSyncService.mNetClient=new NetworkClient),this.deleteItems=function(e,t){if(null==e)return null;SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const n=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==n&&SamsungSCloudSyncService.SyncLogs.log("deleteItems: There is NO Base URL.");let r=`https://${n}`;SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants),r=r.concat(SamsungSCloudSyncService.mKVSConstants.DELETE),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getPutApiParams(this.mCid)),r=r.concat("&"),r=r.concat(SamsungSCloudSyncService.mKVSConstants.CTID),r=r.concat("="),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid());let o=null;const s=[];for(let t=0;t<e.length;t++){const n=e[t];try{o=n.toJSON()}catch(e){SamsungSCloudSyncService.SyncLogs.log("deleteItems: JSON PARSER Exception")}s.push(o)}return SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.DELETE),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_POST,r.toString(),SamsungSCloudSyncService.mKVSResponse,JSON.stringify(s),null,t),SamsungSCloudSyncService.mKVSResponse},this.deleteItemsBySYNC1=function(e,t){if(null==e||0==e.length)return null;SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const n=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==n&&SamsungSCloudSyncService.SyncLogs.log("deleteItems: There is NO Base URL.");let r=`https://${n}`;SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants),r=r.concat(SamsungSCloudSyncService.mKVSConstants.DELETE),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getPutApiParams(this.mCid)),r=r.concat("&"),r=r.concat(SamsungSCloudSyncService.mKVSConstants.CTID),r=r.concat("="),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid());const o=e.map((e=>({key:e,timestamp:Date.now()})));return SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.DELETE),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_POST,r.toString(),SamsungSCloudSyncService.mKVSResponse,JSON.stringify(o),null,t),SamsungSCloudSyncService.mKVSResponse},this.setItems=function(e,t){if(null==e)return null;SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const n=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==n&&SamsungSCloudSyncService.SyncLogs.log("setItems: There is NO Base URL.");let r=`https://${n}`;SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants),r=r.concat(SamsungSCloudSyncService.mKVSConstants.SET),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getPutApiParams(this.mCid)),r=r.concat("&"),r=r.concat(SamsungSCloudSyncService.mKVSConstants.CTID),r=r.concat("="),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid());let o=null;const s=[];SamsungSCloudSyncService.SyncLogs.log(`setItems: RecordDataItem Size = ${e.length}`);for(let t=0;t<e.length;t++){const n=e[t];try{o=n.toJSON()}catch(e){SamsungSCloudSyncService.SyncLogs.log("setItems: JSON PARSER Exception")}s.push(o)}return SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.SET),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_POST,r.toString(),SamsungSCloudSyncService.mKVSResponse,JSON.stringify(s),null,t),SamsungSCloudSyncService.mKVSResponse},this.getItems=function(e,t){if(null==e)return null;SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const n=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==n&&SamsungSCloudSyncService.SyncLogs.log("getItems: There is NO Base URL.");let r=`https://${n}`;SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants),r=r.concat(SamsungSCloudSyncService.mKVSConstants.ITEM),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),r=r.concat("&"),r=r.concat(SamsungSCloudSyncService.mKVSConstants.CTID),r=r.concat("="),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid()),SamsungSCloudSyncService.mServerCommonConstants||(SamsungSCloudSyncService.mServerCommonConstants=new ServerCommonConstants);for(let t=0;t<e.length;t++)r=r.concat(SamsungSCloudSyncService.mServerCommonConstants.KEY),r=r.concat(e[t]);SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.ITEM),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,r.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,t)},this.getKeys=function(e,t,n,r){SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const o=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==o&&SamsungSCloudSyncService.SyncLogs.log("getKeys: There is NO Base URL."),SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants);let s=`https://${o}`;s=s.concat(SamsungSCloudSyncService.mKVSConstants.GETKEYS),s=s.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),s=s.concat(SamsungSCloudSyncService.mKVSConstants.START),s=s.concat(e),s=s.concat(SamsungSCloudSyncService.mKVSConstants.COUNT),s=s.concat(t),s=s.concat("&view=snapshot"),s=s.concat("&"),s=s.concat(SamsungSCloudSyncService.mKVSConstants.CTID),s=s.concat("="),s=s.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid()),s=s.concat("&coldStartable=true"),s=r?s.concat("&start_timestamp=1000000000000L"):s,SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.KEYS),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,s.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,n)},this.getUpdates=function(e,t,n,r){SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const o=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==o&&SamsungSCloudSyncService.SyncLogs.log("getUpdates: There is NO Base URL."),SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants);let s=`https://${o}`;s=s.concat(SamsungSCloudSyncService.mKVSConstants.UPDATE),s=s.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),s=s.concat(SamsungSCloudSyncService.mKVSConstants.START_TIMESTAMP),s=s.concat(e),null!=t&&0!=t.length&&(s=s.concat(SamsungSCloudSyncService.mServerCommonConstants.KEY),s=s.concat(t)),s=s.concat(SamsungSCloudSyncService.mKVSConstants.COUNT),s=s.concat(n),s=s.concat("&"),s=s.concat(SamsungSCloudSyncService.mKVSConstants.CTID),s=s.concat("="),s=s.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid()),SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.UPDATES),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,s.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,r)},this.getServerTimeStamp=function(e){SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const t=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==t&&SamsungSCloudSyncService.SyncLogs.log("getServerTimeStamp: There is NO Base URL."),SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants);let n=`https://${t}`;n=n.concat(SamsungSCloudSyncService.mKVSConstants.TIMESTAMP),n=n.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),n=n.concat("&"),n=n.concat(SamsungSCloudSyncService.mKVSConstants.CTID),n=n.concat("="),n=n.concat(SamsungSCloudSyncService.mCloudServiceManager.getCtid()),SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.KVS.TIMESTAMP),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,n.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,e)},this.addHeaderForApi=function(e){void 0!==e&&e.addHeader(this.APP_ID_HEADER,this.APP_ID)},this.getUserAgent=function(){return this.USER_AGENT},this.servicePrepare=function(e,t,n,r){SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const o=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==o&&SamsungSCloudSyncService.SyncLogs.log("servicePrepare: There is NO Base URL."),SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants);let s=`https://${o}`;return s=s.concat(SamsungSCloudSyncService.mKVSConstants.CLOUD_PREPARE),s=s.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),s=s.concat(`&${SamsungSCloudSyncService.mKVSConstants.DID}=02a1df9cafdeeb135c06e22e94c1f0b447b72a24cd4e78acf03225d33e5b54ce6830339f0d612c94681615976b06cd4d02e5&${SamsungSCloudSyncService.mKVSConstants.TRIGGER}=${e}&${SamsungSCloudSyncService.mKVSConstants.CDID}=CC:3A:61:00:4D:99&${SamsungSCloudSyncService.mKVSConstants.CTID}=${SamsungSCloudSyncService.mCloudServiceManager.getCtid()}&${SamsungSCloudSyncService.mKVSConstants.RESULT}=${SamsungSCloudSyncService.mCloudServiceManager.getLastApi()}${t?SamsungSCloudSyncService.mKVSConstants.RESULT_RCODE:SamsungSCloudSyncService.mKVSConstants.RESULT_ERROR}${n}`),SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.CLOUD.PREPARE),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,s.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,r),SamsungSCloudSyncService.mKVSResponse},this.serviceStart=function(e,t){SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager);const n=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();if(null==n)return SamsungSCloudSyncService.SyncLogs.log("serviceStart: There is NO Base URL."),!1;SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants);let r=`https://${n}`;r=r.concat(SamsungSCloudSyncService.mKVSConstants.CLOUD_START),r=r.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),r=r.concat(`&${SamsungSCloudSyncService.mKVSConstants.DID}=02a1df9cafdeeb135c06e22e94c1f0b447b72a24cd4e78acf03225d33e5b54ce6830339f0d612c94681615976b06cd4d02e5&${SamsungSCloudSyncService.mKVSConstants.TRIGGER}=${e}&${SamsungSCloudSyncService.mKVSConstants.CDID}=CC:3A:61:00:4D:99&${SamsungSCloudSyncService.mKVSConstants.CTID}=${SamsungSCloudSyncService.mCloudServiceManager.getCtid()}`),SamsungSCloudSyncService.mCloudServiceManager.setLastApi(SamsungSCloudSyncService.mKVSConstants.CLOUD.START),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,r.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,t)},this.serviceEnd=function(e,t,n){SamsungSCloudSyncService.mCloudServiceManager||(SamsungSCloudSyncService.mCloudServiceManager=new ICloudServiceManager),SamsungSCloudSyncService.mKVSConstants||(SamsungSCloudSyncService.mKVSConstants=new KVSConstants);const r=SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getBaseUrl();null==r&&SamsungSCloudSyncService.SyncLogs.log("serviceEnd: There is NO Base URL.");let o=`https://${r}`;o=o.concat(SamsungSCloudSyncService.mKVSConstants.CLOUD_END),o=o.concat(SamsungSCloudSyncService.mCloudServiceManager.getAuthManager().getGetApiParams(this.mCid)),o=o.concat(`&${SamsungSCloudSyncService.mKVSConstants.DID}=02a1df9cafdeeb135c06e22e94c1f0b447b72a24cd4e78acf03225d33e5b54ce6830339f0d612c94681615976b06cd4d02e5&${SamsungSCloudSyncService.mKVSConstants.CDID}=CC:3A:61:00:4D:99&${SamsungSCloudSyncService.mKVSConstants.CTID}=${SamsungSCloudSyncService.mCloudServiceManager.getCtid()}&${SamsungSCloudSyncService.mKVSConstants.RESULT}=${SamsungSCloudSyncService.mCloudServiceManager.getLastApi()}${e?SamsungSCloudSyncService.mKVSConstants.RESULT_RCODE:SamsungSCloudSyncService.mKVSConstants.RESULT_ERROR}${t}`),SamsungSCloudSyncService.mSyncConstants||(SamsungSCloudSyncService.mSyncConstants=new SyncConstants),SamsungSCloudSyncService.mKVSResponse||(SamsungSCloudSyncService.mKVSResponse=new KVSResponse),this.handleRequest(SamsungSCloudSyncService.mSyncConstants.REQUEST_GET,o.toString(),SamsungSCloudSyncService.mKVSResponse,null,null,n)}}function ORSConstants(){this.BOUNDARY="AaB03x",this.ORS="/ors",this.UPLOAD_FILE="?action=upload",this.FILE_NAME="&file_name=",this.FILE_TIMESTAMP="&timestamp=",this.METADATA="metadata",this.DOWNLOAD_FILE="?action=download",this.CREATE_FOLDER="?action=create",this.FOLDER_NAME="&folder_name=",this.DELETE_FILE="?action=delete",this.GETMETADATA="?action=get",this.METADATA_HEADER_NAME="Accept",this.METADATA_HEADER_VALUE="application/json",this.ERROR={},this.initializeErrorConstants=function(){this.ERROR.FOLDER_NOT_EXISTS=32e3,this.ERROR.FILE_NOT_EXISTS=32002,this.ERROR.RESOURCE_NOT_EXISTS=32006,this.ERROR.FOLDER_ALREADY_EXISTS=31e3},this.initializeErrorConstants()}function SCloudServiceManager(e,t){ICloudServiceManager.call(this),this.CLOUD_START_R_CLEARED=-1,this.CLOUD_START_R_SUCCESS=0,this.CLOUD_START_R_SERVER_MAINTENCE=5,this.CLOUD_START_R_FULLSYNC=9,this.mCtid=null,this.mLastApiCode=null,void 0!==e?SamsungSCloudSyncService.recordServiceManager||(SamsungSCloudSyncService.recordServiceManager=new KVSServiceManager(e,this)):SamsungSCloudSyncService.SyncLogs.log("SCloudServiceManager: cid is undefined"),this.serviceStart=function(e,t){return SamsungSCloudSyncService.recordServiceManager.serviceStart(e,t)},this.serviceEnd=function(e,t,n){return SamsungSCloudSyncService.recordServiceManager.serviceEnd(e,t,n)},this.getLastApi=function(){return this.mLastApiCode},this.getCtid=function(){return this.mCtid},this.getRecordServiceManager=function(){return SamsungSCloudSyncService.recordServiceManager},this.getFileServiceManager=function(){return SamsungSCloudSyncService.fileServiceManager},this.setLastApi=function(e){this.mLastApiCode=e},this.setCtid=function(e){this.mCtid=e},this.setAuthManager=function(e){SamsungSCloudSyncService.sAuthManager=e},this.getAuthManager=function(){return SamsungSCloudSyncService.sAuthManager}}function ServerCommonConstants(){this.USER_ID_PARM="&uid=",this.ACCESS_TOKEN_PARM="&access_token=",this.DEVICE_ID_PARM="&did=",this.CID_PARM="&cid=",this.KEY="&key=",this.CONTENT_TYPE_URI="Application/JSON;charset=UTF-8",this.KVS_SERVER_STORAGE_FULL=20003,this.ORS_SERVER_STORAGE_FULL=20004,this.BNR_SERVER_NOT_READY=20006,this.BNR_SERVER_MIGRATION=20007,this.BAD_ACCESS_TOKEN=19008,this.cleanup=function(){this.USER_ID_PARM=null,this.ACCESS_TOKEN_PARM=null,this.DEVICE_ID_PARM=null,this.CID_PARM=null,this.KEY=null,this.CONTENT_TYPE_URI=null,this.KVS_SERVER_STORAGE_FULL=null,this.ORS_SERVER_STORAGE_FULL=null,this.BNR_SERVER_NOT_READY=null,this.BNR_SERVER_MIGRATION=null,this.BAD_ACCESS_TOKEN=null}}function AbstractSyncAdapter(e){this.SYNC_META_DATA="SyncMetaData",this.SYNC_BASE_KEY="DATASYNC",this.TOO_OLD_TIME_STAMP=20002,this.TOO_YOUNG_TIME_STAMP=29006,this.UPDATE_TO_SERVER=0,this.DELETE_FROM_SERVER=1,this.SIZE=30,this.GET_KEYS_SIZE=1500,e&&(this.mServiceManager=e),SamsungSCloudSyncService.mContentProvider=SamsungSCloudSyncService.mContentProvider||new ContentProvider,SamsungSCloudSyncService.mSyncConstants=SamsungSCloudSyncService.mSyncConstants||new SyncConstants,SamsungSCloudSyncService.mICloudServiceManager=SamsungSCloudSyncService.mICloudServiceManager||new ICloudServiceManager,SamsungSCloudSyncService.mServerCommonConstants=SamsungSCloudSyncService.mServerCommonConstants||new ServerCommonConstants,SamsungSCloudSyncService.mBrowserConstants=SamsungSCloudSyncService.mBrowserConstants||new BrowserConstants,SamsungSCloudSyncService.mClientDeviceId&&!SamsungSCloudSyncService.mClientDeviceId.match(SamsungSCloudSyncService.OLD_SYNC_KEY)||(SamsungSCloudSyncService.mAppTool=SamsungSCloudSyncService.mAppTool||new AppTool,SamsungSCloudSyncService.mClientDeviceId=SamsungSCloudSyncService.mAppTool.getClientDeviceId()),this.mServerChangedRecords=new Hash,this.mLastSyncTime=null,this.serverTimeStamp=null,this.mbSyncCanceled=!1,this.mBuilder=null,this.respItems=[],this.mTimeManager=new TimeManager,AbstractSyncAdapterGlobal=this,AbstractSyncAdapterGlobal.mLastSyncTime=null,this.getSyncAdapterName=function(){},this.getContentUri=function(){},this.getDeletedColumnName=function(){},this.getKeyColumnName=function(){},this.getIdColumnName=function(){},this.getDirtyColumnName=function(){},this.getBuilder=function(){},this.getCallerSyncAdapter=function(){},this.getAccountName=function(){},this.getAccountType=function(){},this.getTag=function(){},this.getCid=function(){},this.getCtidKey=function(){},this.getTimeStampColumnName=function(){},this.getProvider=function(){return SamsungSCloudSyncService.mContentProvider},this.getLocalUpdatesSelection=function(){return`${AbstractSyncAdapterGlobal.getDirtyColumnName()} = 1`},this.getLocalUpdatesSortOrder=function(){return`${AbstractSyncAdapterGlobal.getDeletedColumnName()} DESC`},this.getLocalUpdatesAccDetails=function(){return`${AbstractSyncAdapterGlobal.getAccountName()} = '${SamsungSCloudSyncService.mSyncConstants.ACCOUNT_NAME}' AND ${AbstractSyncAdapterGlobal.getAccountType()} = '${SamsungSCloudSyncService.mSyncConstants.ACCOUNT_TYPE}'`},this.getSplitServerChangeSize=function(){return 100},this.getLocalupdatesUri=function(){return AbstractSyncAdapterGlobal.getContentUri()},this.doUpdateDelete=function(e,t,n){if(AbstractSyncAdapterGlobal.getProvider().Delete(AbstractSyncAdapterGlobal.getContentUri(),{equals:[{key:AbstractSyncAdapterGlobal.getIdColumnName(),value:e.getID()}]},null),!t.isDeleted()){const e=record.getValue();if(null==e||0==e.length)return!1;AbstractSyncAdapterGlobal.mBuilder||(AbstractSyncAdapterGlobal.mBuilder=AbstractSyncAdapterGlobal.getBuilder()),AbstractSyncAdapterGlobal.mBuilder.insert(e,record.getKEY(),record.getTimeStamp())}return!0},this.doInsert=function(e,t,n,r){const o=t.getValue();return null!=o&&0!=o.length&&(null==AbstractSyncAdapterGlobal.mBuilder&&(AbstractSyncAdapterGlobal.mBuilder=AbstractSyncAdapterGlobal.getBuilder()),AbstractSyncAdapterGlobal.mBuilder.insert(o,t.getKEY(),t.getTimeStamp(),r),!0)},this.fixParentIdsUpdateCallback=async function(){AbstractSyncAdapterGlobal.fixParentIdsUpdateOps=[],AbstractSyncAdapterGlobal.mbSyncCanceled?SamsungSCloudSyncService.SyncLogs.log("fixParentIdsUpdateCallback SYNC_CANCELLED"):(null!=AbstractSyncAdapterGlobal.mLastSyncTime&&null!=AbstractSyncAdapterGlobal.serverTimeStamp&&(await storageLocalApi.setItem(AbstractSyncAdapterGlobal.getSyncAdapterName(),AbstractSyncAdapterGlobal.serverTimeStamp),SamsungSCloudSyncService.SyncLogs.log(`Save Last Sync Time (serverTimeStamp): ${AbstractSyncAdapterGlobal.serverTimeStamp}`),SamsungSCloudSyncService.SyncLogs.log(`mLastSyncTime: ${AbstractSyncAdapterGlobal.mLastSyncTime}`)),0==AbstractSyncAdapterGlobal.mServerChangedRecords.size()?null!=AbstractSyncAdapterGlobal.mServiceManager.getAuthManager()?(AbstractSyncAdapterGlobal.serviceEndCallbackFromNetworkClient=AbstractSyncAdapterGlobal.serviceEndCallbackFromNetworkClient.bind(AbstractSyncAdapterGlobal),AbstractSyncAdapterGlobal.serviceEndCallbackFromNetworkClient()):SamsungSCloudSyncService.SyncLogs.log("No Auth Info.. Can not call cloud-end"):(SamsungSCloudSyncService.SyncLogs.log("updateLocalDb Again"),AbstractSyncAdapterGlobal.updateLocalDb()))},this.fixParentIdsQueryCallback=function(e){if(null==e||void 0===e.length||0==e.length)return AbstractSyncAdapterGlobal.fixParentIdsUpdateCallback();getBrowserName().toUpperCase();const t=e=>void 0!==e,n=[...e].filter((({_ID:e,SYNC4:n})=>[e,n].every(t)));AbstractSyncAdapterGlobal.fixParentIdsUpdateOps=[],DB.Query.bookmarks({selection:["_ID","SYNC4"],where:{ins:[{key:"_ID",value:[IMPORTED_FOLDER_IDS.CHROME,IMPORTED_FOLDER_IDS.EDGE,IMPORTED_FOLDER_IDS.OPERA]}]}}).then((e=>{let t={CHROME:!1,EDGE:!1,OPERA:!1};const r=e.length?Object.keys(e):[],o={CHROME:!1,EDGE:!1,OPERA:!1};r.forEach((t=>{Object.keys(o).forEach((n=>{o[n]=!o[n]&&e[t]._ID==IMPORTED_FOLDER_IDS[n]}))})),n.forEach((({_ID:e,SYNC4:n})=>{Object.keys(o).forEach((r=>{n.indexOf(importFolderSYNC4EndsFromKey(r))>=0&&!o[r]&&!t[r]&&(AbstractSyncAdapterGlobal.fixParentIdsUpdateOps.push(new BatchOperation("UPDATE",AbstractSyncAdapterGlobal.getContentUri(),{_ID:IMPORTED_FOLDER_IDS[r]},{equals:[{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SYNC4,value:n}]},null,null)),e=IMPORTED_FOLDER_IDS[r],t[r]=!0)}));const r={[SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.PARENT]:e};AbstractSyncAdapterGlobal.fixParentIdsUpdateOps.push(new BatchOperation("UPDATE",AbstractSyncAdapterGlobal.getContentUri(),r,{equals:[{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SYNC3,value:n}]},null,null))})),AbstractSyncAdapterGlobal.getProvider().applyBatch(AbstractSyncAdapterGlobal.fixParentIdsUpdateOps,AbstractSyncAdapterGlobal.fixParentIdsUpdateCallback)}))},this.fixParentIds=function(){const e=[AbstractSyncAdapterGlobal.getIdColumnName(),SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.SYNC4],t={equals:[{key:SamsungSCloudSyncService.mBrowserConstants.BOOKMARKS.IS_FOLDER,value:1},{key:AbstractSyncAdapterGlobal.getAccountName(),value:SamsungSCloudSyncService.mSyncConstants.ACCOUNT_NAME},{key:AbstractSyncAdapterGlobal.getAccountType(),value:SamsungSCloudSyncService.mSyncConstants.ACCOUNT_TYPE}]};SamsungSCloudSyncService.mContentProvider.Query(AbstractSyncAdapterGlobal.getContentUri(),e,t,null,null,AbstractSyncAdapterGlobal.fixParentIdsQueryCallback)},this.updateLocalDb=function(){let e=0;null==AbstractSyncAdapterGlobal.mBuilder&&(AbstractSyncAdapterGlobal.mBuilder=AbstractSyncAdapterGlobal.getBuilder()),AbstractSyncAdapterGlobal.itemsKeys=[],AbstractSyncAdapterGlobal.itemsStart=0,AbstractSyncAdapterGlobal.itemsEnd=0,SamsungSCloudSyncService.SyncLogs.log(`mServerChangedRecords Size = ${AbstractSyncAdapterGlobal.mServerChangedRecords.size()}`),AbstractSyncAdapterGlobal.mServerChangedRecords.each(((t,n)=>{AbstractSyncAdapterGlobal.itemsKeys.push(t),e+=n.getSize()})),AbstractSyncAdapterGlobal.itemsKeys.length>0&&AbstractSyncAdapterGlobal.getItemsFromKeys(),0==AbstractSyncAdapterGlobal.mServerChangedRecords.size()&&AbstractSyncAdapterGlobal.cloudServiceEnd()},this.getItemsFromKeys=function(){if(AbstractSyncAdapterGlobal.itemsEnd=AbstractSyncAdapterGlobal.itemsStart+AbstractSyncAdapterGlobal.SIZE,AbstractSyncAdapterGlobal.mbSyncCanceled)SamsungSCloudSyncService.SyncLogs.log("SYNC_CANCELLED");else try{if(AbstractSyncAdapterGlobal.itemsKeys.length<AbstractSyncAdapterGlobal.itemsEnd&&(AbstractSyncAdapterGlobal.itemsEnd=AbstractSyncAdapterGlobal.itemsKeys.length),AbstractSyncAdapterGlobal.itemsEnd==AbstractSyncAdapterGlobal.itemsStart)return SamsungSCloudSyncService.SyncLogs.log("Get Items are completed"),void(null!=AbstractSyncAdapterGlobal.mServerChangedRecords&&0!=AbstractSyncAdapterGlobal.mServerChangedRecords.size()?(SamsungSCloudSyncService.SyncLogs.log("updateLocalDb"),AbstractSyncAdapterGlobal.updateLocalDb()):AbstractSyncAdapterGlobal.cloudServiceEnd());console.log(`Start: ${Date.now()}`);const e=AbstractSyncAdapterGlobal.getCloudServiceManager();AbstractSyncAdapterGlobal.getItemsCallback=AbstractSyncAdapterGlobal.getItemsCallback.bind(AbstractSyncAdapterGlobal),AbstractSyncAdapterGlobal.respItems=[];const t=JSON.parse(JSON.stringify(AbstractSyncAdapterGlobal.itemsKeys));for(;t.length>0;){let n=t.splice(0,AbstractSyncAdapterGlobal.SIZE);e.getRecordServiceManager().getItems(n,AbstractSyncAdapterGlobal.getItemsCallback)}}catch(e){SamsungSCloudSyncService.SyncLogs.log(`getItemsFromKeys: UpdateLocalDb: Sync exception recieved :- ${e}`)}},this.getItemsCallback=function(e){if(0==e.getResponseCode()){let r=e.getItemDetailsList();if(AbstractSyncAdapterGlobal.respItems.push(...r),AbstractSyncAdapterGlobal.respItems.length<AbstractSyncAdapterGlobal.itemsKeys.length)return;if(null==AbstractSyncAdapterGlobal.respItems||0==AbstractSyncAdapterGlobal.respItems.length)return SamsungSCloudSyncService.SyncLogs.log("UpdateLocalDb: No records for KEY List "),void(null!=AbstractSyncAdapterGlobal.mServerChangedRecords&&0!=AbstractSyncAdapterGlobal.mServerChangedRecords.size()?(SamsungSCloudSyncService.SyncLogs.log("updateLocalDb"),AbstractSyncAdapterGlobal.updateLocalDb()):AbstractSyncAdapterGlobal.cloudServiceEnd());let o=0;for(let e=0;e<AbstractSyncAdapterGlobal.respItems.length;e++){var n=AbstractSyncAdapterGlobal.mServerChangedRecords.get(AbstractSyncAdapterGlobal.respItems[e].getKEY());if(null!=n){if(AbstractSyncAdapterGlobal.mbSyncCanceled)return void SamsungSCloudSyncService.SyncLogs.log("getItemsCallback: SYNC_CANCELLED");if(n.getID()>0||Object.keys(IMPORTED_FOLDER_IDS).some((e=>IMPORTED_FOLDER_IDS[e]===n.getID()))){if(!AbstractSyncAdapterGlobal.doUpdateDelete(n,AbstractSyncAdapterGlobal.respItems[e],null)){AbstractSyncAdapterGlobal.mServerChangedRecords.unset(AbstractSyncAdapterGlobal.respItems[e].getKEY());continue}}else if(!AbstractSyncAdapterGlobal.respItems[e].isDeleted()){o++;const r=AbstractSyncAdapterGlobal.respItems[e];if(!AbstractSyncAdapterGlobal.doInsert(n,r,null,(e=>t(e,r)))){AbstractSyncAdapterGlobal.mServerChangedRecords.unset(AbstractSyncAdapterGlobal.respItems[e].getKEY());continue}}if(AbstractSyncAdapterGlobal.mbSyncCanceled)return void SamsungSCloudSyncService.SyncLogs.log("getItemsCallback: SYNC_CANCELLED");AbstractSyncAdapterGlobal.mServerChangedRecords.unset(AbstractSyncAdapterGlobal.respItems[e].getKEY())}else SamsungSCloudSyncService.SyncLogs.log(`GetItems returned a key which isn't found in list of serverkeys.Key = ${AbstractSyncAdapterGlobal.respItems[e].getKEY()}`),AbstractSyncAdapterGlobal.mServerChangedRecords.unset(AbstractSyncAdapterGlobal.respItems[e].getKEY())}AbstractSyncAdapterGlobal.respItems=[]}null!=AbstractSyncAdapterGlobal.mServerChangedRecords&&0!=AbstractSyncAdapterGlobal.mServerChangedRecords.size()?(SamsungSCloudSyncService.SyncLogs.log("getItemsCallback: updateLocalDb"),AbstractSyncAdapterGlobal.updateLocalDb()):(SamsungSCloudSyncService.SyncLogs.log("getItemsCallback: inside else case of itemsKeys.length > else case"),AbstractSyncAdapterGlobal.cloudServiceEnd())},this.doApplyBatch=function(e){if(null==e)return;null==AbstractSyncAdapterGlobal.mBuilder&&(AbstractSyncAdapterGlobal.mBuilder=AbstractSyncAdapterGlobal.getBuilder());let t=0;const n=e.length,r=AbstractSyncAdapterGlobal.mBuilder.getBatchSize();let o=0,s=[];for(;n>t;){o=t+r,n<o&&(o=n),s=[];const i=s.concat(e.slice(t,o));AbstractSyncAdapterGlobal.getProvider().applyBatch(i,AbstractSyncAdapterGlobal.doApplyBatchCallback),t=o}},this.doApplyBatchCallback=function(){SamsungSCloudSyncService.SyncLogs.log("doApplyBatchCallback is called"),AbstractSyncAdapterGlobal.updateKeyOperation=[],AbstractSyncAdapterGlobal.updatetoServer(AbstractSyncAdapterGlobal.recordstoSetList,AbstractSyncAdapterGlobal.recordsToDeleteList)},this.getServerUpdates=function(){AbstractSyncAdapterGlobal.ServerChanges=new Hash,AbstractSyncAdapterGlobal.getServerUpdate(AbstractSyncAdapterGlobal.ServerChanges)},this.getServerUpdate=function(e){return SamsungSCloudSyncService.SyncLogs.log(`getServerUpdate:: mLastSyncTime:${AbstractSyncAdapterGlobal.mLastSyncTime}`),null==AbstractSyncAdapterGlobal.mLastSyncTime?AbstractSyncAdapterGlobal.getAllkeys(e,""):AbstractSyncAdapterGlobal.getAllUpdates(e,null)},this.handleError=function(e,t){switch(e){case this.TOO_YOUNG_TIME_STAMP:case this.TOO_OLD_TIME_STAMP:return n(t,"",!0);default:SamsungSCloudSyncService.SyncLogs.log(`handleError: GetUpdates returned unHandled response code = ${e}`)}return null},this.getAllUpdates=function(e,t){SamsungSCloudSyncService.startKey=null;const n=this.getCloudServiceManager();this.getUpdatesCallbackFromNetworkClient=this.getUpdatesCallbackFromNetworkClient.bind(this),n.getRecordServiceManager().getUpdates(AbstractSyncAdapterGlobal.mLastSyncTime,t,this.GET_KEYS_SIZE,this.getUpdatesCallbackFromNetworkClient)},this.getUpdatesCallbackFromNetworkClient=function(e){if(0==e.getResponseCode()?(AbstractSyncAdapterGlobal.addToDownloadKeyList(e,AbstractSyncAdapterGlobal.ServerChanges),SamsungSCloudSyncService.startKey=e.getNextKey(),AbstractSyncAdapterGlobal.mLastSyncTime=e.getMaxTimeStamp(),SamsungSCloudSyncService.SyncLogs.log(`getUpdatesCallbackFromNetworkClient: mLastSyncTime${AbstractSyncAdapterGlobal.mLastSyncTime}`)):SamsungSCloudSyncService.SyncLogs.log(`getUpdatesCallbackFromNetworkClient: GetKeys returned${e.getResponseCode()}`),null!=SamsungSCloudSyncService.startKey&&0!=SamsungSCloudSyncService.startKey.length)AbstractSyncAdapterGlobal.getAllUpdates(AbstractSyncAdapterGlobal.ServerChanges,SamsungSCloudSyncService.startKey);else if(""==e.getNextKey()){const e=new Hash;let t=new Hash,n=0;AbstractSyncAdapterGlobal.ServerChanges.each(((t,r)=>{n++,e.set(t,r)})),AbstractSyncAdapterGlobal.removePreSyncedRecords(e),t=e,0==AbstractSyncAdapterGlobal.mServerChangedRecords.size()?AbstractSyncAdapterGlobal.mServerChangedRecords=t:t.each(((e,t)=>{AbstractSyncAdapterGlobal.mServerChangedRecords.set(e,t)})),SamsungSCloudSyncService.SyncLogs.log(`Server Records Size = ${AbstractSyncAdapterGlobal.mServerChangedRecords.size()}`),1==SamsungSCloudSyncService.Once&&(SamsungSCloudSyncService.Once=0,AbstractSyncAdapterGlobal.getServerUpdatesCallback())}},this.getAllkeys=n,this.getKeysCallbackFromNetworkClient=function(e){if(0==e.getResponseCode()?(AbstractSyncAdapterGlobal.addToDownloadKeyList(e,AbstractSyncAdapterGlobal.ServerChanges),SamsungSCloudSyncService.startKey=e.getNextKey(),AbstractSyncAdapterGlobal.mLastSyncTime=e.getMaxTimeStamp(),SamsungSCloudSyncService.SyncLogs.log(`GetKeys mLastSyncTime: ${AbstractSyncAdapterGlobal.mLastSyncTime}`)):SamsungSCloudSyncService.SyncLogs.log(`GetKeys returned${e.getResponseCode()}`),null!=e.getNextKey()&&0!=e.getNextKey().length)AbstractSyncAdapterGlobal.getAllkeys(AbstractSyncAdapterGlobal.ServerChanges,SamsungSCloudSyncService.startKey);else if(""==e.getNextKey()){const e=new Hash;let t=new Hash,n=0;AbstractSyncAdapterGlobal.ServerChanges.each(((t,r)=>{n++,e.set(t,r)})),AbstractSyncAdapterGlobal.removePreSyncedRecords(e),t=e,0==AbstractSyncAdapterGlobal.mServerChangedRecords.size()?AbstractSyncAdapterGlobal.mServerChangedRecords=t:t.each(((e,t)=>{AbstractSyncAdapterGlobal.mServerChangedRecords.set(e,t)})),SamsungSCloudSyncService.SyncLogs.log(`Server Records Size = ${AbstractSyncAdapterGlobal.mServerChangedRecords.size()}`)}},this.addToDownloadKeyList=async function(e){const t=e.getKeyDetailList();if(null==t||0==t.length)return!1;for(let e=0;e<t.length;e++){const n=t[e],r=new KVSItem(-1,n.isDeleted(),n.getTimeStamp(),null,n.getSize());SamsungSCloudSyncService.firstSyncCompleted?n.getKEY().match(SamsungSCloudSyncService.OLD_SYNC_KEY)?n.getKEY().match(SamsungSCloudSyncService.CURRENT_DATE_TIME)&&AbstractSyncAdapterGlobal.ServerChanges.set(n.getKEY(),r):AbstractSyncAdapterGlobal.ServerChanges.set(n.getKEY(),r):n.isDeleted()||AbstractSyncAdapterGlobal.ServerChanges.set(n.getKEY(),r)}return AbstractSyncAdapterGlobal.ServerChanges.length>0&&(await storageLocalApi.setItem(MAX_PROGRESS,AbstractSyncAdapterGlobal.ServerChanges.length),chrome.runtime.sendMessage({KEY_DOWNLOAD_STATUS:AbstractSyncAdapterGlobal.ServerChanges.length})),!0},this.handleException=function(e,t){},this.cancelSync=function(){SamsungSCloudSyncService.SyncLogs.log("cancelSync: SYNC CANCELLED!!!"),AbstractSyncAdapterGlobal.mbSyncCanceled=!0,this.getCloudServiceManager().getRecordServiceManager().close()},this.performSync=function(e){if(AbstractSyncAdapterGlobal.mbSyncCanceled=!1,SamsungSCloudSyncService.mAppTool||(SamsungSCloudSyncService.mAppTool=new AppTool),this.getCloudServiceManager().setCtid(this.getCtidKey()+SamsungSCloudSyncService.mAppTool.generateCTID(8)),this.mServiceManager.setAuthManager(SamsungSCloudSyncService.sAuthManager),AbstractSyncAdapterGlobal.mbSyncCanceled)return void SamsungSCloudSyncService.SyncLogs.log("performSync: SYNC_CANCELLED");SamsungSCloudSyncService.SyncLogs.log("performSync: PERFORM SYNC : START "+Date.now());const t=storageLocalApi.getItem(AbstractSyncAdapterGlobal.getSyncAdapterName());AbstractSyncAdapterGlobal.mLastSyncTime=0==t?null:t,SamsungSCloudSyncService.SyncLogs.log(`performSync: LastSyncTime: ${AbstractSyncAdapterGlobal.mLastSyncTime}`),null!=this.mServiceManager.getAuthManager()?(AbstractSyncAdapterGlobal.handleSync(),AbstractSyncAdapterGlobal.result="0"):SamsungSCloudSyncService.SyncLogs.log("performSync: No Auth Info.. Can not call cloud-start")},this.serviceEndCallbackFromNetworkClient=function(){null!=AbstractSyncAdapterGlobal.mServerChangedRecords&&(AbstractSyncAdapterGlobal.mServerChangedRecords=new Hash),AbstractSyncAdapterGlobal.mBuilder=null,AbstractSyncAdapterGlobal.mbSyncCanceled=!1,SamsungSCloudSyncService.BrowserOverlay.clearSyncTimeoutInterval(),"ALL_SYNC"==SamsungSCloudSyncService.currentSync?(SamsungSCloudSyncService.syncBookmarksInDB=!0,SamsungSCloudSyncService.SyncLogs.log("Bookmark Sync Completed"),SamsungSCloudSyncService.mSyncCancelled||(SamsungSCloudSyncService.SyncLogs.log("Bookmark Sync Completed"),chrome.runtime.sendMessage({SYNC:SamsungSCloudSyncService.firstSyncCompleted?"BOOKMARK_SYNC_COMPLETED":"FIRST_BOOKMARK_SYNC_COMPLETED"})),SamsungSCloudSyncService.firstSyncCompleted=!0,isOpenTabsSyncOn()?(SamsungSCloudSyncService.currentSync="TAB_SYNC",SamsungSCloudSyncService.BrowserOverlay.startSync()):r()):"TAB_SYNC"==SamsungSCloudSyncService.currentSync&&(SamsungSCloudSyncService.syncTabsInDB=!0,SamsungSCloudSyncService.SyncLogs.log("Tabs Sync Completed"),SamsungSCloudSyncService.mSyncCancelled||(SamsungSCloudSyncService.SyncLogs.log("Tabs Sync Completed"),chrome.runtime.sendMessage({SYNC:SamsungSCloudSyncService.firstSyncCompleted?"TAB_SYNC_COMPLETED":"FIRST_TAB_SYNC_COMPLETED"})),SamsungSCloudSyncService.firstSyncCompleted=!0,r())},this.deleteItemsCallback=function(e){AbstractSyncAdapterGlobal.handleResponse(e,AbstractSyncAdapterGlobal.operations,AbstractSyncAdapterGlobal.DELETE_FROM_SERVER,AbstractSyncAdapterGlobal.deleteEnd-AbstractSyncAdapterGlobal.deleteStart),AbstractSyncAdapterGlobal.deleteStart=AbstractSyncAdapterGlobal.deleteEnd,AbstractSyncAdapterGlobal.recordsToDeleteList.length>AbstractSyncAdapterGlobal.deleteStart?AbstractSyncAdapterGlobal.deleteFromServer():(AbstractSyncAdapterGlobal.recordsToDeleteList=0,AbstractSyncAdapterGlobal.uploadStart=0,AbstractSyncAdapterGlobal.uploadEnd=0,AbstractSyncAdapterGlobal.uploadToServer())},this.deleteFromServer=function(){if(AbstractSyncAdapterGlobal.recordsToDeleteList.length>0){AbstractSyncAdapterGlobal.deleteEnd=AbstractSyncAdapterGlobal.deleteStart+AbstractSyncAdapterGlobal.SIZE,AbstractSyncAdapterGlobal.recordsToDeleteList.length<AbstractSyncAdapterGlobal.deleteEnd&&(AbstractSyncAdapterGlobal.deleteEnd=AbstractSyncAdapterGlobal.recordsToDeleteList.length);const e=AbstractSyncAdapterGlobal.getCloudServiceManager();AbstractSyncAdapterGlobal.deleteItemsCallback=AbstractSyncAdapterGlobal.deleteItemsCallback.bind(AbstractSyncAdapterGlobal),e.getRecordServiceManager().deleteItems(AbstractSyncAdapterGlobal.recordsToDeleteList.slice(AbstractSyncAdapterGlobal.deleteStart,AbstractSyncAdapterGlobal.deleteEnd),AbstractSyncAdapterGlobal.deleteItemsCallback)}else AbstractSyncAdapterGlobal.recordsToDeleteList=0,AbstractSyncAdapterGlobal.uploadStart=0,AbstractSyncAdapterGlobal.uploadEnd=0,AbstractSyncAdapterGlobal.uploadToServer()},this.setItemsCallback=function(e){AbstractSyncAdapterGlobal.handleResponse(e,AbstractSyncAdapterGlobal.operations,AbstractSyncAdapterGlobal.UPDATE_TO_SERVER,AbstractSyncAdapterGlobal.uploadEnd-AbstractSyncAdapterGlobal.uploadStart),AbstractSyncAdapterGlobal.uploadStart=AbstractSyncAdapterGlobal.uploadEnd,AbstractSyncAdapterGlobal.recordstoSetList.length>AbstractSyncAdapterGlobal.uploadStart?AbstractSyncAdapterGlobal.uploadToServer():(AbstractSyncAdapterGlobal.recordstoSetList=[],AbstractSyncAdapterGlobal.updateLocal(AbstractSyncAdapterGlobal.operations))},this.uploadToServer=function(){if(AbstractSyncAdapterGlobal.recordstoSetList.length>0){AbstractSyncAdapterGlobal.uploadEnd=AbstractSyncAdapterGlobal.uploadStart+AbstractSyncAdapterGlobal.SIZE,AbstractSyncAdapterGlobal.recordstoSetList.length<AbstractSyncAdapterGlobal.uploadEnd&&(AbstractSyncAdapterGlobal.uploadEnd=AbstractSyncAdapterGlobal.recordstoSetList.length);const e=AbstractSyncAdapterGlobal.getCloudServiceManager();AbstractSyncAdapterGlobal.setItemsCallback=AbstractSyncAdapterGlobal.setItemsCallback.bind(AbstractSyncAdapterGlobal),SamsungSCloudSyncService.kvsResponse=e.getRecordServiceManager().setItems(AbstractSyncAdapterGlobal.recordstoSetList.slice(AbstractSyncAdapterGlobal.uploadStart,AbstractSyncAdapterGlobal.uploadEnd),AbstractSyncAdapterGlobal.setItemsCallback)}else AbstractSyncAdapterGlobal.recordstoSetList=[],AbstractSyncAdapterGlobal.updateLocal(AbstractSyncAdapterGlobal.operations)},this.updateLocal=function(e){0==e.length&&AbstractSyncAdapterGlobal.updateLocalCallback(),null==AbstractSyncAdapterGlobal.mBuilder&&(AbstractSyncAdapterGlobal.mBuilder=AbstractSyncAdapterGlobal.getBuilder());let t=0;const n=AbstractSyncAdapterGlobal.mBuilder.getBatchSize(),r=e.length;let o=0,s=[];for(;r>t;){o=t+n,r<o&&(o=r),s=[];const i=s.concat(e.slice(t,o));AbstractSyncAdapterGlobal.getProvider().applyBatch(i,AbstractSyncAdapterGlobal.updateLocalCallback),t=o}},this.updateLocalCallback=function(){SamsungSCloudSyncService.SyncLogs.log("updateLocalCallback is called "),operations=[],null!=AbstractSyncAdapterGlobal.mServerChangedRecords&&0!=AbstractSyncAdapterGlobal.mServerChangedRecords.size()?(SamsungSCloudSyncService.SyncLogs.log("updateLocalCallback: updateLocalDb"),AbstractSyncAdapterGlobal.updateLocalDb()):AbstractSyncAdapterGlobal.cloudServiceEnd()},this.updatetoServer=function(e,t){AbstractSyncAdapterGlobal.operations=[],AbstractSyncAdapterGlobal.deleteStart=0,AbstractSyncAdapterGlobal.deleteEnd=0,AbstractSyncAdapterGlobal.deleteFromServer()},this.getBaseKeyHeader=function(){return AbstractSyncAdapterGlobal.SYNC_BASE_KEY},this.getSyncUnitKeyHeader=function(){return`${AbstractSyncAdapterGlobal.getBaseKeyHeader()}_${AbstractSyncAdapterGlobal.getSyncAdapterName()}`},this.getSyncUnitDeviceKeyHeader=function(){const e=new BrowserConstants;return AbstractSyncAdapterGlobal.getContentUri()===e.BROWSER_BOOKMARK_URI&&(SamsungSCloudSyncService.mClientDeviceId=e.EXT_DEVICE_ID),`${AbstractSyncAdapterGlobal.getSyncUnitKeyHeader()}_${SamsungSCloudSyncService.mClientDeviceId}`},this.generateKey=function(){const e=SamsungSCloudSyncService.BrowserOverlay.randomUUID();return`${AbstractSyncAdapterGlobal.getSyncUnitDeviceKeyHeader()}_${e}_${SamsungSCloudSyncService.CURRENT_DATE_TIME}`},this.handleUpdateToServerRecord=function(e,t){e.DIRTY=0,e.SYNC5=t.getTimeStamp()},this.handleResponse=function(e,t,n,r){if(null!=e&&0==e.getResponseCode()){const r=e.getItemResponseList();if(null==r||0==r.length)return;const o={};for(let e=0;e<r.length;e++){const s=r[e];if(0==s.getRcode()){const e=AbstractSyncAdapterGlobal.mLocalChangedRecords.get(s.getKEY());if(null==e)continue;n==AbstractSyncAdapterGlobal.UPDATE_TO_SERVER?(AbstractSyncAdapterGlobal.handleUpdateToServerRecord(o,s),t.push(new BatchOperation("UPDATE",AbstractSyncAdapterGlobal.getContentUri(),o,{equals:[{key:"_ID",value:e}]},null,null))):t.push(new BatchOperation("DELETE",AbstractSyncAdapterGlobal.getContentUri(),null,{equals:[{key:"_ID",value:e}]},null,null)),AbstractSyncAdapterGlobal.mLocalChangedRecords.unset(s.getKEY())}else s.getRcode()!=SamsungSCloudSyncService.mServerCommonConstants.KVS_SERVER_STORAGE_FULL&&s.getRcode()!=SamsungSCloudSyncService.mServerCommonConstants.ORS_SERVER_STORAGE_FULL||AbstractSyncAdapterGlobal.notifyServerStoragefull()}}else e.getResponseCode()!=SamsungSCloudSyncService.mServerCommonConstants.KVS_SERVER_STORAGE_FULL&&e.getResponseCode()!=SamsungSCloudSyncService.mServerCommonConstants.ORS_SERVER_STORAGE_FULL||AbstractSyncAdapterGlobal.notifyServerStoragefull()},this.getLocalUpdatesQueryCallback=function(e){if(SamsungSCloudSyncService.SyncLogs.log("getLocalUpdatesQueryCallback"),null==e||void 0===e.length||0==e.length)return SamsungSCloudSyncService.SyncLogs.log("Sorry, There is no data in Database, Can't perform Upsync"),void(null!=AbstractSyncAdapterGlobal.mServerChangedRecords&&0!=AbstractSyncAdapterGlobal.mServerChangedRecords.size()?(SamsungSCloudSyncService.SyncLogs.log("getLocalUpdatesQueryCallback: updateLocalDb"),AbstractSyncAdapterGlobal.updateLocalDb()):AbstractSyncAdapterGlobal.cloudServiceEnd());let t=-1,n=null,r=-1,o=0,s=null;const i=AbstractSyncAdapterGlobal.getContentUri();AbstractSyncAdapterGlobal.updateKeyOperation=[],AbstractSyncAdapterGlobal.recordstoSetList=[],AbstractSyncAdapterGlobal.recordsToDeleteList=[];let a=0;AbstractSyncAdapterGlobal.mLocalChangedRecords=new Hash;const c=e.length;if(null==AbstractSyncAdapterGlobal.mBuilder&&(AbstractSyncAdapterGlobal.mBuilder=AbstractSyncAdapterGlobal.getBuilder()),!(c<1)){for(let S=0;S<c;S++)if(t="1"==e[S].IS_DELETED,n=e[S].SYNC1,r=e[S]._ID,o=e[S].SYNC5,0==o&&(SamsungSCloudSyncService.SyncLogs.log("getLocalUpdatesQueryCallback:TimeStamp is NULL....cannot be NULL"),o=AbstractSyncAdapterGlobal.mTimeManager.getCurrentTime()),0==t){if(null==AbstractSyncAdapterGlobal.mServerChangedRecords||void 0===AbstractSyncAdapterGlobal.mServerChangedRecords.index(n)||-1==AbstractSyncAdapterGlobal.mServerChangedRecords.index(n)){null!=n&&n.indexOf(AbstractSyncAdapterGlobal.getBaseKeyHeader())>-1||(n=AbstractSyncAdapterGlobal.generateKey(),s={SYNC1:n},AbstractSyncAdapterGlobal.addToOperations(AbstractSyncAdapterGlobal.updateKeyOperation,i,s,r));const t=AbstractSyncAdapterGlobal.mBuilder.parse(e[S],r,n);null!=t&&(a+=t.length,AbstractSyncAdapterGlobal.recordstoSetList.push(new RecordSetItem(n,o,t)),AbstractSyncAdapterGlobal.mLocalChangedRecords.set(n,r),SamsungSCloudSyncService.SyncLogs.log(`getLocalUpdatesQueryCallback: Added to Upsync set ${r}`))}}else 1==t&&null!=n&&n.indexOf(AbstractSyncAdapterGlobal.getBaseKeyHeader()>-1)?(null==AbstractSyncAdapterGlobal.mServerChangedRecords||void 0===AbstractSyncAdapterGlobal.mServerChangedRecords.index(n)||AbstractSyncAdapterGlobal.mServerChangedRecords.index(n)>-1)&&(AbstractSyncAdapterGlobal.recordsToDeleteList.push(new RecordBase(n,o)),AbstractSyncAdapterGlobal.mLocalChangedRecords.set(n,r),SamsungSCloudSyncService.SyncLogs.log(`getLocalUpdatesQueryCallback: Added to Upsync Delete = ${r}`)):1==t&&(AbstractSyncAdapterGlobal.getProvider().Delete(i,{equals:[{key:AbstractSyncAdapterGlobal.getIdColumnName(),value:r}]},null),SamsungSCloudSyncService.SyncLogs.log(`getLocalUpdatesQueryCallback: Local Delete set ${r}`));AbstractSyncAdapterGlobal.doApplyBatch(AbstractSyncAdapterGlobal.updateKeyOperation),0==AbstractSyncAdapterGlobal.updateKeyOperation.length&&AbstractSyncAdapterGlobal.updatetoServer(AbstractSyncAdapterGlobal.recordstoSetList,AbstractSyncAdapterGlobal.recordsToDeleteList)}},this.getLocalUpdates=function(){AbstractSyncAdapterGlobal.getProvider().Query(AbstractSyncAdapterGlobal.getContentUri(),null,{equals:[{key:AbstractSyncAdapterGlobal.getDirtyColumnName(),value:1},{key:AbstractSyncAdapterGlobal.getAccountName(),value:SamsungSCloudSyncService.mSyncConstants.ACCOUNT_NAME},{key:AbstractSyncAdapterGlobal.getAccountType(),value:SamsungSCloudSyncService.mSyncConstants.ACCOUNT_TYPE}]},null,null,AbstractSyncAdapterGlobal.getLocalUpdatesQueryCallback)},this.addToOperations=function(e,t,n,r){e.push(new BatchOperation("UPDATE",t,n,{equals:[{key:AbstractSyncAdapterGlobal.getIdColumnName(),value:r}]},null,null))},this.getProjection=function(){return[AbstractSyncAdapterGlobal.getIdColumnName(),AbstractSyncAdapterGlobal.getKeyColumnName(),AbstractSyncAdapterGlobal.getTimeStampColumnName(),AbstractSyncAdapterGlobal.getDeletedColumnName()]},this.getServerUpdatesCallback=function(){try{AbstractSyncAdapterGlobal.getLocalUpdates()}catch(e){SamsungSCloudSyncService.SyncLogs.log(`getServerUpdatesCallback: Error occured on getLocalUpdates()${e}`),chrome.runtime.sendMessage({ERROR:"Can't get local updates"})}},this.getServerTime=function(){const e=AbstractSyncAdapterGlobal.getCloudServiceManager();AbstractSyncAdapterGlobal.getServerTimeStampCallback=AbstractSyncAdapterGlobal.getServerTimeStampCallback.bind(this),e.getRecordServiceManager().getServerTimeStamp(AbstractSyncAdapterGlobal.getServerTimeStampCallback)},this.getServerTimeStampCallback=function(e){let t=0;if(null!=e){const n=e.getResponseCode();0==n?(t=e.getServerTimeStamp(),AbstractSyncAdapterGlobal.serverTimeStamp=t,SamsungSCloudSyncService.SyncLogs.log(`The server time stamp received is ${t}`)):SamsungSCloudSyncService.SyncLogs.log(`There was an error in the request.Error Response code obtained${n}`)}void 0!==t&&0!=t&&(AbstractSyncAdapterGlobal.mTimeManager.updateSettingsUsingServer(t),AbstractSyncAdapterGlobal.getServerUpdatesCallback=AbstractSyncAdapterGlobal.getServerUpdatesCallback.bind(this),AbstractSyncAdapterGlobal.getServerUpdates(),SamsungSCloudSyncService.Once=1)},this.handleSync=function(){AbstractSyncAdapterGlobal.getServerTime()},this.removePreSyncedRecordsQueryCallback=function(e){if(null==e)return SamsungSCloudSyncService.SyncLogs.log("removePreSyncedRecordsQueryCallback: (ERROR)Cursor is null"),1==SamsungSCloudSyncService.Once&&(SamsungSCloudSyncService.Once=0,AbstractSyncAdapterGlobal.getServerUpdatesCallback()),!1;const t=[];let n=0;if(void 0===e.length||0==e.length)SamsungSCloudSyncService.SyncLogs.log("removePreSyncedRecordsQueryCallback:  there is nothing to be removed.");else do{const r=e[n].SYNC5,o=e[n].SYNC1,s="1"==e[n].IS_DELETED,i=e[n]._ID;t.push(o);const a=AbstractSyncAdapterGlobal.uServerRecords.get(o);if(null!=a)if(r>a.getTimeStamp()){if(1!=s&&a.isDeleted()){const e=[AbstractSyncAdapterGlobal.getDirtyColumnName(),1];try{AbstractSyncAdapterGlobal.getProvider().Update(uriFromSyncAdapter,e,{equals:[{key:AbstractSyncAdapterGlobal.getKeyColumnName(),value:o}]},null),SamsungSCloudSyncService.SyncLogs.log(`removePreSyncedRecordsQueryCallback: UPDATE DIRTY, Key : ${o}`)}catch(e){SamsungSCloudSyncService.SyncLogs.log("removePreSyncedRecordsQueryCallback: COULDN'T UPDATE DIRTY = 1")}}AbstractSyncAdapterGlobal.uServerRecords.unset(o),SamsungSCloudSyncService.SyncLogs.log(`removePreSyncedRecordsQueryCallback: Unset Key : ${o}`)}else AbstractSyncAdapterGlobal.uServerRecords.get(o).setID(i),SamsungSCloudSyncService.SyncLogs.log(`removePreSyncedRecordsQueryCallback: Set ID for Key : ${o}`);else SamsungSCloudSyncService.SyncLogs.log("Sync Broken : There is a duplicated record on Local.");n++}while(e.length>n);1==SamsungSCloudSyncService.Once&&(SamsungSCloudSyncService.Once=0,AbstractSyncAdapterGlobal.getServerUpdatesCallback());let r=0;AbstractSyncAdapterGlobal.uServerRecords.eachIterator((e=>{AbstractSyncAdapterGlobal.uServerRecords.get(e[0]).isDeleted()&&!t.indexOf(e)&&(AbstractSyncAdapterGlobal.uServerRecords.unset(e),r++)})),r>0&&SamsungSCloudSyncService.SyncLogs.log(`remove from serverChanges that already deleted in local : ${r}`)},this.removePreSyncedRecords=function(e){if(void 0===e||0==e.size())return AbstractSyncAdapterGlobal.removePreSyncedRecordsQueryCallback(null),!1;const t=e.keys();SamsungSCloudSyncService.mAppTool||(SamsungSCloudSyncService.mAppTool=new AppTool);let n=`${AbstractSyncAdapterGlobal.getKeyColumnName()} IN (`;n=SamsungSCloudSyncService.mAppTool.appendIds(n,t),n=n.concat(")"),n={ins:[{key:AbstractSyncAdapterGlobal.getKeyColumnName(),value:t}]},AbstractSyncAdapterGlobal.uServerRecords=e;const r=AbstractSyncAdapterGlobal.getContentUri();try{AbstractSyncAdapterGlobal.removePreSyncedRecordsQueryCallback=AbstractSyncAdapterGlobal.removePreSyncedRecordsQueryCallback.bind(AbstractSyncAdapterGlobal),AbstractSyncAdapterGlobal.getProvider().Query(r,AbstractSyncAdapterGlobal.getProjection(),n,null,null,AbstractSyncAdapterGlobal.removePreSyncedRecordsQueryCallback)}catch(e){return SamsungSCloudSyncService.SyncLogs.log(`Exception in calling query ${e}`),chrome.runtime.sendMessage({ERROR:"Query local DB exception"}),!1}return!0},this.cloudServiceEnd=function(){SamsungSCloudSyncService.SyncLogs.log("AbstractSyncAdapter.js :: cloudServiceEnd"),0==AbstractSyncAdapterGlobal.getSyncAdapterName().search(BOOKMARK_SERVER_TIME)?SamsungSCloudSyncService.isFixParentIDsDone?(AbstractSyncAdapterGlobal.serviceEndFromSync(),SamsungSCloudSyncService.SyncLogs.log("Bookmarks Sync done, Wait for Callback to end the service.")):(AbstractSyncAdapterGlobal.fixParentIds(),SamsungSCloudSyncService.isFixParentIDsDone=!0):AbstractSyncAdapterGlobal.serviceEndFromSync()},this.serviceEndFromSync=async function(){SamsungSCloudSyncService.SyncLogs.log("Service end from sync"),null!=AbstractSyncAdapterGlobal.mLastSyncTime&&null!=AbstractSyncAdapterGlobal.serverTimeStamp&&(await storageLocalApi.setItem(AbstractSyncAdapterGlobal.getSyncAdapterName(),AbstractSyncAdapterGlobal.serverTimeStamp),SamsungSCloudSyncService.SyncLogs.log(`Save Last Sync Time (serverTimeStamp): ${AbstractSyncAdapterGlobal.serverTimeStamp}`),SamsungSCloudSyncService.SyncLogs.log(`mLastSyncTime: ${AbstractSyncAdapterGlobal.mLastSyncTime}`)),null!=AbstractSyncAdapterGlobal.mServiceManager.getAuthManager()?(SamsungSCloudSyncService.SyncLogs.log("Sync Done. Ending the Cloud Service"),AbstractSyncAdapterGlobal.serviceEndCallbackFromNetworkClient=AbstractSyncAdapterGlobal.serviceEndCallbackFromNetworkClient.bind(AbstractSyncAdapterGlobal),AbstractSyncAdapterGlobal.mServiceManager.serviceEnd(!0,AbstractSyncAdapterGlobal.result,AbstractSyncAdapterGlobal.serviceEndCallbackFromNetworkClient)):SamsungSCloudSyncService.SyncLogs.log("No Auth Info.. Can not call cloud-end")},this.notifyServerStoragefull=function(){SamsungSCloudSyncService.SyncLogs.log("System is under STORAGE FULL ")},this.getCloudServiceManager=function(){return AbstractSyncAdapterGlobal.mServiceManager};const t=function(){let e=1,t=1,n=0,r=10;return function(o,s){!SamsungSCloudSyncService.firstSyncCompleted&&n!==t&&t%r==0&&(n=t,r*=2,chrome.runtime.sendMessage({SYNC:"FIRST_SYNC_PARTIAL_LOAD"})),e%10==0&&chrome.runtime.sendMessage({ITEM_DOWNLOAD_STATUS:e});const i=JSON.parse(s.mValue).sync3;t+=o>=1&&(""===i||"undefined"==i||null==i),e++}}();function n(e,t,n=!1){const r=this.getCloudServiceManager();this.getKeysCallbackFromNetworkClient=this.getKeysCallbackFromNetworkClient.bind(this),r.getRecordServiceManager().getKeys(t,this.GET_KEYS_SIZE,this.getKeysCallbackFromNetworkClient,n)}async function r(){SamsungSCloudSyncService.currentSync="",await storageLocalApi.setItem(SYNC_STATUS,"SYNC_COMPLETED"),SamsungSCloudSyncService.BrowserOverlay.clearAutoSyncTimeoutInterval(!1),SamsungSCloudSyncService.BrowserOverlay.clearSyncTimeoutInterval(),SamsungSCloudSyncService.SyncLogs.log("performSync: PERFORM SYNC : END "+Date.now())}}function Hash(e){this.length=0,this.items={};for(const t in e)e.hasOwnProperty(t)&&(this.items[t]=e[t],this.length++);this.set=function(e,t){let n;return this.hasItem(e)?n=this.items[e]:this.length++,this.items[e]=t,n},this.get=function(e){return this.hasItem(e)?this.items[e]:void 0},this.hasItem=function(e){return this.items.hasOwnProperty(e)},this.unset=function(e){if(this.hasItem(e))return previous=this.items[e],this.length--,delete this.items[e],previous},this.keys=function(){const e=[];for(const t in this.items)this.hasItem(t)&&e.push(t);return e},this.values=function(){const e=[];for(const t in this.items)this.hasItem(t)&&e.push(this.items[t]);return e},this.each=function(e){for(const t in this.items)this.hasItem(t)&&e(t,this.items[t])},this.eachIterator=function(e,t){try{let n=0;for(const r in this._object){let o=this._object[r],s=[r,o];s.key=r,s.value=o,e.call(t,s,n),n++}}catch(e){if(e!=$break)throw e}return this},this.clear=function(){this.items={},this.length=0},this.size=function(){return this.length},this.index=function(e){const t=this.detect((t=>t.value===e));return t&&t.key},this.merge=function(e){return this.clone().update(e)},this.detect=function(e,t){let n;return this.eachIterator((function(r,o){if(e.call(t,r,o,this))throw n=r,$break}),this),n},this.clone=function(){return new Hash(this)},this.update=function(e){return new Hash(e).inject(this,((e,t)=>(e.set(t.key,t.value),e)))}}function BrowserBookmarkSyncAdapter(){this.browserConsts=new BrowserConstants,this.syncUnit=new SyncUnit,this.cid=new CID,this.syncConsts=new SyncConstants,SamsungSCloudSyncService.BookmarkSyncAdapterGlobal=this,AbstractSyncAdapter.call(this,new SCloudServiceManager(this.cid.BROWSER_BOOKMARKS,!1)),this.getSyncAdapterName=function(){return this.syncUnit.BROWSER_BOOKMARK},this.getContentUri=function(){return this.browserConsts.BROWSER_BOOKMARK_URI},this.getDeletedColumnName=function(){return this.browserConsts.BOOKMARKS.IS_DELETED},this.getKeyColumnName=function(){return this.browserConsts.BOOKMARKS.SYNC1},this.getIdColumnName=function(){return this.browserConsts.BOOKMARKS._ID},this.getDirtyColumnName=function(){return this.browserConsts.BOOKMARKS.DIRTY},this.getBuilder=function(){return new BookMarkBuilder(SamsungSCloudSyncService.mContentProvider,null,null)},this.getCallerSyncAdapter=function(){return this.browserConsts.CALLER_IS_SYNCADAPTER},this.getAccountName=function(){return this.browserConsts.BOOKMARKS.ACCOUNT_NAME},this.getAccountType=function(){return this.browserConsts.BOOKMARKS.ACCOUNT_TYPE},this.getCid=function(){return this.cid.BROWSER_BOOKMARKS},this.getCtidKey=function(){return this.syncUnit.BROWSER_BOOKMARK_KEY},this.getTimeStampColumnName=function(){return this.browserConsts.BOOKMARKS.SYNC5},this.getLocalUpdatesSelection=function(){return`${this.getDirtyColumnName()} = 1`},this.getLocalupdatesUri=function(){return`${this.getCallerSyncAdapter()} == true${this.getAccountName()} == ${this.syncConsts.ACCOUNT_NAME} AND ${this.getAccountType()} == ${this.syncConsts.ACCOUNT_TYPE}`},this.doUpdateDelete=function(e,t,n){return t.isDeleted()?SamsungSCloudSyncService.mContentProvider.Delete(this.getContentUri(),{equals:[{key:this.getIdColumnName(),value:e.getID()}]},null):this.getBuilder().update(t.getValue(),t.getTimeStamp(),e.getID(),t.getKEY()),!0}}function BrowserTabSyncAdapter(){this.browserConsts=new BrowserConstants,this.syncUnit=new SyncUnit,this.cid=new CID,this.syncConsts=new SyncConstants,SamsungSCloudSyncService.TabSyncAdapterGlobal=this,AbstractSyncAdapter.call(this,new SCloudServiceManager(this.cid.BROWSER_TABS,!1)),this.getSyncAdapterName=function(){return this.syncUnit.BROWSER_TAB},this.getContentUri=function(){return this.browserConsts.BROWSER_TAB_URI},this.getDeletedColumnName=function(){return this.browserConsts.TABS.IS_DELETED},this.getKeyColumnName=function(){return this.browserConsts.TABS.SYNC1},this.getIdColumnName=function(){return this.browserConsts.TABS._ID},this.getDirtyColumnName=function(){return this.browserConsts.TABS.DIRTY},this.getBuilder=function(){return new TabBuilder(SamsungSCloudSyncService.mContentProvider,null,null)},this.getCallerSyncAdapter=function(){return this.browserConsts.CALLER_IS_SYNCADAPTER},this.getAccountName=function(){return this.browserConsts.TABS.ACCOUNT_NAME},this.getAccountType=function(){return this.browserConsts.TABS.ACCOUNT_TYPE},this.getCid=function(){return this.cid.BROWSER_TABS},this.getCtidKey=function(){return this.syncUnit.BROWSER_TAB_KEY},this.getTimeStampColumnName=function(){return this.browserConsts.TABS.SYNC5},this.getLocalUpdatesSelection=function(){return`${this.getDirtyColumnName()} = 1`},this.doUpdateDelete=function(e,t,n){return t.isDeleted()?SamsungSCloudSyncService.mContentProvider.Delete(this.getContentUri(),{equals:[{key:this.getIdColumnName(),value:e.getID()}]},null,this.doUpdateDeleteCallback):this.getBuilder().update(t.getValue(),t.getTimeStamp(),e.getID(),t.getKEY(),this.doUpdateDeleteCallback),!0},this.doUpdateDeleteCallback=function(e){e.rowsAffected>0&&SamsungSCloudSyncService.NEW_TAB_URL_ID&&chrome.runtime.sendMessage({SYNC:"RESULT_UPDATED"})}}SamsungSCloudSyncService.KVSResponseGlobal=null,SamsungSCloudSyncService.BookMarkBuilderGlobal=null,SamsungSCloudSyncService.TabBuilderGlobal=null,SamsungSCloudSyncService.kvsResponse=null,SamsungSCloudSyncService.startKey=null,SamsungSCloudSyncService.isFixParentIDsDone=!1,SamsungSCloudSyncService.Once=-1,SamsungSCloudSyncService.BookmarkSyncAdapterGlobal=null,SamsungSCloudSyncService.TabSyncAdapterGlobal=null,SamsungSCloudSyncService.TIME_DIFFERENCE=0,SamsungSCloudSyncService.PREVIOUS_SYS_TIME=0,SamsungSCloudSyncService.PREVIOUS_ELAPSED_TIME=0;class TimeManager{updateSettings(e,t,n){SamsungSCloudSyncService.TIME_DIFFERENCE=e,SamsungSCloudSyncService.PREVIOUS_SYS_TIME=t,SamsungSCloudSyncService.PREVIOUS_ELAPSED_TIME=n}updateSettingsUsingServer(e){SamsungSCloudSyncService.SyncLogs.log(`updateSettingsUsingServer serverTimeStamp = ${e}`);const t=(new Date).getTime(),n=e>0?t-e:0;(SamsungSCloudSyncService.TIME_DIFFERENCE||0)!=n&&(SamsungSCloudSyncService.SyncLogs.log(`updateSettingsUsingServer: The new TIME_DIFFERENCE is ${n}`),this.updateSettings(n,t,0))}getCurrentTime(){const e=SamsungSCloudSyncService.TIME_DIFFERENCE;return(new Date).getTime()-e}}function onFetchLoginMessage({win:e,tab:t}){fetchLogin({win:e,tab:t}).then((async({currentTabId:e,msg:t,winId:n})=>{chrome.windows.remove(n),chrome.action.setPopup({popup:POPUP_URL}),chrome.action.setIcon({path:"assets/img/logo32x32.png"}),await storageLocalApi.setItem(IS_FIRST_OPEN,"true"),SamsungSCloudSyncService.SyncLogs.log("LOGIN_COMPLETE"),SamsungSCloudSyncService.SyncLogs.log(t)})).catch((e=>{SamsungSCloudSyncService.SyncLogs.log(e),SamsungSCloudSyncService.SyncLogs.log("LOGIN_FAILURE")}))}function validateLogin(e){return console.log("validating login, url: ",e),new Promise((async(t,n)=>{const r={};if(e.replace(/[?&]+([^=&]+)=([^&]*)/gi,((e,t,n)=>r[t]=n)),r.closedAction){const{closedAction:o,auth_server_url:s,code:i}=r;if("signInSuccess"===o){const n=void 0===r.inputEmailID?r.inputPhoneID:decodeURIComponent(r.inputEmailID),a=await getAccessToken(i);await storageLocalApi.setArrayItems([[AUTH_URL,s],[REFRESH_TOKEN,a.refresh_token],[REFRESH_TOKEN_EXPIRES_IN,a.refresh_token_expires_in],[ACCOUNT_NAME,n],[IS_LOGGED_OUT,1]]),getUserCountryCode(s,a.userId,a.access_token),SamsungSCloudSyncService.SyncLogs.log("Refresh token received!"),await SamsungSCloudSyncService.BrowserOverlay.onAccessTokenReceived(e,a),t(o)}else n(o)}}))}function getAccessToken(e){return new Promise(((t,n)=>{const r=[`code=${e}`,`client_id=${APP_ID}`,`client_secret=${APP_SECRET}`,"grant_type=authorization_code"].join("&"),o=new Headers;o.append("Content-Type","application/x-www-form-urlencoded"),fetch(APIS.GET_AUTH_URL()+`?${r}`,{headers:o,method:"POST"}).then((e=>{200!==e.status&&n(e),t(e.json())}))}))}async function getAccountUrl(e,t){const n=APIS.LOGIN[e?"CN":"EU"],r=APP_ID,{platform:o}=navigator,s=storageLocalApi.getItem(CLIENT_IP)||"";let i;getBrowserName().toLowerCase();const a=sha256([o,getBrowserName(),EXT_DEVICE_ID,s,Date.now()].join("_")).slice(0,32),c=REDIRECT_URL;storageLocalApi.getItem(DEVICE_UNIQUE_ID)?i=storageLocalApi.getItem(DEVICE_UNIQUE_ID):(i=sha256([o,getBrowserName(),EXT_DEVICE_ID,s,Date.now()].join("_")).slice(0,39),storageLocalApi.setItem(DEVICE_UNIQUE_ID,i));const S=n+[`redirect_uri=${c}`,`client_id=${r}`,"response_type=CODE",`state=${a}`].join("&");SamsungSCloudSyncService.SyncLogs.log("before load"),chrome.tabs.query({windowId:t,active:!0},(([e])=>chrome.tabs.update(e.id,{url:S})))}function fetchLogin({win:e,tab:t}){return new Promise(((t,n)=>{const r=e.tabs[0].id,o=e.id,s=function(e,i,a){var c;a&&a.url&&0===a.url.indexOf(REDIRECT_URL)&&(c=a,chrome.tabs.update(r,{url:chrome.runtime.getURL("login-load.html")}),validateLogin(c.url).then((e=>t({msg:e,currentTabId:r,winId:o}))).catch(n),chrome.tabs.onUpdated.removeListener(s))};isFromChina().then((e=>{getAccountUrl(e,o),chrome.tabs.onUpdated.addListener(s)})),chrome.windows.onRemoved.addListener((e=>{if(o==e&&chrome.tabs.onUpdated.hasListeners(s)&&chrome.tabs.onUpdated.removeListener(s),e===o&&isLoggedIn()){var t={type:"basic",iconUrl:"assets/img/logo48x48.png",title:"Samsung Internet",message:LOGIN_SUCCESS,priority:1};chrome.notifications.create("sortNotify",t,(function(){})),setTimeout((function(){chrome.notifications.clear("sortNotify",(function(){}))}),3e3),SamsungSCloudSyncService.SyncLogs.log("Login popup closed.")}}))}))}function getUserCountryCode(e,t,n){const r=e||APIS.GET_AUTH_URL().replace("https://",""),o=n||storageLocalApi.getItem(ACCESS_TOKEN),s=t||storageLocalApi.getItem(USER_ID);fetch(`https://${r}/v2/profile/user/user/${s}`,{headers:{Authorization:`Bearer ${o}`,"x-osp-appId":APP_ID,"x-osp-userId":s}}).then((e=>e.text())).then((e=>{const t=e.indexOf("<countryCode>")+"<countryCode>".length,n=e.substring(t,t+2);storageLocalApi.setItem("COUNTRY_CODE",n)}))}